(this.webpackJsonpcaravan=this.webpackJsonpcaravan||[]).push([[0],{1051:function(e,t,n){"use strict";(function(e){var r=n(2),a=n(10),o=n.n(a),i=n(16),s=n(11),c=n(18),u=n(14),l=n(13),d=n(0),p=n.n(d),m=n(20),h=n(5),f=n(26),b=n(96),E=n(126),g=n(51),v=n(7),y=n(35),P=n(32),O=n(558),S=n(744),T=n(86),w=n(1065),I=n(359),x=n(565),j=n(361),C=n(257),k=n(1067),R=n(1093),N=n(1094),A=n(1086),K=n(71),B=n(38),_=n(60),D=n(135),M=n(67),U=(n(234),n(580)),F=function(t){Object(u.a)(r,t);var n=Object(l.a)(r);function r(t){var a;return Object(s.a)(this,r),(a=n.call(this,t)).handleImport=function(e){var t=e.target,n=new FileReader;t.files[0]&&t.files[0].size<1048576?(n.onload=function(e){var t=e.target.result;a.setConfigJson(t)},n.readAsText(t.files[0])):a.setState({configError:"Problem uploading file."})},a.handleImportFromKeystone=function(t){var n=e.from(t,"hex").toString("utf-8");a.setConfigJson(n)},a.refresh=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({refreshing:!0}),e.next=3,a.generatorRefresh();case 3:a.setState({refreshing:!1});case 4:case"end":return e.stop()}}),e)}))),a.resetErrorAndClearTargetValue=function(e){e.target.value="",a.setState({configError:""})},a.importDetails=function(){var e=a.state.configJson,t=a.props,n=t.setTotalSigners,r=t.setRequiredSigners,o=t.setAddressType,i=t.setNetwork,s=t.setStartingAddressIndex,c=t.setExtendedPublicKeyImporterMethod,u=t.setExtendedPublicKeyImporterExtendedPublicKey,l=t.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,d=t.setExtendedPublicKeyImporterBIP32Path,p=t.setExtendedPublicKeyImporterFinalized,m=t.setExtendedPublicKeyImporterName,h=t.updateWalletNameAction,f=t.setClientType,b=t.setClientUrl,E=t.setClientUsername,g=JSON.parse(e);n(g.quorum.totalSigners),r(g.quorum.requiredSigners),o(g.addressType),"regtest"===g.network?i("testnet"):i(g.network),h(0,g.name),g.client?(f(g.client.type),"private"===g.client.type&&(b(g.client.url),E(g.client.username))):f("unknown"),g.startingAddressIndex&&s(g.startingAddressIndex),g.extendedPublicKeys.forEach((function(e,t){var n=t+1;m(n,e.name),e.method?c(n,e.method):c(n,"unknown"),d(n,e.bip32Path),u(n,e.xpub),e.xfp?l(n,e.xfp):l(n,"unknown"),p(n,!0)}))},a.renderWalletImporter=function(){var e=a.state.configError;return a.props.configuring?p.a.createElement(p.a.Fragment,null,p.a.createElement(f.a,{container:!0,spacing:2,style:{marginTop:"20px"}},p.a.createElement(f.a,{item:!0},p.a.createElement("label",{htmlFor:"upload-config"},p.a.createElement("input",{style:{display:"none"},id:"upload-config",name:"upload-config",accept:"application/json",onChange:a.handleImport,onClick:a.resetErrorAndClearTargetValue,type:"file"}),p.a.createElement(b.a,{color:"primary",variant:"contained",component:"span"},"Import Wallet Configuration"))),p.a.createElement(U.a,{interaction:new v.KeystoneReader,shouldShowFileReader:!1,qrStartText:"SCAN KEYSTONE",handleSuccess:a.handleImportFromKeystone})),p.a.createElement(E.a,{error:!0},e)):""},a.renderSettings=function(){var e=null;return a.props.configuring&&(e=p.a.createElement(f.a,{item:!0,md:4},p.a.createElement(g.a,null,p.a.createElement(x.a,null)),p.a.createElement(g.a,{mt:2},p.a.createElement(j.a,null)),p.a.createElement(g.a,{mt:2},p.a.createElement(I.a,null)),p.a.createElement(g.a,{mt:2},p.a.createElement(C.a,null)),p.a.createElement(g.a,{mt:2},p.a.createElement(k.a,null)))),e},a.renderExtendedPublicKeyImporters=function(){for(var e=a.props,t=e.totalSigners,n=e.configuring,r=[],o=1;o<=t;o+=1)r.push(p.a.createElement(g.a,{key:o,mt:1===o?0:2,display:n?"block":"none"},p.a.createElement(N.a,{key:o,number:o})));return r},a.downloadWalletDetails=function(e){var t=a.props.walletDetailsText;e.preventDefault();var n=a.walletDetailsFilename();Object(y.a)(t,n)},a.clientDetails=function(){var e=a.props.client;return"private"===e.type?'{\n    "type": "private",\n    "url": "'.concat(e.url,'",\n    "username": "').concat(e.username,'"\n  }'):'{\n    "type": "public"\n  }'},a.extendedPublicKeyImporterBIP32Paths=function(){for(var e=a.props.totalSigners,t=[],n=1;n<=e;n+=1)t.push("".concat(a.extendedPublicKeyImporterBIP32Path(n)).concat(n<e?",":""));return t.join("\n")},a.extendedPublicKeyImporterBIP32Path=function(e){var t=a.props.extendedPublicKeyImporters[e],n="text"===t.method?"Unknown (make sure you have written this down previously!)":t.bip32Path,r=!!t.fingerprint;return"unknown"===t.method?'    {\n        "name": "'.concat(t.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(t.extendedPublicKey,'"\n        }'):'    {\n        "name": "'.concat(t.name,'",\n        "bip32Path": "').concat(n,'",\n        "xpub": "').concat(t.extendedPublicKey,'",\n        "method": "').concat(t.method,'"').concat(r?',\n        "fingerprint": "'.concat(t.fingerprint,'"'):"","\n      }")},a.walletDetailsFilename=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType,o=e.walletName;return"bitcoin-".concat(n,"-of-").concat(t,"-").concat(r,"-").concat(o,".json")},a.totalBalance=function(){var e=a.props,t=e.deposits,n=e.change;return Object.keys(t.nodes).length?Object(h.satoshisToBitcoins)(t.balanceSats.plus(n.balanceSats)).toFixed():""},a.clearConfig=function(e){var t=a.props,n=t.setExtendedPublicKeyImporterVisible,r=t.resetWallet;e.preventDefault(),r(),n(!0),a.setState({generating:!1})},a.handleConfigJsonAddressType=function(e){var t=JSON.parse(e);return"P2WSH-P2SH"===t.addressType&&(t.addressType="P2SH-P2WSH"),JSON.stringify(t)},a.render=function(){var e=a.props,t=e.client,n=e.configuring,r=e.confirmedBalance,o=e.walletName,i=e.setName,s=e.deposits,c=e.change,u=e.network,l=e.pendingBalance,d=e.nodesLoaded,m=e.frozen,b=e.unknownAddresses,v=e.walletDetailsText,y=e.KeystoneWalletVerifyCode,P=e.shouldShowWalletDetailURs,O=a.state,S=O.refreshing,T=O.generating,I=c.fetchUTXOsErrors+s.fetchUTXOsErrors>0?"Wallet loaded, but with errors...":"";return p.a.createElement(p.a.Fragment,null,p.a.createElement(g.a,{mt:3},p.a.createElement(f.a,{container:!0,spacing:3},p.a.createElement(f.a,{item:!0,xs:10,md:6},p.a.createElement(w.a,{editable:!Object.keys(s.nodes).length||!Object.keys(c.nodes).length,walletName:o,setName:i,balance:+Object(h.satoshisToBitcoins)(r).toFixed(),pendingBalance:+Object(h.satoshisToBitcoins)(l).toFixed(),network:u})),p.a.createElement(f.a,{item:!0,xs:10,md:6},(d||m)&&p.a.createElement(A.a,{addresses:b,refreshing:S,walletActivated:d,handleRefresh:function(){return a.refresh()},onClearConfig:function(e){a.clearConfig(e)},onDownloadConfig:function(e){return a.downloadWalletDetails(e)},walletDetailsText:v,KeystoneWalletVerifyCode:y,shouldShowWalletDetailURs:P,client:t,onImportAddresses:function(e,t){return a.afterImportAddresses(t)}})))),I.length?p.a.createElement(E.a,{style:{float:"right",padding:"11px",fontSize:"1.5em"},error:!0},I):"",p.a.createElement(g.a,null,p.a.createElement(f.a,{container:!0,spacing:3},p.a.createElement(f.a,{item:!0,xs:12},a.renderWalletImporter()),p.a.createElement(f.a,{item:!0,md:n?8:12},a.renderExtendedPublicKeyImporters(),p.a.createElement(g.a,{mt:2},p.a.createElement(R.a,{generating:T,setGenerating:function(e){return a.setGenerating(e)},downloadWalletDetails:a.downloadWalletDetails,walletDetailsText:v,KeystoneWalletVerifyCode:y,shouldShowWalletDetailURs:P,refreshNodes:function(e){return a.generatorRefresh=e}}))),a.renderSettings())))},a.state={configError:"",configJson:"",refreshing:!1,generating:!1},a}return Object(c.a)(r,null,[{key:"validateProperties",value:function(e,t,n){for(var r=0;r<t.length;r+=1){var a=t[r],o=""!==n?e[n]:e;if(!Object.prototype.hasOwnProperty.call(o,a))return'Configuration missing property "'.concat(""!==n?"".concat(n,"."):"").concat(a,'"')}return""}},{key:"validateConfig",value:function(e){var t=r.validateProperties(e,["name","addressType","network","quorum","extendedPublicKeys"],"");if(""!==t)return t;if(void 0!==e.startingAddressIndex){var n=Object(h.validateBIP32Index)(String(e.startingAddressIndex),{mode:"unhardened "}).replace("BIP32","Starting Address");if(""!==n)return n}if(e.client){var a="public"===e.client.type?["type"]:["type","url","username"],o=r.validateProperties(e,a,"client");if(""!==o)return o}var i=r.validateProperties(e,["requiredSigners","totalSigners"],"quorum");return""!==i?i:r.validateExtendedPublicKeys(e.extendedPublicKeys,e.network)}},{key:"validateExtendedPublicKeys",value:function(e,t){var n=t;"regtest"===t&&(n="testnet");for(var r={name:function(e,t){return"string"===typeof e?"":"Extended public key ".concat(t," name must be a string")},bip32Path:function(t,n){if("text"===e[n-1].method)return"";if("undefined"===typeof e[n-1].method)return"";var r=Object(h.validateBIP32Path)(t);return""!==r?"Extended public key ".concat(n," error: ").concat(r):""},xpub:function(e){return Object(h.validateExtendedPublicKey)(e,n)},method:function(e,t){return["trezor","keystone","coldcard","ledger","hermit","xpub","text",void 0].includes(e)?"":"Invalid method for extended public key ".concat(t)}},a=Object.keys(r),o=[],i=0;i<e.length;i+=1){if(o.includes(e[i].xpub))return"Duplicate xpub found.";o.push(e[i].xpub);for(var s=0;s<a.length;s+=1){var c=a[s],u=e[i][c],l=r[c](u,i+1);if(""!==l)return l}}return""}}]),Object(c.a)(r,[{key:"componentDidMount",value:function(){if(sessionStorage){var e=sessionStorage.getItem(T.a);e&&this.setConfigJson(e)}}},{key:"setConfigJson",value:function(e){var t,n=this,a=this.handleConfigJsonAddressType(e);try{var o=JSON.parse(a);"P2WSH-P2SH"===o.addressType&&(o.addressType="P2SH-P2WSH"),t=r.validateConfig(o)}catch(i){t="Invalid JSON"}sessionStorage&&""===t&&sessionStorage.setItem(T.a,a),this.setState({configJson:a,configError:t},(function(){""===t&&n.importDetails()}))}},{key:"setGenerating",value:function(e){var t=this.state.generating,n=e;void 0===e&&(n=!t),this.setState({generating:n})}}]),r}(p.a.Component);F.defaultProps={pendingBalance:0};var L=Object(r.a)(Object(r.a)({fetchSliceData:O.a,resetWallet:P.o,setName:P.u,setTotalSigners:B.l,setRequiredSigners:B.j,setAddressType:B.g,setNetwork:B.i,setStartingAddressIndex:B.k,setExtendedPublicKeyImporterMethod:_.n,setExtendedPublicKeyImporterExtendedPublicKey:_.k,setExtendedPublicKeyImporterBIP32Path:_.j,setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:_.l,setExtendedPublicKeyImporterName:_.o,setExtendedPublicKeyImporterFinalized:_.m,setExtendedPublicKeyImporterVisible:_.p,updateWalletNameAction:P.u},Object(D.a)({setClientType:M.c,setClientUrl:M.d,setClientUsername:M.f,setClientPassword:M.a})),{},{updateDepositNode:P.s,updateChangeNode:P.r});t.a=Object(m.b)((function(e){return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e.settings),e.quorum),{walletName:e.wallet.common.walletName,nodesLoaded:e.wallet.common.nodesLoaded,walletMode:e.wallet.common.walletMode}),{},{confirmedBalance:S.a.getConfirmedBalance(e),pendingBalance:S.a.getPendingBalance(e),walletDetailsText:Object(K.getWalletDetailsText)(e),unknownAddresses:Object(K.getUnknownAddresses)(e),unknownSlices:Object(K.getUnknownAddressSlices)(e),KeystoneWalletVerifyCode:Object(K.getKeystoneWalletVerifyCode)(e),shouldShowWalletDetailURs:Object(K.getKeystoneExistence)(e)},e.wallet),{},{client:e.client})}),L)(F)}).call(this,n(8).Buffer)},1065:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(5),i=n(367),s=n(307),c=n(308),u=n(26),l=n(55),d=n(559),p=n(255),m=Object(i.a)((function(e){return{root:{height:"100%"},title:{fontSize:"2rem",color:"#212529"},balance:{fontSize:"1.2rem"},gutter:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(2)}}})),h=function(e){var t=e.walletName,n=e.setName,r=e.balance,o=void 0===r?0:r,i=e.pendingBalance,h=e.editable,f=e.network,b=m();return a.a.createElement(s.a,{"data-cy":"wallet-info-card",className:b.root},a.a.createElement(c.a,null,a.a.createElement(u.a,{container:!0,direction:"row",alignItems:"center"},h?a.a.createElement(u.a,{item:!0},a.a.createElement(l.a,{variant:"h1",className:b.title},a.a.createElement(p.a,{number:0,name:t,setName:n}))):a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{container:!0,alignItems:"center",className:b.gutter},a.a.createElement(u.a,{item:!0,xs:1},a.a.createElement(d.a,{network:f})),a.a.createElement(u.a,{item:!0},a.a.createElement(l.a,{variant:"h1",className:b.title},t))),a.a.createElement(u.a,{container:!0,className:b.gutter},a.a.createElement(u.a,{item:!0,xs:12,mt:5},a.a.createElement(l.a,{"data-cy":"balance",variant:"subtitle1",className:b.balance},o," BTC")),a.a.createElement(u.a,{item:!0},a.a.createElement(l.a,{"data-cy":"pending-balance",variant:"caption"},0!==i?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{style:{color:i>0?"green":"red",fontWeight:"bold"}},i>0?"+":"",i," BTC")," ","(unconfirmed)"):"")))))))};h.defaultProps={network:o.NETWORKS.TESTNET,balance:0,pendingBalance:0},t.a=h},1067:function(e,t,n){"use strict";var r=n(11),a=n(18),o=n(14),i=n(13),s=n(0),c=n.n(s),u=n(20),l=n(5),d=n(307),p=n(26),m=n(376),h=n(308),f=n(370),b=n(442),E=n(208),g=n(309),v=n(443),y=n(126),P=n(441),O=n(135),S=n(38),T=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleIndexChange=function(e){var t=a.props.setStartingAddressIndex,n=e.target.value,r=Object(l.validateBIP32Index)(n,{mode:"unhardened"}).replace("BIP32","Starting Address");!r&&n&&t(parseInt(n,10)),a.setState({startingAddressIndexField:n,startingAddressIndexError:r})},a.handleCustomIndexChange=function(e){var t="true"===e.target.value;a.setState({customIndex:t})},a.state={customIndex:0!==e.startingAddressIndex,startingAddressIndexField:e.startingAddressIndex},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state,t=e.customIndex,n=e.startingAddressIndexField,r=e.startingAddressIndexError;return c.a.createElement(d.a,null,c.a.createElement(p.a,{container:!0,justify:"space-between"},c.a.createElement(m.a,{title:"Starting Address Index"})),c.a.createElement(h.a,null,c.a.createElement(p.a,{item:!0},c.a.createElement(f.a,{component:"fieldset"},c.a.createElement(b.a,null,c.a.createElement(E.a,{id:"default",control:c.a.createElement(g.a,{color:"primary"}),name:"customIndex",value:"false",label:c.a.createElement("strong",null,"Default (0)"),onChange:this.handleCustomIndexChange,checked:!t}),c.a.createElement(v.a,{title:"The starting address index allows you to skip forward in a wallet. Addresses with indices less than the starting address are ignored."},c.a.createElement(E.a,{id:"custom",control:c.a.createElement(g.a,{color:"primary"}),name:"customIndex",value:"true",label:"Custom",onChange:this.handleCustomIndexChange,checked:t})),c.a.createElement(y.a,null,"Use the default value if you do not understand how to use starting address index.")),t&&c.a.createElement(P.a,{fullWidth:!0,value:n,type:"text",name:"startingAddressIndex",onChange:this.handleIndexChange,error:Boolean(r),helperText:r})))))}}]),n}(c.a.Component);t.a=Object(u.b)((function(e){return{startingAddressIndex:e.settings.startingAddressIndex}}),Object(O.a)({setStartingAddressIndex:S.e}))(T)},1077:function(e,t,n){"use strict";(function(e){var r=n(43),a=n(0),o=n.n(a),i=n(7),s=n(51),c=n(26),u=n(96),l=n(126),d=n(167),p=n.n(d),m=n(20),h=n(66),f=n(237),b=n(35);t.a=Object(m.b)((function(e){return{walletName:e.wallet.common.walletName}}),{})((function(t){var n=t.signatureImporter,d=t.network,m=t.inputs,E=t.outputs,g=t.walletName,v=t.validateAndSetSignature,y=t.resetBIP32Path,P=t.enableChangeMethod,O=t.disableChangeMethod,S=function(){var e=m.map((function(e){return"undefined"===typeof e.bip32Path?n.bip32Path:"".concat(n.bip32Path).concat(e.bip32Path.slice(1))}));return Object(i.SignMultisigTransaction)({keystore:i.KEYSTONE,network:d,inputs:m,outputs:E,bip32Paths:e})},T=Object(a.useState)(""),w=Object(r.a)(T,2),I=w[0],x=w[1],j=Object(a.useState)(S().isSupported?i.PENDING:i.UNSUPPORTED),C=Object(r.a)(j,1)[0],k=S();return C===i.UNSUPPORTED?o.a.createElement(h.a,{messages:k.messagesFor({state:C}),excludeCodes:["keystone.signature_request"]}):o.a.createElement(s.a,{mt:2},o.a.createElement(s.a,{mt:2},o.a.createElement(c.a,{container:!0,spacing:2},o.a.createElement(c.a,{item:!0},o.a.createElement(f.a,{data:k.request(),startText:"Show Transaction QRCode"})),o.a.createElement(c.a,{item:!0},o.a.createElement(u.a,{onClick:function(){var t=e.from(S().request(),"hex"),n=p()().format("HHmm"),r="".concat(n,"-").concat(g,".psbt");Object(b.a)(t,r)},variant:"outlined"},"Export Transaction"))),o.a.createElement(f.b,{qrStartText:"Scan Signature QR Code",fileStartText:"Upload Signed PSBT",interaction:k,onStart:O,onSuccess:function(e){var t=Object.values(e).reduce((function(e,t){return e.concat(t)}),[]);x(""),P(),v(t,(function(e){x(e)}))},onClear:function(){y(),x(""),P()},showFileReader:!1,shouldShowFileReader:!0,fileType:"psbt"}),o.a.createElement(h.a,{messages:k.messagesFor({state:C}),excludeCodes:["keystone.signature_request"]}),o.a.createElement(l.a,{error:!0},I)))}))}).call(this,n(8).Buffer)},1078:function(e,t,n){"use strict";(function(e){var r=n(96),a=n(0),o=n.n(a);t.a=function(t){var n=t.startText,a=t.interaction,i=t.handleSuccess,s=t.handleError,c=t.fileType,u="json"===c?"application/json":".psbt";return o.a.createElement("label",{htmlFor:"upload-keystone-xpub"},o.a.createElement("input",{style:{display:"none"},id:"upload-keystone-xpub",name:"upload-keystone-xpub",accept:u,onChange:function(t){var n=t.target;try{"json"===c?function(e){var t=new FileReader;t.readAsText(e),t.onload=function(e){var t=e.target.result,n=a.parseFile(t).result;i(n)}}(n.files[0]):function(t){var n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(t){var n=t.target.result,r=a.parseFile(e.from(n).toString("hex")).result;i(r)}}(n.files[0])}catch(r){s(r)}},type:"file"}),o.a.createElement(r.a,{variant:"contained",color:"primary",component:"span"},n))}}).call(this,n(8).Buffer)},1084:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),o=n(26),i=n(96),s=n(86),c=n(237),u=n(575);t.a=function(t){var n=t.onClearFn,r=t.onDownloadFn,l=t.shouldRenderURButton,d=t.walletDetailsText,p=t.KeystoneWalletVerifyCode;return a.a.createElement(o.a,{container:!0,spacing:2},a.a.createElement(o.a,{item:!0},a.a.createElement(i.a,{variant:"contained",color:"primary",onClick:r},"Download Wallet Details")),l&&a.a.createElement(o.a,{item:!0},a.a.createElement(c.c,{data:e.from(d,"utf-8").toString("hex"),title:"Scan the QR Code using Keystone",renderDescription:function(){return a.a.createElement(u.a,{verifyCode:p})},startText:"Show Wallet For Keystone"})),a.a.createElement(o.a,{item:!0},a.a.createElement(i.a,{onClick:function(e){return function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem(s.a),n(e)}(e)},variant:"contained",color:"secondary"},"Clear Wallet")))}}).call(this,n(8).Buffer)},1086:function(e,t,n){"use strict";(function(e){var r=n(136),a=n(0),o=n.n(a),i=n(367),s=n(9),c=n(443),u=n(307),l=n(376),d=n(308),p=n(26),m=n(1101),h=n(96),f=n(735),b=n(1728),E=n(1729),g=n(1730),v=(n(234),n(86)),y=n(205),P=n(237),O=n(575),S=Object(i.a)((function(){return{card:{height:"100%",flexDirection:"column",display:"flex"},cardContent:{paddingTop:"0px",display:"flex",flex:1}}})),T=Object(s.a)({root:{"&.Mui-disabled":{pointerEvents:"auto"}}})(h.a),w=function(e){var t=e.tooltipText,n=e.disabled,a=e.onClick,i=Object(r.a)(e,["tooltipText","disabled","onClick"]),s={disabled:n,component:n?"div":void 0,onClick:n?void 0:a};return o.a.createElement(c.a,{title:t},o.a.createElement(T,Object.assign({},i,s)))},I=function(t){var n=t.addresses,r=t.client,a=t.handleRefresh,i=t.onClearConfig,s=t.onDownloadConfig,c=t.onImportAddresses,h=t.refreshing,T=t.walletActivated,I=t.walletDetailsText,x=t.KeystoneWalletVerifyCode,j=t.shouldShowWalletDetailURs,C=S();return o.a.createElement(u.a,{className:C.card},o.a.createElement(l.a,{title:"Wallet Actions"}),o.a.createElement(d.a,{className:C.cardContent},o.a.createElement(p.a,{container:!0,spacing:1,alignItems:"center",justify:"center"},o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(m.a,{variant:"outlined"},o.a.createElement(w,{tooltipText:"Force a refresh for latest wallet state and balance.",disabled:!T,onClick:a,startIcon:h?o.a.createElement(f.a,{size:24}):o.a.createElement(b.a,null)},"Refresh"),o.a.createElement(w,{tooltipText:"Download wallet configuration to local machine for backup. No security is lost with this, but access to this file provides anyone who has it information about balances.",onClick:s,disabled:!1,startIcon:o.a.createElement(E.a,null)},"Download Configuration"),o.a.createElement(w,{tooltipText:"Only clears the wallet config from browser sessions. Funds remain unaffected.",disabled:!T,startIcon:o.a.createElement(g.a,null),onClick:function(e){e.preventDefault(),sessionStorage&&sessionStorage.removeItem(v.a),i(e)}},"Clear Wallet"))),j&&o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(m.a,{variant:"outlined"},o.a.createElement(P.c,{buttonStyle:{variant:"outlined",color:"default",withIcon:!0},startText:"Show Wallet for Keystone",title:"Scan the QR Code using Keystone",renderDescription:function(){return o.a.createElement(O.a,{verifyCode:x})},data:e.from(I,"utf-8").toString("hex")}))),"private"===r.type&&T&&o.a.createElement(p.a,{item:!0},o.a.createElement(y.a,{addresses:n,client:r,importCallback:c})))))};I.defaultProps={walletActivated:!1,refreshing:!1,addresses:[]},t.a=I}).call(this,n(8).Buffer)},1091:function(e){e.exports=JSON.parse('{"a":"0.3.11"}')},1093:function(e,t,n){"use strict";var r=n(2),a=n(10),o=n.n(a),i=n(16),s=n(11),c=n(18),u=n(14),l=n(13),d=n(0),p=n.n(d),m=n(20),h=n(434),f=n(5),b=n(307),E=n(376),g=n(308),v=n(96),y=n(51),P=n(55),O=n(26),S=n(441),T=n(1040),w=n(126),I=n(1085),x=n.n(I),j=n(85),C=n(257),k=n(732),R=n(733),N=n(444),A=n(97),K=n(734),B=n(1768),_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props.startingAddressIndex;return p.a.createElement(y.a,null,t>0&&p.a.createElement(B.a,{severity:"info"},"Starting Address Index set to ",t),p.a.createElement(k.a,null,p.a.createElement(R.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"Name"),p.a.createElement(A.a,null,"BIP32 Path"),p.a.createElement(A.a,null,"Extended Public Key"))),p.a.createElement(K.a,null,e.renderConfirmationInfo())))},e.renderConfirmationInfo=function(){var t=e.props.extendedPublicKeyImporters;return Object.values(t).map((function(e){return p.a.createElement(N.a,{key:e.extendedPublicKey},p.a.createElement(A.a,null,e.name),p.a.createElement(A.a,null,"text"===e.method?"N/A":e.bip32Path),p.a.createElement(A.a,null,e.extendedPublicKey))}))},e}return n}(p.a.Component);var D=Object(m.b)((function(e){return{startingAddressIndex:e.settings.startingAddressIndex,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters}}),{})(_),M=n(1731),U=n(1722),F=n(735),L=n(1041),z=n(32),W=n(21),H=n(86),q=n(362),G=n.n(q),V=n(344),X=n(71),Y=(n(234),n(48)),J=n(559),Z=n(1070),Q=n.n(Z),$=n(367),ee=n(305),te=n(43),ne=n(136),re=n(443),ae=n(1751),oe=n(364),ie=n(256),se=n(205),ce=n(370),ue=n(731),le=n(738),de=n(1026),pe=n(1758),me=n(1726),he=n(7),fe=n(87),be=n(579),Ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){var e=r.props,t=e.signingKeys,n=e.number;t[n-1]>0&&r.updateKeySelection(t[n-1])},r.render=function(){var e=r.state.selection,t=r.props,n=t.number,a=t.signatureImporter;return p.a.createElement("div",null,r.renderKeySelectorMenu(),(e>0&&n>0||a&&a.finalized)&&r.renderSignatureImporter())},r.renderSignatureImporter=function(){var e=r.props.number,t=r.getAssociatedExtendedPublicKeyImporter();return p.a.createElement(y.a,{mt:2},p.a.createElement(be.a,{number:e,extendedPublicKeyImporter:t}))},r.getAssociatedExtendedPublicKeyImporter=function(){var e=r.props.extendedPublicKeyImporters,t=r.state.selection,n=null;return t&&(n=e[t]),n},r.renderKeySelectorMenu=function(){var e=r.props,t=e.number,n=e.signatureImporters,a=e.setBIP32Path,o=r.state.selection,i="keySelector".concat(t),s=r.getAssociatedExtendedPublicKeyImporter();if(null!==s&&t>0){var c=n[t];if(c.signature.length>0)return"";s.bip32Path!==c.bip32Path&&"text"!==s.method&&setTimeout((function(){a(t,s.bip32Path)}),0)}return p.a.createElement("form",null,p.a.createElement(ce.a,{fullWidth:!0},p.a.createElement(ue.a,{id:i},"Select Key"),p.a.createElement(le.a,{labelId:i,id:"signature-".concat(t,"-key-select"),value:o,onChange:r.handleKeyChange},p.a.createElement(de.a,{value:""},"< Select Extended Public Key >"),r.renderKeySelectorMenuItems())))},r.extendedPublicKeyImporterNotUsed=function(e){var t=r.props,n=t.inputs,a=t.network,o=t.signatureImporters;if(0===t.number)return!0;for(var i=0;i<n.length;i+=1)for(var s=n[i],c=Object(f.deriveChildPublicKey)(e.extendedPublicKey,s.bip32Path,a),u=1;u<=Object.keys(o).length;u+=1)for(var l=o[u],d=0;d<l.publicKeys.length;d+=1){if(l.publicKeys[d]===c)return!1}return!0},r.renderKeySelectorMenuItems=function(){for(var e=r.props,t=e.extendedPublicKeyImporters,n=e.totalSigners,a=[],o=1;o<=n;o+=1){var i=t[o];r.extendedPublicKeyImporterNotUsed(i)&&a.push(p.a.createElement(de.a,{value:o,key:o},i.name))}return a},r.handleKeyChange=function(e){var t=r.props.onChange;(r.updateKeySelection(e.target.value),t)&&t(e,r.props.extendedPublicKeyImporters[e.target.value])},r.state={selection:""},r}return Object(c.a)(n,[{key:"updateKeySelection",value:function(e){if(this.setState({selection:e}),""!==e){var t=this.props,n=t.extendedPublicKeyImporters,r=t.setMethod,a=t.number,o=t.setSigningKey,i=n[e].method;r(a,"text"===i?"":i),a>0&&o(a,e)}}}]),n}(p.a.Component);Ee.defaultProps={onChange:null,signatureImporter:null};var ge={setBIP32Path:fe.h,setMethod:fe.k,setSigningKey:W.T},ve=Object(m.b)((function(e,t){return Object(r.a)(Object(r.a)({},e.quorum),{},{totalSigners:e.spend.transaction.totalSigners,inputs:e.spend.transaction.inputs,network:e.settings.network,signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],signingKeys:e.spend.transaction.signingKeys})}),ge)(Ee),ye=n(66),Pe={keySelected:!1,deviceType:"unknown",bip32Path:"",hasInteraction:!1,interactionState:he.PENDING,interactionError:"",interactionMessage:""},Oe=function(e,t){switch(t.type){case"RESET":return Object(r.a)(Object(r.a)({},e),{},{interactionError:"",interactionMessage:"",interactionState:he.PENDING});case"SET_KEY_SELECTED":return Object(r.a)(Object(r.a)({},e),{},{keySelected:!0});case"SET_KEY_UNSELECTED":return Object(r.a)(Object(r.a)({},e),{},{keySelected:!1});case"SET_DEVICE_TYPE":return Object(r.a)(Object(r.a)({},e),{},{deviceType:t.value});case"SET_BIP32_PATH":return Object(r.a)(Object(r.a)({},e),{},{bip32Path:t.value});case"SET_ACTIVE":return Object(r.a)(Object(r.a)({},e),{},{interactionState:he.ACTIVE});case"HAS_INTERACTION":return Object(r.a)(Object(r.a)({},e),{},{hasInteraction:t.value});case"SET_MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{interactionMessage:t.value,interactionError:""});case"SET_ERROR":return Object(r.a)(Object(r.a)({},e),{},{interactionError:t.value,interactionMessage:""});default:return e}},Se=function(e){var t=e.slice,n=e.network,r=Object(d.useReducer)(Oe,Pe),a=Object(te.a)(r,2),s=a[0],c=a[1],u=Object(d.useState)(null),l=Object(te.a)(u,2),m=l[0],h=l[1],b=Object(f.multisigAddressType)(t.multisig),E=Object(f.multisigRequiredSigners)(t.multisig),g=Object(f.multisigTotalSigners)(t.multisig);function S(){return(S=Object(i.a)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"SET_ACTIVE"}),n=t.multisig,e.prev=2,e.next=5,m.run();case 5:(r=e.sent).address===n.address&&r.serializedPath===m.bip32Path?c({type:"SET_MESSAGE",value:"Success"}):c({type:"SET_ERROR",value:"An unknown error occured"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c({type:"SET_ERROR",value:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(ve,{number:0,onChange:function(e,r){var a=t.multisig,o=t.bip32Path;if(r){c({type:"SET_KEY_SELECTED"}),c({type:"SET_DEVICE_TYPE",value:r.method});var i="".concat(r.bip32Path).concat(o.slice(1));"Unknown"!==r.bip32Path?c({type:"SET_BIP32_PATH",value:i}):c({type:"SET_BIP32_PATH",value:""}),"trezor"===r.method?(h(Object(he.ConfirmMultisigAddress)({keystore:r.method,network:n,bip32Path:i,multisig:a})),c({type:"HAS_INTERACTION",value:!0}),c({type:"RESET"})):(h(null),c({type:"HAS_INTERACTION",value:!1}),c({type:"RESET"}))}else h(null),c({type:"HAS_INTERACTION",value:!1}),c({type:"RESET"}),c({type:"SET_KEY_UNSELECTED"})}}),s.keySelected&&p.a.createElement("form",null,p.a.createElement(ce.a,{fullWidth:!0},p.a.createElement(ue.a,null,"Select Method"),p.a.createElement(le.a,{id:"confirm-importer-select",value:"",onChange:function(e){if(""!==e.target.value){c({type:"SET_DEVICE_TYPE",value:e.target.value});var r=t.multisig;h(Object(he.ConfirmMultisigAddress)({keystore:e.target.value,network:n,bip32Path:s.bip32Path,multisig:r})),c({type:"HAS_INTERACTION",value:!0}),c({type:"RESET"})}}},p.a.createElement(de.a,{value:""},"< Select method >"),p.a.createElement(de.a,{value:he.TREZOR},"Trezor"),p.a.createElement(de.a,{value:he.COLDCARD,disabled:!0},"Coldcard"),p.a.createElement(de.a,{value:he.LEDGER,disabled:!0},"Ledger"),p.a.createElement(de.a,{value:he.HERMIT,disabled:!0},"Hermit"),p.a.createElement(de.a,{value:"text",disabled:!0},"Enter as text")))),s.hasInteraction&&p.a.createElement(p.a.Fragment,null,p.a.createElement(y.a,null,p.a.createElement("p",null,"Confirm the following ",n.length?n:""," ",b," ",E," -of-",g," multisig address on your device:"),p.a.createElement(k.a,null,p.a.createElement(K.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"Address:"),p.a.createElement(A.a,null,p.a.createElement("code",null,t.multisig.address))),p.a.createElement(N.a,null,p.a.createElement(A.a,null,"BIP32 Path:"),p.a.createElement(A.a,null,p.a.createElement("code",null,s.bip32Path)))))),""!==s.interactionMessage&&p.a.createElement(y.a,{mt:2,align:"center"},p.a.createElement(P.a,{variant:"h5",style:{color:"green"}},p.a.createElement(pe.a,null),"\xa0 ",s.interactionMessage)),""!==s.interactionError&&p.a.createElement(y.a,{mt:2,align:"center",style:{color:"red"}},p.a.createElement(P.a,{variant:"h5"},p.a.createElement(me.a,null),"\xa0 Confirmation Error"),p.a.createElement(P.a,{variant:"caption"},s.interactionError)),""===s.interactionMessage&&""===s.interactionError&&p.a.createElement(ye.a,{messages:m.messagesFor({state:s.interactionState})}),p.a.createElement(v.a,{variant:"contained",size:"large",onClick:function(){return S.apply(this,arguments)},disabled:s.interactionState===he.ACTIVE||!s.bip32Path},"Confirm"),(""!==s.interactionMessage||""!==s.interactionError)&&p.a.createElement(v.a,{size:"large",onClick:function(){return c({type:"RESET"})}},"Reset")))};Se.defaultProps={network:""};var Te=Se,we=Object($.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));var Ie=function(e,t){var n=e.tab,r=p.a.createElement(U.a,Object.assign({value:t.toString(),key:t},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t),n));return n.disabled?p.a.createElement(re.a,{title:"Not available for this address",key:t,arrow:!0},p.a.createElement("div",null,r)):r};function xe(e){var t=e.children,n=e.value,r=e.index,a=Object(ne.a)(e,["children","value","index"]);return p.a.createElement(O.a,Object.assign({container:!0,justify:"center",style:{display:n===r?"inherit":"none"}},a),p.a.createElement(O.a,{item:!0,md:11},p.a.createElement(y.a,null,t)))}xe.defaultProps={children:p.a.createElement("span")};var je=function(e){var t=e.slice,n=e.client,r=e.network,a=p.a.useState("0"),o=Object(te.a)(a,2),i=o[0],s=o[1],c=we(),u=[{tab:{label:"Redeem Script"},panel:p.a.createElement(ie.a,{multisig:t.multisig,showAddress:!1})},{tab:{label:"Confirm on Device"},panel:p.a.createElement("div",null,p.a.createElement(P.a,{variant:"h6"},"Verify Address with Quorum Participants"),p.a.createElement(P.a,{variant:"caption"},"(not all device variants supported)"),p.a.createElement(Te,{slice:t,network:r}))},{tab:{label:"UTXOs",disabled:!t.balanceSats.isGreaterThan(0)},panel:p.a.createElement(oe.a,{inputs:t.utxos,inputsTotalSats:t.balanceSats,showSelection:!1})},{tab:{label:"Watch Address",disabled:"private"!==n.type},panel:p.a.createElement("div",null,p.a.createElement(P.a,{variant:"h6"},"Import Watch-Only Address"),p.a.createElement(P.a,{variant:"caption"},"Address must be imported to get accurate balance data. If this address has previous history, a rescan may be required."),p.a.createElement(y.a,{my:3},p.a.createElement(se.a,{addresses:[t.multisig.address],client:n})))}];return p.a.createElement(O.a,{container:!0,className:c.root},p.a.createElement(ae.a,{position:"static",color:"default",variant:"outlined"},p.a.createElement(M.a,{value:i,onChange:function(e,t){return s(t)},"aria-label":"Slice Details View",centered:!0},u.map(Ie))),u.map((function(e,t){var n=e.panel;return p.a.createElement(xe,{value:i,index:t.toString(),key:t},p.a.createElement(y.a,{my:3},n))})))},Ce=Object($.a)((function(e){return{panel:{boxShadow:"inset 0px 0px 4px 1px ".concat(e.palette.grey[500])},spent:{textDecoration:"line-through"}}})),ke=function(e){var t=e.slices,n=e.search,r=e.paging,a=e.title,o=e.client,i=e.network,s=e.disabled,c=Ce(),u={search:n,paging:r,detailPanelType:"single",showTitle:a&&a.length||!1,emptyRowsWhenPaging:!1,pageSize:10,pageSizeOptions:[10,20,50]};u.toolbar=u.showTitle&&u.search;var l=[{title:"Path Suffix",field:"bip32Path",render:function(e){return p.a.createElement(P.a,null,e.bip32Path.replace("m","*"))},type:"string",defaultSort:"asc",customSort:ee.b},{title:"UTXOs",field:"utxos",width:"50px",render:function(e){return p.a.createElement(P.a,null,e.utxos.length)},customSort:ee.d},{title:"Balance",field:"balanceSats",render:function(e){return p.a.createElement(P.a,null,Object(f.satoshisToBitcoins)(e.balanceSats).toString())},customSort:ee.a},{title:"Last Used",field:"lastUsed",render:function(e){return p.a.createElement(P.a,null,e.lastUsed||"")},customSort:ee.c},{title:"Address",field:"address",sorting:!1,render:function(e){return p.a.createElement(Y.a,{text:e.multisig.address,showIcon:!0,showText:!0,code:!0,className:e.addressUsed&&e.balanceSats.isEqualTo(0)?c.spent:""})}}];return l=l.filter((function(e){return!s.includes(e.field)})),p.a.createElement(Q.a,{options:u,columns:l,data:t,detailPanel:[{tooltip:"Address Details",render:function(e){return p.a.createElement(y.a,{p:1,className:c.panel},p.a.createElement(je,{client:o,slice:e,network:i}))}}]})};ke.defaultProps={search:!1,paging:!1,title:"",disabled:[]};var Re,Ne=ke,Ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).getNextDepositAddress=function(){var e=a.state.depositIndex;a.setState({depositIndex:e+1}),setTimeout(a.getDepositAddress,0)},a.getDepositAddress=function(){var e=a.props,t=e.network,n=e.client,s=e.updateDepositSlice,c=e.depositableSlices,u=e.enqueueSnackbar,l=a.state.depositIndex;l<c.length&&a.setState({slice:c[l],address:c[l].multisig.address}),clearInterval(Re),Re=setInterval(Object(i.a)(o.a.mark((function e(){var i,c,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=a.state,l=c.address,d=c.slice,e.next=4,Object(j.b)(l,t,n);case 4:(i=e.sent)&&i.utxos&&i.utxos.length&&(clearInterval(Re),s(Object(r.a)(Object(r.a)({},i),{},{bip32Path:d.bip32Path})),u("Deposit received. A new address should now be available for deposit."),a.resetDepositAddressIndex(),setTimeout(a.getDepositAddress,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3)},a.handleAmountChange=function(e){var t=e.target.value,n="";t.length&&!t.match(/^[0-9.]+$/)&&(n="Amount must be numeric");var r=t.split(".");r.length>2?n="Amount must be numeric":2===r.length&&r[1].length>8&&(n="Amount must have maximum precision of 8 decimal places"),a.setState({amount:e.target.value,amountError:n})},a.qrString=function(){var e=a.state,t=e.address,n=e.amount;return"bitcoin:".concat(t).concat(n?"?amount=".concat(n):"")},a.resetDepositAddressIndex=function(){var e=a.props.depositableSlices;a.setState({slice:e[0],address:e[0].multisig.address,depositIndex:0})},a.state={address:"",amount:0,amountError:"",depositIndex:0,slice:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.getDepositAddress()}},{key:"componentWillUnmount",value:function(){clearInterval(Re)}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.network,r=e.depositableSlices,a=this.state,o=a.address,i=a.amount,s=a.amountError,c=a.depositIndex,u=a.slice;return p.a.createElement("div",null,p.a.createElement(b.a,null,p.a.createElement(g.a,null,p.a.createElement(O.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},p.a.createElement(O.a,{item:!0,md:6},p.a.createElement(Y.a,{text:o,newline:!0,showText:!1},p.a.createElement(G.a,{size:300,value:this.qrString(),level:"L"}))),p.a.createElement(O.a,{item:!0},p.a.createElement(P.a,{align:"center",variant:"subtitle1"},"Scan QR code or click to copy address to clipboard.")),p.a.createElement(O.a,{item:!0,md:6},p.a.createElement(y.a,{my:3},p.a.createElement(S.a,{fullWidth:!0,label:"Amount BTC",name:"depositAmount",onChange:this.handleAmountChange,value:i,error:""!==s,helperText:s,InputProps:{endAdornment:p.a.createElement(T.a,{position:"end"},p.a.createElement(J.a,{network:n}))}})))),u?p.a.createElement(Ne,{slices:[u],client:t,network:n,disabled:["lastUsed"]}):"",p.a.createElement(y.a,{mt:2},p.a.createElement(v.a,{variant:"contained",color:"primary",onClick:this.getNextDepositAddress,disabled:c>=r.length-1},"Next Address")))))}}]),n}(p.a.Component);var Ke,Be={updateDepositSlice:z.s,resetWalletView:z.p},_e=Object(m.b)((function(e){return Object(r.a)(Object(r.a)({},e.settings),{},{depositableSlices:Object(X.getDepositableSlices)(e),client:e.client})}),Be)(Object(V.withSnackbar)(Ae)),De=n(29),Me=n.n(De),Ue=n(208),Fe=n(1724),Le=n(35),ze=n(47),We=n(1718),He=n(1711),qe=n(581),Ge=n(1046),Ve=n(1045),Xe=n(544),Ye=n(1769),Je=n(1756),Ze=n(1755),Qe=n(1081),$e=n.n(Qe),et=n(1080),tt=n.n(et),nt=n(1079),rt=n.n(nt),at=n(138),ot=n.n(at),it=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).interaction=null,r.componentDidMount=function(){r.defaultMode()},r.addressContent=function(){var e=r.props,t=e.node,n=e.network,a=e.client,o=t.multisig,i=t.addressUsed,s=t.balanceSats,c=r.state,u=c.expandMode,l=c.showMenu,d=c.showMenuIcon;return p.a.createElement("div",{style:{width:"100%"}},p.a.createElement(P.a,null,p.a.createElement(Y.a,{text:o.address,showIcon:!0,showText:!1},p.a.createElement("code",{className:i&&s.isEqualTo(0)?ot.a.spent:""},o.address),"\xa0"),Object(Le.b)(Object(f.blockExplorerAddressURL)(o.address,n),p.a.createElement(rt.a,{onClick:function(e){return e.stopPropagation()}}))),p.a.createElement(tt.a,{onClick:r.handleMenu,style:{float:"right",display:d&&r.hasAdditionalOptions()?"block":"none"},"aria-controls":"address-menu","aria-haspopup":"true"}),p.a.createElement(Xe.a,{id:"address-menu",anchorEl:Ke,keepMounted:!0,open:l,onClose:r.handleClose},s.isGreaterThan(0)&&p.a.createElement(de.a,{selected:0===u,onClick:function(e){r.setState({expandMode:0}),r.handleClose(e)}},"UTXOs"),p.a.createElement(de.a,{selected:1===u,onClick:function(e){r.setState({expandMode:1}),r.handleClose(e)}},"Scripts"),r.canConfirm()&&p.a.createElement(de.a,{selected:2===u,onClick:function(e){r.setState({expandMode:2}),r.handleClose(e)}},"Confirm on Device"),"private"===a.type&&p.a.createElement(de.a,{selected:3===u,onClick:function(e){r.setState({expandMode:3}),r.handleClose(e)}},"Watch with bitcoind Node")))},r.canConfirm=function(){var e=r.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return"trezor"===e.method})).length>0},r.hasAdditionalOptions=function(){var e=r.props,t=e.client;return e.node.balanceSats.isGreaterThan(0)||"private"===t.type||r.canConfirm()},r.handleClose=function(e){e.stopPropagation(),r.setState({showMenu:!1})},r.handleMenu=function(e){e.stopPropagation(),Ke=e.target,r.setState({showMenu:!0})},r.panelExpand=function(e,t){r.setState({showMenuIcon:t})},r.render=function(){var e=r.props.node.bip32Path;return p.a.createElement(Ye.a,{onChange:r.panelExpand},p.a.createElement(Je.a,{expandIcon:p.a.createElement($e.a,null),"aria-controls":"panel1a-content",id:"address-header".concat(e)},r.addressContent()),p.a.createElement(Ze.a,null,p.a.createElement(O.a,{container:!0},r.expandContent())))},r.defaultMode=function(){var e=r.props.node.balanceSats;r.setState({expandMode:e.isGreaterThan(0)?0:1})},r.expandContent=function(){var e=r.props,t=e.client,n=e.node,a=e.setSpendCheckbox,o=n.utxos,i=n.balanceSats,s=n.multisig,c=n.bip32Path,u=n.spend,l=r.state.expandMode;switch("public"===t.type&&3===l&&r.defaultMode(),i.isEqualTo(0)&&0===l&&r.defaultMode(),l){case 0:return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(oe.a,{inputs:o,inputsTotalSats:i,multisig:s,bip32Path:c,hideSelectAllInHeader:!0,selectAll:u,node:n,setSpendCheckbox:a}));case 1:return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(ie.a,{multisig:s,showAddress:!1}));case 2:return r.renderAddressConfirmation();case 3:return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(se.a,{addresses:[s.address]}));default:return""}},r.renderAddressConfirmation=function(){var e=r.state,t=e.interactionState,n=e.interactionMessage,a=e.interactionError,o=e.hasInteraction;return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(ve,{number:0,onChange:r.keySelected}),o&&p.a.createElement(p.a.Fragment,null,r.confirmAddressDescription(),""!==n&&p.a.createElement(y.a,{mt:2,align:"center"},p.a.createElement(P.a,{variant:"h5",style:{color:"green"}},p.a.createElement(pe.a,null),"\xa0 ",n)),""!==a&&p.a.createElement(y.a,{mt:2,align:"center",style:{color:"red"}},p.a.createElement(P.a,{variant:"h5"},p.a.createElement(me.a,null),"\xa0 Confirmation Error"),p.a.createElement(P.a,{variant:"caption"},a)),""===n&&""===a&&p.a.createElement(ye.a,{messages:r.interaction.messagesFor({state:t})}),p.a.createElement(v.a,{variant:"contained",size:"large",onClick:r.confirmOnDevice,disabled:t===he.ACTIVE},"Confirm"),(""!==n||""!==a)&&p.a.createElement(v.a,{size:"large",onClick:r.resetInteractionState},"Reset")))},r.resetInteractionState=function(){r.setState({interactionError:"",interactionMessage:"",interactionState:he.PENDING})},r.confirmOnDevice=Object(i.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({interactionState:he.ACTIVE}),t=r.props.node,n=t.multisig,e.prev=3,e.next=6,r.interaction.run();case 6:(a=e.sent).address===n.address&&a.serializedPath===r.interaction.bip32Path?r.setState({interactionState:he.ACTIVE,interactionMessage:"Success",interactionError:""}):r.setState({interactionState:he.ACTIVE,interactionError:"An unknow error occured",interactionMessage:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r.setState({interactionState:he.ACTIVE,interactionError:e.t0.message,interactionMessage:""});case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),r.keySelected=function(e,t){var n=r.props,a=n.network,o=n.node,i=o.multisig,s=o.bip32Path;r.interaction=Object(he.ConfirmMultisigAddress)({keystore:t.method,network:a,bip32Path:"".concat(t.bip32Path).concat(s.slice(1)),multisig:i}),r.setState({hasInteraction:!0}),r.resetInteractionState()},r.state={expandMode:null,showMenu:!1,showMenuIcon:!1,hasInteraction:!1,interactionState:he.PENDING,interactionError:"",interactionMessage:""},r}return Object(c.a)(n,[{key:"confirmAddressDescription",value:function(){var e=this.props,t=e.network,n=e.node,r=e.requiredSigners,a=e.totalSigners,o=n.multisig,i=Object(f.multisigAddressType)(o);return p.a.createElement(y.a,null,p.a.createElement("p",null,"Confirm the following ",t," ",i," ",r,"-of-",a," multisig address on your device:"),p.a.createElement(k.a,null,p.a.createElement(K.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"Address:"),p.a.createElement(A.a,null,p.a.createElement("code",null,o.address))),p.a.createElement(N.a,null,p.a.createElement(A.a,null,"BIP32 Path:"),p.a.createElement(A.a,null,p.a.createElement("code",null,this.interaction.bip32Path))))))}}]),n}(p.a.Component);it.defaultProps={network:f.NETWORKS.TESTNET,setSpendCheckbox:function(){}};var st=Object(m.b)((function(e){return{network:e.settings.network,requiredSigners:e.settings.requiredSigners,totalSigners:e.settings.totalSigners,client:e.client,extendedPublicKeyImporters:e.quorum.extendedPublicKeyImporters,transaction:e.spend.transaction}}),{})(it),ct=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.generate()},a.setSpendCheckbox=function(e){a.props.spend;"indeterminate"===e?(a.setState({indeterminate:!0,checked:!1}),a.markSpending(!0)):(a.setState({indeterminate:!1,checked:e}),a.markSpending(e))},a.markSpending=function(e){var t=a.props,n=t.change,r=t.bip32Path;(0,t.updateNode)(n,{spend:e,bip32Path:r})},a.render=function(){var e=a.props,t=e.bip32Path,n=e.fetchedUTXOs,r=e.balanceSats,o=e.multisig,i=e.utxos,s=e.walletMode,c=e.addressKnown,u=a.state,l=u.indeterminate,d=u.checked,m=s===z.j.SPEND;return p.a.createElement(N.a,{key:t},m&&p.a.createElement(A.a,null,p.a.createElement(qe.a,{id:t,name:"spend",onChange:a.handleSpend,checked:d,disabled:!n||r.isEqualTo(0),indeterminate:l})),p.a.createElement(A.a,null,p.a.createElement("code",null,t.replace("m","*"))),p.a.createElement(A.a,null,i.length),p.a.createElement(A.a,null,n&&c?Object(f.satoshisToBitcoins)(r).toFixed():""),p.a.createElement(A.a,null,a.maxUtxoDate()),p.a.createElement(A.a,null,o?a.renderAddress():"..."))},a.maxUtxoDate=function(){var e=a.props.utxos;if(!e.length)return"";var t=Math.max.apply(Math,Object(ze.a)(e.map((function(e){return e.time}))));return Number.isNaN(t)?"Pending":new Date(1e3*t).toLocaleDateString()},a.renderAddress=function(){var e=a.props.braidNode;return p.a.createElement(st,{node:e,setSpendCheckbox:a.setSpendCheckbox})},a.generate=function(){var e=a.props,t=e.present,n=e.change,r=e.bip32Path,o=e.addNode;t||o(n,r)},a.handleSpend=function(e){var t,n=a.props,o=n.change,i=n.bip32Path,s=n.updateNode,c=n.inputs,u=n.utxos,l=n.multisig,d=n.setInputs,p=n.updateAutoSpend,m=n.setFeeRate,h=n.feeRate;e.target.getAttribute("data-indeterminate")?(t=(t=c.filter((function(e){return 0===u.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length}))).concat(u.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{multisig:l,bip32Path:i})}))),a.setState({indeterminate:!1,checked:!0})):t=e.target.checked?c.concat(u.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{multisig:l,bip32Path:i})}))):c.filter((function(e){return 0===u.filter((function(t){return t.txid===e.txid&&t.index===e.index})).length})),d(t),s(o,{spend:e.target.checked,bip32Path:i}),p(!1),m(h)},a.state={indeterminate:!1,checked:!1},a}return n}(p.a.Component);ct.defaultProps={multisig:{},present:!1};var ut={setInputs:W.N,setFeeRate:W.M,updateAutoSpend:W.X},lt=Object(m.b)((function(e,t){var n="1"===(t.bip32Path||"").split("/")[1],a=e.wallet[n?"change":"deposits"];return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e.settings),{change:n}),a.nodes[t.bip32Path]),e.spend.transaction),{},{walletMode:e.wallet.common.walletMode,braidNode:a.nodes[t.bip32Path]})}),ut)(ct),dt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).sortAddresses=function(e){var t=r.state,n=t.orderBy,a=t.orderDir;e===n?r.setState({page:0,orderDir:"asc"===a?"desc":"asc"}):r.setState({page:0,orderBy:e})},r.renderFilters=function(){var e=r.state,t=e.filterIncludeSpent,n=e.filterIncludeZeroBalance;return p.a.createElement(We.a,{row:!0},p.a.createElement(He.a,{component:"h2"},p.a.createElement(y.a,{mr:3},"Show Additional")),p.a.createElement(Ue.a,{control:p.a.createElement(qe.a,{checked:t,value:"filterIncludeSpent",onChange:r.filterAddresses}),label:"Spent Addresses"}),p.a.createElement(Ue.a,{control:p.a.createElement(qe.a,{checked:n,value:"filterIncludeZeroBalance",onChange:r.filterAddresses}),label:"Zero Balance"}))},r.filterAddresses=function(e,t){r.setState({[e.target.value]:t,page:0})},r.getNodeSet=function(){var e=r.props,t=e.changeNodes,n=e.depositNodes,a=r.state,o=a.filterIncludeSpent,i=a.filterIncludeZeroBalance,s=a.orderBy,c=a.orderDir,u=Object.values(n).concat(Object.values(t)).reduce((function(e,t){var n=e;return n[t.bip32Path]=t,n}),{}),l=[];return Object.values(u).forEach((function(e){(e.balanceSats.isGreaterThan(0)||i&&e.balanceSats.isEqualTo(0)&&!e.addressUsed||o&&e.addressUsed)&&l.push(e)})),l=(l=l.sort((function(e,t){var n="asc"===c?1:-1;if("bip32Path"===s)return e.change&&!t.change?n:!e.change&&t.change?-n:parseInt(e.bip32Path.split("/").reverse()[0],10)>parseInt(t.bip32Path.split("/").reverse()[0],10)?n:-n;if("balanceSats"===s)return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?n:-n;if("utxos"===s)return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?n:-n;if("time"===s){if(0===e.utxos.length)return 0===t.utxos.length?0:n;if(0===t.utxos.length)return 0===e.utxos.length?0:-n;var r=Math.min.apply(Math,Object(ze.a)(e.utxos.map((function(e){return e.time})))),a=Math.min.apply(Math,Object(ze.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(r)&&Number.Number.isNaN(a)?0:Number.isNaN(r)?n:Number.isNaN(a)?-n:r>a?n:-n}return 0}))).reduce((function(e,t){var n=e;return n[t.bip32Path]=t,n}),{})},r.renderNodes=function(){for(var e=r.state,t=e.page,n=e.nodesPerPage,a=e.select,o=r.props,i=o.addNode,s=o.updateNode,c=t*n,u=[],l=r.getNodeSet(),d=0;d<n;d+=1){var m=c+d;if(m>Object.keys(l).length-1)break;var h=Object.values(l)[m].bip32Path,f=Object.values(l)[m].change,b=p.a.createElement(lt,{key:h,bip32Path:h,addNode:i,updateNode:s,change:f,select:a});u.push(b)}return u},r.handlePageChange=function(e,t){var n=t;r.setState({page:n})},r.handleChangeRowsPerPage=function(e){r.setState({nodesPerPage:e.target.value,page:0})},r.pageCount=function(){var e=r.state.nodesPerPage;return Math.ceil(r.rowCount()/e)},r.rowCount=function(){var e=r.getNodeSet();return Object.keys(e).length},r.state={page:0,nodesPerPage:10,select:!1,filterIncludeSpent:!1,filterIncludeZeroBalance:!1,orderBy:"bip32Path",orderDir:"asc"},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.page,r=t.nodesPerPage,a=t.orderBy,o=t.orderDir,i=this.props.walletMode===z.j.SPEND;return p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(k.a,{style:{tableLayout:"fixed"}},p.a.createElement(R.a,null,p.a.createElement(N.a,null,i&&p.a.createElement(A.a,{width:62},"Select"),p.a.createElement(A.a,{width:106},p.a.createElement(Ge.a,{active:"bip32Path"===a,direction:o,onClick:function(){return e.sortAddresses("bip32Path")}},"BIP32 Path")),p.a.createElement(A.a,{width:78},p.a.createElement(Ge.a,{active:"utxos"===a,direction:o,onClick:function(){return e.sortAddresses("utxos")}},"UTXOs")),p.a.createElement(A.a,{width:82},p.a.createElement(Ge.a,{active:"balanceSats"===a,direction:o,onClick:function(){return e.sortAddresses("balanceSats")}},"Balance")),p.a.createElement(A.a,{width:98},p.a.createElement(Ge.a,{active:"time"===a,direction:o,onClick:function(){return e.sortAddresses("time")}},"Last Used")),p.a.createElement(A.a,null,"Address"))),p.a.createElement(K.a,null,this.renderNodes())),p.a.createElement(O.a,{container:!0},p.a.createElement(O.a,{item:!0,md:6},p.a.createElement(Ve.a,{component:"div",count:this.rowCount(),rowsPerPage:r,page:n,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage}))),!i&&this.renderFilters())}}]),n}(p.a.Component);var pt=Object(m.b)((function(e){return Object(r.a)({changeNodes:e.wallet.change.nodes,depositNodes:e.wallet.deposits.nodes,walletMode:e.wallet.common.walletMode,client:e.client},e.settings)}),{})(dt),mt=n(583),ht=n(574),ft=n(365),bt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).renderKeySelectors=function(){for(var e=r.props.requiredSigners,t=[],n=1;n<=e;n+=1)t.push(p.a.createElement(y.a,{key:n,mt:2},p.a.createElement(ve,{number:n})));return t},r.signaturesFinalized=function(){var e=r.props.signatureImporters;return Object.values(e).length>0&&Object.values(e).every((function(e){return e.finalized}))},r.handleReturn=function(){var e=r.props,t=e.resetTransaction,n=e.resetWalletView;t(),n()},r.handleCancel=function(e){var t=r.props,n=t.finalizeOutputs,a=t.requiredSigners,o=t.setRequiredSigners,i=t.setSpendStep;e.preventDefault(),o(a),n(!1),i(W.v)},r.render=function(){var e=r.state.spent;return p.a.createElement(y.a,null,p.a.createElement(v.a,{href:"#",onClick:r.handleCancel},"Edit Transaction"),p.a.createElement(y.a,{mt:2},p.a.createElement(ft.a,null)),r.renderKeySelectors(),p.a.createElement(y.a,{mt:2},p.a.createElement(v.a,{href:"#",onClick:function(e){e.preventDefault(),r.handleReturn()}},"Abandon Transaction")),r.signaturesFinalized()&&p.a.createElement(y.a,{mt:2},p.a.createElement(ht.a,null)),e&&p.a.createElement(y.a,{mt:2},p.a.createElement(v.a,{variant:"contained",color:"primary",onClick:r.handleReturn},"Return")))},r.state={spent:!1},r}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props.resetTransaction;this.state.spent&&e()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.txid,r=e.changeSlice,a=e.updateTxSlices;return n.length&&!t.spent?(a(r),{spent:!0}):null}}]),n}(p.a.Component);var Et={finalizeOutputs:W.D,setRequiredSigners:W.S,updateTxSlices:z.t,resetTransaction:W.F,resetWalletView:z.p,setSpendStep:W.U},gt=Object(m.b)((function(e){return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e.wallet),e.spend),e.quorum),{},{txid:e.spend.transaction.txid,requiredSigners:e.spend.transaction.requiredSigners,totalSigners:e.spend.transaction.totalSigners,changeSlice:e.wallet.change.nextNode})}),Et)(bt),vt=n(736),yt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderAddresses=function(){var t=e.mapAddresses();return Object.keys(t).map((function(e){return p.a.createElement(N.a,{key:e},p.a.createElement(A.a,null,p.a.createElement("code",null,e)),p.a.createElement(A.a,null,t[e].utxos.length),p.a.createElement(A.a,null,p.a.createElement("code",null,t[e].amount.toFixed(8))))}))},e.renderOutputAddresses=function(){var t=e.props,n=t.changeAddress;return t.outputs.map((function(e){return p.a.createElement(N.a,{key:e.address},p.a.createElement(A.a,null,p.a.createElement("code",null,e.address),e.address===n?p.a.createElement("small",null,"\xa0(change)"):""),p.a.createElement(A.a,null,p.a.createElement("code",null,Me()(e.amount).toFixed(8))))}))},e.renderOutputs=function(){return p.a.createElement(k.a,null,p.a.createElement(R.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"Address"),p.a.createElement(A.a,null,"Amount (BTC)"))),p.a.createElement(K.a,null,e.renderOutputAddresses()),p.a.createElement(vt.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"TOTAL:"),p.a.createElement(A.a,null,e.outputsTotal()))))},e.renderInputs=function(){var t=e.props.inputsTotalSats;return p.a.createElement(k.a,null,p.a.createElement(R.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,null,"Address"),p.a.createElement(A.a,null,"UTXO count"),p.a.createElement(A.a,null,"Amount (BTC)"))),p.a.createElement(K.a,null,e.renderAddresses()),p.a.createElement(vt.a,null,p.a.createElement(N.a,null,p.a.createElement(A.a,{colSpan:2},"TOTAL:"),p.a.createElement(A.a,null,Object(f.satoshisToBitcoins)(t).toString()))))},e.mapAddresses=function(){return e.props.inputs.reduce((function(e,t){var n=e,r=t.confirmed,a=t.txid,o=t.index,i=t.amount;return n[t.multisig.address]=e[t.multisig.address]||{amount:Me()(0),utxos:[]},n[t.multisig.address].utxos.push({confirmed:r,txid:a,index:o,amount:i}),n[t.multisig.address].amount=e[t.multisig.address].amount.plus(Me()(t.amount)),n}),{})},e.outputsTotal=function(){var t=e.props.outputs;return Object(f.satoshisToBitcoins)(t.reduce((function(e,t){return e.plus(Me()(t.amountSats||0))}),Me()(0))).toString()},e.render=function(){var t=e.props,n=t.feeRate,r=t.fee,a=t.inputsTotalSats,o=t.editTransaction,i=t.handleSignTransaction;return p.a.createElement(y.a,null,p.a.createElement("h2",null,"Transaction Preview"),p.a.createElement(ft.a,null),p.a.createElement("h3",null,"Inputs"),e.renderInputs(),p.a.createElement("h3",null,"Outputs"),e.renderOutputs(),p.a.createElement(O.a,{container:!0},p.a.createElement(O.a,{item:!0,xs:4},p.a.createElement("h3",null,"Fee"),p.a.createElement("div",null,Me()(r).toFixed(8)," BTC ")),p.a.createElement(O.a,{item:!0,xs:4},p.a.createElement("h3",null,"Fee Rate"),p.a.createElement("div",null,n," sats/byte")),p.a.createElement(O.a,{item:!0,xs:4},p.a.createElement("h3",null,"Total"),p.a.createElement("div",null,Object(f.satoshisToBitcoins)(Me()(a||0)).toFixed(8)," ","BTC"))),p.a.createElement(y.a,{mt:2},p.a.createElement(O.a,{container:!0,spacing:2},p.a.createElement(O.a,{item:!0},p.a.createElement(v.a,{variant:"contained",onClick:function(e){e.preventDefault(),o()}},"Edit Transaction")),p.a.createElement(O.a,{item:!0},p.a.createElement(v.a,{variant:"contained",color:"primary",onClick:i},"Sign Transaction")))))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.outputs,n=e.changeAddress,r=e.changeOutputIndex,a=e.changeNode,o=e.setChangeOutputMultisig;t.forEach((function(e){e.address===n&&o(r,a.multisig)}))}}]),n}(p.a.Component);var Pt={setChangeOutputMultisig:W.K},Ot=Object(m.b)((function(e){return{changeOutputIndex:e.spend.transaction.changeOutputIndex}}),Pt)(yt),St=(n(431),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).outputsAmount=new Me.a(0),e.coinSelection=Le.c,e.feeAmount=new Me.a(0),e.componentDidUpdate=function(t){e.props.finalizedOutputs&&!t.finalizedOutputs&&e.showPreview()},e.previewDisabled=function(){var t=e.props,n=t.finalizedOutputs,r=t.outputs,a=t.feeRateError,o=t.feeError,i=t.inputs,s=t.balanceError,c=t.autoSpend;if(0===i.length&&!c)return!0;if(n||a||o||s)return!0;for(var u=0;u<r.length;u+=1){var l=r[u];if(""===l.address||""===l.amount||""!==l.addressError||""!==l.amountError)return!0}return!1},e.showSignTransaction=function(){(0,e.props.setSpendStep)(W.x)},e.handleShowPreview=function(){var t=e.props,n=t.autoSelectCoins,r=t.autoSpend,a=t.finalizeOutputs;r?n():a(!0)},e.showPreview=function(){(0,e.props.setSpendStep)(W.w)},e.showCreate=function(){var t=e.props,n=t.finalizeOutputs,r=t.setSpendStep,a=t.resetNodesSpend,o=t.deleteChangeOutput;r(W.v),n(!1),a(),o()},e.handleSpendMode=function(t){var n=e.props,r=n.updateAutoSpend,a=n.resetNodesSpend,o=n.deleteChangeOutput;r(!t.target.checked),a(),o()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.autoSpend,r=t.changeAddress,a=t.changeNode,o=t.updateNode,i=t.addNode,s=t.spendingStep,c=t.fee,u=t.feeRate,l=t.inputs,d=t.inputsTotalSats,m=t.outputs;return p.a.createElement(b.a,null,p.a.createElement(g.a,null,p.a.createElement(O.a,{container:!0},s===W.x&&p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(y.a,null,p.a.createElement(gt,null))),s===W.v&&p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(O.a,{container:!0,direction:"row-reverse"},p.a.createElement(y.a,{display:"flex-end"},p.a.createElement(y.a,{p:1},p.a.createElement(Ue.a,{control:p.a.createElement(Fe.a,{checked:!n,onChange:this.handleSpendMode}),label:"Manual"})))),p.a.createElement(y.a,{component:"div",display:n?"none":"block"},p.a.createElement(pt,{addNode:i,updateNode:o})),p.a.createElement(mt.a,null),p.a.createElement(y.a,{mt:2},p.a.createElement(v.a,{onClick:this.handleShowPreview,variant:"contained",color:"primary",disabled:this.previewDisabled()},"Preview Transaction"))),s===W.w&&p.a.createElement(O.a,{item:!0,md:12},p.a.createElement(y.a,{mt:3},p.a.createElement(Ot,{changeAddress:r,changeNode:a,editTransaction:this.showCreate,fee:c,feeRate:u,inputs:l,inputsTotalSats:d,outputs:m,handleSignTransaction:function(){return e.showSignTransaction()}}))))))}}]),n}(p.a.Component));St.defaultProps={autoSpend:!1,balanceError:null,changeNodes:{},depositNodes:{},finalizedOutputs:!1,feeError:null,feeRateError:null,spendingStep:0};var Tt={autoSelectCoins:z.k,deleteChangeOutput:W.B,updateAutoSpend:W.X,setInputs:W.N,updateChangeSlice:z.r,updateDepositSlice:z.s,setAddress:W.Q,resetNodesSpend:z.n,setFeeRate:W.M,addOutput:W.z,finalizeOutputs:W.D,setChangeAddress:W.H,setSpendStep:W.U},wt=Object(m.b)((function(e){return Object(r.a)(Object(r.a)({},e.spend.transaction),{},{changeNodes:e.wallet.change.nodes,changeNode:e.wallet.change.nextNode,depositNodes:e.wallet.deposits.nodes,autoSpend:e.spend.transaction.autoSpend})}),Tt)(St),It=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).filterAddresses=function(e,t){r.setState({[e.target.value]:t},(function(){return r.setDisplaySlices()}))},r.state={filterIncludeSpent:!1,filterIncludeZeroBalance:!1,displaySlices:e.slicesWithBalance.length?Object(ze.a)(e.slicesWithBalance):[]},r}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.slicesWithBalance;e.slicesWithBalance.length!==t.length&&this.setDisplaySlices()}},{key:"setDisplaySlices",value:function(){var e=this.props,t=e.slicesWithBalance,n=e.zeroBalanceSlices,r=e.spentSlices,a=this.state,o=a.filterIncludeSpent,i=a.filterIncludeZeroBalance,s=Object(ze.a)(t);o&&s.push.apply(s,Object(ze.a)(r)),i&&s.push.apply(s,Object(ze.a)(n)),this.setState({displaySlices:s})}},{key:"render",value:function(){var e=this.state,t=e.filterIncludeSpent,n=e.filterIncludeZeroBalance,r=e.displaySlices,a=this.props,o=a.client,i=a.network;return p.a.createElement(b.a,null,p.a.createElement(g.a,null,p.a.createElement(O.a,{container:!0,direction:"column"},p.a.createElement(O.a,{item:!0},p.a.createElement(Ne,{slices:r,client:o,network:i,paging:!0})),p.a.createElement(O.a,{item:!0},p.a.createElement(We.a,{row:!0},p.a.createElement(He.a,{component:"h2"},p.a.createElement(y.a,{mr:3},"Show Additional")),p.a.createElement(Ue.a,{control:p.a.createElement(qe.a,{checked:t,value:"filterIncludeSpent",onChange:this.filterAddresses}),label:"Spent Addresses"}),p.a.createElement(Ue.a,{control:p.a.createElement(qe.a,{checked:n,value:"filterIncludeZeroBalance",onChange:this.filterAddresses}),label:"Zero Balance"}))))))}}]),n}(p.a.PureComponent);var xt=Object(m.b)((function(e){return{slicesWithBalance:Object(X.getSlicesWithBalance)(e),zeroBalanceSlices:Object(X.getZeroBalanceSlices)(e),spentSlices:Object(X.getSpentSlices)(e),walletMode:e.wallet.common.walletMode,client:e.client,network:e.settings.network}}))(It),jt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).scrollRef=p.a.createRef(),e.componentDidMount=function(){e.scrollRef.current.scrollIntoView({behavior:"smooth"})},e.render=function(){var t=e.props.walletMode;return p.a.createElement("div",null,p.a.createElement(M.a,{ref:e.scrollRef,value:t,onChange:e.handleModeChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},e.addressesAreLoaded()&&[p.a.createElement(U.a,{label:"Addresses",value:z.j.VIEW,key:0}),p.a.createElement(U.a,{label:"Receive",value:z.j.DEPOSIT,key:1}),p.a.createElement(U.a,{label:"Send",value:z.j.SPEND,key:2})]),p.a.createElement(y.a,{mt:2},e.renderModeComponent()))},e.renderModeComponent=function(){var t=e.props,n=t.walletMode,r=t.addNode,a=t.updateNode;if(e.addressesAreLoaded()){if(n===z.j.DEPOSIT)return p.a.createElement(_e,null);if(n===z.j.SPEND)return p.a.createElement(wt,{addNode:r,updateNode:a});if(n===z.j.VIEW)return p.a.createElement(xt,null)}var o=e.progress();return[p.a.createElement("div",{style:{textAlign:"center",marginBottom:"5em"},key:0},p.a.createElement(F.a,{variant:"indeterminate"})),p.a.createElement(L.a,{variant:"determinate",value:o,key:1})]},e.progress=function(){var t=e.props,n=t.change;return 100*(t.deposits.trailingEmptyNodes+n.trailingEmptyNodes)/(2*H.c)},e.addressesAreLoaded=function(){var t=e.props,n=t.change,r=t.deposits;return!!t.nodesLoaded||(r.trailingEmptyNodes>=H.c||r.fetchUTXOsErrors>=H.b)&&(n.trailingEmptyNodes>=H.c||n.fetchUTXOsErrors>=H.b)},e.handleModeChange=function(t,n){var r=e.props,a=r.setMode,o=r.requiredSigners,i=r.setRequiredSigners,s=r.signatureImporters;n===z.j.SPEND&&Object.keys(s).length!==o&&i(o),a(n)},e}return n}(p.a.Component);var Ct={setMode:z.q,setRequiredSigners:W.S},kt=Object(m.b)((function(e){return Object(r.a)(Object(r.a)(Object(r.a)({},e.wallet),e.wallet.common),{},{requiredSigners:e.spend.transaction.requiredSigners,signatureImporters:e.spend.signatureImporters})}),Ct)(jt),Rt=n(1084),Nt=n(38),At=n(558),Kt=n(60),Bt=n(135),_t=n(67),Dt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).title=function(){var e=a.props,t=e.totalSigners,n=e.requiredSigners,r=e.addressType;return p.a.createElement("span",{className:"justify-content-between d-flex"},"Your ",n,"-of-",t," ",r," Multisig Wallet",p.a.createElement("small",{className:"text-muted"}," Extended Public Keys: ".concat(a.extendedPublicKeyCount(),"/").concat(t)))},a.testConnection=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.network,i=t.client,s=t.setPasswordError,e.prev=1,e.next=4,Object(j.c)(r,i);case 4:s(""),a.setState({connectSuccess:!0},(function(){n&&setTimeout(n,750)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({connectSuccess:!1}),e.t0.response&&401===e.t0.response.status?s("Unauthorized: Incorrect username and password combination"):s(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),a.extendedPublicKeyCount=function(){var e=a.props.extendedPublicKeyImporters;return Object.values(e).filter((function(e){return e.finalized})).length},a.toggleImporters=function(e,t){e.preventDefault();var n=a.props,r=n.setImportersVisible,o=n.configuring,i=n.resetWallet,s=n.initialLoadComplete,c=n.setGenerating;o||(c(!1),t&&i(),t||s()),r(!o)},a.generate=function(){var e=a.props,t=e.setImportersVisible,n=e.freeze,r=e.setGenerating,o=e.startingAddressIndex,i="m/0/".concat(o),s="m/1/".concat(o);n(!0),t(!1),r(!0),a.setState({connectSuccess:!1},(function(){a.addNode(!1,i,!0),a.addNode(!0,s,!0)}))},a.updateNode=function(e,t){var n=a.props,r=n.updateChangeSlice,o=n.updateDepositSlice;(e?r:o)(t)},a.addNode=function(){var e=Object(i.a)(o.a.mark((function e(t,n,i){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.generateMultisig(t,n,i);case 2:s=e.sent,a.updateNode(t,Object(r.a)({bip32Path:n},s));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a.generateMultisig=function(){var e=Object(i.a)(o.a.mark((function e(t,n,i){var s,c,u,l,d,p,m,h,b,E;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.props,c=s.extendedPublicKeyImporters,u=s.network,l=s.addressType,d=s.requiredSigners,p=a.generateRichExtendedPublicKeys(c),m=t?"1":"0",h=Object(f.generateBraid)(u,l,p,d,m),b=Object(f.deriveMultisigByPath)(h,n),e.next=7,a.fetchUTXOs(t,b,i);case 7:return E=e.sent,e.abrupt("return",Object(r.a)({multisig:b},E));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a.fetchUTXOs=function(){var e=Object(i.a)(o.a.mark((function e(t,n,i){var s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.props,c=s.network,u=s.client,e.next=3,Object(j.b)(n.address,c,u);case 3:if(!(d=e.sent)||d.fetchUTXOsError.length){e.next=8;break}return e.next=7,Object(j.d)(n.address,c,u);case 7:l=e.sent;case 8:return l&&(d=Object(r.a)(Object(r.a)({},d),{},{addressUsed:l.used})),i&&setTimeout((function(){return a.generateNextNodeIfNecessary(t)})),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a.generateNextNodeIfNecessary=function(e){var t=a.props,n=t.change,r=t.deposits,o=t.initialLoadComplete,i=(e?n:r).trailingEmptyNodes,s=(e?n:r).fetchUTXOsErrors,c=Object.keys((e?n:r).nodes);if(i>=H.c||s>=H.b)o();else{c.sort((function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2],10)-parseInt(r[2],10)}));var u=(c[c.length-1]||"").split("/"),l=parseInt(u[2],10),d="m/".concat(u[1],"/").concat(l+1);setTimeout((function(){return a.addNode(e,d,!0)}))}},a.refreshNodes=Object(i.a)(o.a.mark((function e(){var t,n,s,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.change,s=t.deposits,c=t.resetNodesFetchErrors,u=Object.values(s.nodes).concat(Object.values(n.nodes)),l=Math.max(n.fetchUTXOsErrors,s.fetchUTXOsErrors),c(),e.next=6,Promise.all(u.map(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchUTXOs(t.change,t.multisig);case 2:n=e.sent,a.updateNode(t.change,Object(r.a)({bip32Path:t.bip32Path},n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:l>=H.b&&Math.max(n.fetchUTXOsErrors,s.fetchUTXOsErrors)<5&&console.log("we had errors but now looks good, try to build more");case 7:case"end":return e.stop()}}),e)}))),a.state={connectSuccess:!1,unknownClient:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.refreshNodes,r=t.common.nodesLoaded,a=t.setGenerating;this.debouncedTestConnection=Object(h.debounce)((function(t){return e.testConnection(t)}),500,{trailing:!0,leading:!1}),n(this.refreshNodes),r&&a(!0)}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,i,s,c,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.client.password,r=this.props,a=r.setPasswordError,i=r.network,s=r.client,c=r.common.nodesLoaded,u=r.setIsWallet,l=r.configuring,d=this.state.unknownClient,"unknown"===s.type&&"public"===t.client.type?this.setState({unknownClient:!0}):l&&"unknown"!==s.type&&d&&this.setState({unknownClient:!1}),n!==s.password&&s.password.length&&this.debouncedTestConnection({network:i,client:s,setPasswordError:a}),!t.common.nodesLoaded&&c&&u();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateRichExtendedPublicKeys",value:function(e){return Object.values(e).map((function(e){var t=f.ExtendedPublicKey.fromBase58(e.extendedPublicKey);return t.setRootFingerprint(e.rootXfp&&!e.rootXfp.toLowerCase().includes("unknown")?e.rootXfp:"00000000"),t.setBip32Path(e.bip32Path&&!e.bip32Path.toLowerCase().includes("unknown")?e.bip32Path:"m".concat("/0".repeat(t.depth))),t.addBase58String(),t}))}},{key:"handlePasswordEnter",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.debouncedTestConnection.cancel(),e.next=4,this.testConnection(this.props,this.generate);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordChange",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.props,r=n.setPassword,a=n.setPasswordError,i=t.target.value,this.setState({connectSuccess:!1},(function(){r(i),a("")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"body",value:function(){var e=this,t=this.props,n=t.totalSigners,r=t.configuring,a=t.downloadWalletDetails,o=t.client,i=t.generating,s=t.walletDetailsText,c=t.KeystoneWalletVerifyCode,u=t.shouldShowWalletDetailURs,l=t.extendedPublicKeyImporters,d=this.state,m=d.connectSuccess,h=d.unknownClient,f=Object.values(l).some((function(e){return e.conflict}));return this.extendedPublicKeyCount()===n?i&&!r?p.a.createElement(kt,{addNode:this.addNode,updateNode:this.updateNode}):f?p.a.createElement("p",null,"You must correct the conflict before the wallet can be generated."):p.a.createElement(b.a,null,p.a.createElement(E.a,{title:this.title()}),p.a.createElement(g.a,null,p.a.createElement(v.a,{href:"#",onClick:function(t){return e.toggleImporters(t,!1)}},r?"Hide Key Selection":"Edit Details"),p.a.createElement(D,null),p.a.createElement("p",null,"You have imported all\xa0",n," extended public keys. You will need to save this information."),p.a.createElement(Rt.a,{onClearFn:function(t){return e.toggleImporters(t,!0)},onDownloadFn:a,KeystoneWalletVerifyCode:c,walletDetailsText:s,shouldRenderURButton:u}),h&&p.a.createElement(y.a,{my:5},p.a.createElement(P.a,{variant:"subtitle1"},"This config does not contain client information. Please choose a client to connect to before importing your wallet."),p.a.createElement(C.a,{onSuccess:function(){return e.setState({connectSuccess:!0})}})),"private"===o.type&&!h&&p.a.createElement(y.a,{my:5},p.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},p.a.createElement(O.a,{item:!0,xs:12},p.a.createElement(P.a,{variant:"subtitle1"},"This config uses a private client. Please enter password if not set.")),p.a.createElement(O.a,{item:!0},p.a.createElement(S.a,{id:"client-username",label:"Username",defaultValue:o.username,InputProps:{readOnly:!0,disabled:!0,startAdornment:p.a.createElement(T.a,{position:"start"},p.a.createElement(x.a,null))}})),p.a.createElement(O.a,{item:!0,md:4,xs:10},p.a.createElement("form",{onSubmit:function(t){return e.handlePasswordEnter(t)}},p.a.createElement(S.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",placeholder:"Enter bitcoind password",value:o.password,onChange:function(t){return e.handlePasswordChange(t)},error:o.passwordError.length>0,helperText:o.passwordError}),m&&p.a.createElement(w.a,null,"Connection confirmed with password!"))))),p.a.createElement("p",null,"Please confirm that the above information is correct and you wish to generate your wallet."),p.a.createElement(v.a,{id:"confirm-wallet",type:"button",variant:"contained",color:"primary",onClick:this.generate,disabled:"public"!==o.type&&!m},"Confirm"))):p.a.createElement("p",null,"Once you have imported all ".concat(n," extended public keys, "),"your wallet will be generated here.",f&&" You will not be able to continue until you address the conflict.")}},{key:"render",value:function(){return p.a.createElement("div",null,this.body())}}]),n}(p.a.Component);var Mt=Object(r.a)(Object(r.a)({freeze:Nt.h,updateDepositSlice:z.s,updateChangeSlice:z.r,fetchSliceData:At.a,setImportersVisible:Kt.p,setIsWallet:W.O,resetWallet:z.o,resetNodesFetchErrors:z.m},Object(Bt.a)({setPassword:_t.a,setPasswordError:_t.b})),{},{initialLoadComplete:z.l});t.a=Object(m.b)((function(e){return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e.settings),{client:e.client}),e.quorum),e.wallet),e.wallet.common)}),Mt)(Dt)},1094:function(e,t,n){"use strict";var r=n(2),a=n(11),o=n(18),i=n(14),s=n(13),c=n(0),u=n.n(c),l=n(20),d=n(5),p=n(7),m=n(370),h=n(731),f=n(738),b=n(1026),E=n(51),g=n(126),v=n(96),y=n(307),P=n(376),O=n(308),S=n(9),T=n(48),w=n(10),I=n.n(w),x=n(16),j=n(26),C=n(441),k=n(66),R=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.resetBIP32Path()},r.interaction=function(){var e=r.props,t=e.network,n=e.extendedPublicKeyImporter;return Object(p.ExportExtendedPublicKey)({network:t,keystore:n.method,bip32Path:n.bip32Path,includeXFP:!0})},r.render=function(){var e=r.props.extendedPublicKeyImporter,t=r.state,n=t.status,a=t.extendedPublicKeyError,o=r.interaction();return n===p.UNSUPPORTED?u.a.createElement(g.a,{className:"text-danger"},o.messageTextFor({status:n})):u.a.createElement(E.a,{mt:2},u.a.createElement(j.a,{container:!0},u.a.createElement(j.a,{item:!0,md:6},u.a.createElement(C.a,{fullWidth:!0,label:"BIP32 Path",value:e.bip32Path,onChange:r.handleBIP32PathChange,disabled:n!==p.PENDING,error:r.hasBIP32PathError(),helperText:r.bip32PathError()})),u.a.createElement(j.a,{item:!0,md:6},!r.bip32PathIsDefault()&&u.a.createElement(v.a,{type:"button",variant:"contained",size:"small",onClick:r.resetBIP32Path,disabled:n!==p.PENDING},"Default"))),u.a.createElement(g.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),u.a.createElement(E.a,{mt:2},u.a.createElement(v.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:r.import,disabled:r.hasBIP32PathError()||n===p.ACTIVE},"Import Extended Public Key")),u.a.createElement(k.a,{messages:o.messagesFor({state:n})}),u.a.createElement(g.a,{error:!0},a))},r.import=Object(x.a)(I.a.mark((function e(){var t,n,a,o,i,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.validateAndSetExtendedPublicKey,a=t.validateAndSetRootFingerprint,o=t.enableChangeMethod,(0,t.disableChangeMethod)(),r.setState({extendedPublicKeyError:"",status:p.ACTIVE}),e.prev=3,e.next=6,r.interaction().run();case 6:i=e.sent,s=i.xpub,a(i.rootFingerprint,(function(e){r.setState({extendedPublicKeyError:e,status:p.PENDING})})),n(s,(function(e){r.setState({extendedPublicKeyError:e,status:p.PENDING})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),r.setState({extendedPublicKeyError:e.t0.message,status:p.PENDING});case 16:o();case 17:case"end":return e.stop()}}),e,null,[[3,12]])}))),r.hasBIP32PathError=function(){var e=r.state.status;return r.interaction().hasMessagesFor({state:e,level:p.ERROR,code:"bip32"})},r.bip32PathError=function(){var e=r.state.status;return r.interaction().messageTextFor({state:e,level:p.ERROR,code:"bip32"})},r.handleBIP32PathChange=function(e){(0,r.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},r.bip32PathIsDefault=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},r.resetBIP32Path=function(){(0,r.props.resetBIP32Path)()},r.state={extendedPublicKeyError:"",status:r.interaction().isSupported()?p.PENDING:p.UNSUPPORTED},r}return n}(u.a.Component),N=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.props.extendedPublicKeyImporter,t=r.state.error;return u.a.createElement(E.a,{mt:2},u.a.createElement(C.a,{fullWidth:!0,name:"publicKey",label:"Extended Public Key",value:e.extendedPublicKey,onChange:r.handleChange,error:r.hasError(),helperText:t}))},r.hasError=function(){return""!==r.state.error},r.setError=function(e){r.setState({error:e})},r.handleChange=function(e){(0,r.props.validateAndSetExtendedPublicKey)(e.target.value,r.setError)},r.state={error:""},r}return n}(u.a.Component),A=n(255),K=n(302),B=n(60),_=n(1718),D=n(258),M=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).interaction=function(){var e=r.props,t=e.network,n=e.extendedPublicKeyImporter;return new p.ExportExtendedPublicKey({keystore:n.method,bip32Path:n.bip32Path,network:t,includeXFP:!0})},r.render=function(){var e=r.props,t=e.Reader,n=e.disableChangeMethod,a=e.resetBIP32Path,o=e.extendedPublicKeyImporter,i=r.state,s=i.status,c=i.extendedPublicKeyError;return u.a.createElement(_.a,null,u.a.createElement(t,{setError:r.setError,hasError:r.hasBIP32PathError(),errorMessage:r.bip32PathError(),bip32PathIsDefault:r.bip32PathIsDefault,handleBIP32PathChange:r.handleBIP32PathChange,resetBIP32Path:a,onReceive:r.onReceive,interaction:r.interaction(),disableChangeMethod:n,extendedPublicKeyImporter:o}),u.a.createElement(k.a,{messages:r.interaction().messagesFor({state:s}),excludeCodes:["bip32"]}),u.a.createElement(g.a,{error:!0},c))},r.hasBIP32PathError=function(){var e=r.state.status;return r.interaction().hasMessagesFor({state:e,level:p.ERROR,code:"bip32"})},r.bip32PathError=function(){var e=r.state.status;return r.interaction().messageTextFor({state:e,level:p.ERROR,code:"bip32"})},r.handleBIP32PathChange=function(e){(0,r.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(){}))},r.bip32PathIsDefault=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.defaultBIP32Path;return t.bip32Path===n},r.resetBIP32Path=function(){(0,r.props.resetBIP32Path)()},r.setError=function(e){r.setState({extendedPublicKeyError:e})},r.onReceive=function(e){var t=r.props,n=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey,o=t.validateAndSetRootFingerprint,i=t.enableChangeMethod;i&&i();try{var s=r.interaction().parse(e),c=s.xpub,u=s.bip32Path;o(s.rootFingerprint,r.setError),n(u,(function(){a(c,r.setError)}),r.setError)}catch(l){r.setError(l.message)}},r.state={status:r.interaction().isSupported()?p.PENDING:p.UNSUPPORTED,extendedPublicKeyError:""},r}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){this.state.status!==p.PENDING&&this.interaction().isSupported()&&this.setState({status:p.PENDING})}}]),n}(u.a.Component);M.defaultProps={enableChangeMethod:null,disableChangeMethod:null};var U=M,F=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.validateAndSetBIP32Path,a=r.state.COLDCARD_MULTISIG_BIP32_PATH;t.method===p.COLDCARD&&n(a,(function(){}),(function(){}),{})},r.getColdcardBip32Path=function(){var e=r.props,t=e.network,n=e.addressType,a=e.defaultBIP32Path,o=t===d.MAINNET?"0":"1",i="m/45'/".concat(o,"/0");return n===d.P2SH?i:a},r.render=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.validateAndSetExtendedPublicKey,a=e.validateAndSetBIP32Path,o=e.validateAndSetRootFingerprint,i=e.addressType,s=e.network,c=r.state,l=c.extendedPublicKeyError,d=c.COLDCARD_MULTISIG_BIP32_PATH;return u.a.createElement(_.a,null,u.a.createElement(U,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:n,validateAndSetBIP32Path:a,validateAndSetRootFingerprint:o,addressType:i,network:s,resetBIP32Path:r.resetColdcardBIP32Path,defaultBIP32Path:d,Reader:D.a}),u.a.createElement(g.a,{error:!0},l))},r.resetColdcardBIP32Path=function(){(0,r.props.validateAndSetBIP32Path)(r.state.COLDCARD_MULTISIG_BIP32_PATH,(function(){}),(function(){}))};var o=r.getColdcardBip32Path();return r.state={COLDCARD_MULTISIG_BIP32_PATH:o},r}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.validateAndSetBIP32Path,r=t.network,a=t.addressType,o=this.getColdcardBip32Path();e.network===r&&e.addressType===a||(this.setState({COLDCARD_MULTISIG_BIP32_PATH:o}),n(o,(function(){}),(function(){})))}}]),n}(u.a.Component),L=n(253),z=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){(0,r.props.resetBIP32Path)()},r.interaction=function(){var e=r.props,t=e.network,n=e.extendedPublicKeyImporter;return new p.HermitExportExtendedPublicKey({network:t,bip32Path:n.bip32Path})},r.render=function(){var e=r.props.disableChangeMethod,t=r.state.extendedPublicKeyError;return u.a.createElement(_.a,null,u.a.createElement(L.a,{startText:"Import Extended Public Key",interaction:r.interaction(),onStart:e,onSuccess:r.import,onClear:r.onClear}),u.a.createElement(g.a,{className:"text-danger"},t))},r.setError=function(e){r.setState({extendedPublicKeyError:e})},r.import=function(e){var t=r.props,n=t.validateAndSetBIP32Path,a=t.validateAndSetExtendedPublicKey;(0,t.enableChangeMethod)();var o=e.xpub;n(e.bip32Path,(function(){a(o,r.setError)}),r.setError)},r.onClear=function(){var e=r.props,t=e.reset,n=e.enableChangeMethod;t(!0),r.setError(""),n()},r.state={extendedPublicKeyError:""},r}return n}(u.a.Component),W=n(43),H=n(237),q=function(e){var t=e.resetBIP32Path,n=e.network,r=e.extendedPublicKeyImporter,a=e.disableChangeMethod,o=e.validateAndSetBIP32Path,i=e.validateAndSetExtendedPublicKey,s=e.enableChangeMethod,l=e.validateAndSetRootFingerprint,d=e.reset,m=Object(c.useState)(""),h=Object(W.a)(m,2),f=h[0],b=h[1];Object(c.useEffect)((function(){t()}),[t]);return u.a.createElement(_.a,null,u.a.createElement(H.b,{qrStartText:"Import Extended Public Key",fileStartText:"Upload Extended Public Key",interaction:new p.KeystoneExportExtendedPublicKey({network:n,bip32Path:r.bip32Path}),onStart:a,onSuccess:function(e){s();var t=e.xpub,n=e.bip32Path,r=e.rootFingerprint;o(n,(function(){i(t,b,(function(){l(r)}))}),b)},onClear:function(){d(!0),b(""),s()},shouldShowFileReader:!0,fileType:"json"}),u.a.createElement(g.a,{className:"text-danger"},f))},G=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).title=function(){var e=r.props,t=e.number,n=e.extendedPublicKeyImporter,a=e.setName;return u.a.createElement(A.a,{number:t,name:n.name,setName:a})},r.renderImport=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.number,a=r.state.disableChangeMethod,o="xpub-".concat(n,"-importer-select-label");return u.a.createElement("div",null,u.a.createElement(m.a,{fullWidth:!0},u.a.createElement(h.a,{id:o},"Select Method"),u.a.createElement(f.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:a,value:t.method,onChange:r.handleMethodChange},u.a.createElement(b.a,{value:"unknown"},"< Select method >"),u.a.createElement(b.a,{value:p.KEYSTONE},"Keystone"),u.a.createElement(b.a,{value:p.TREZOR},"Trezor"),u.a.createElement(b.a,{value:p.COLDCARD},"Coldcard"),u.a.createElement(b.a,{value:p.LEDGER},"Ledger"),u.a.createElement(b.a,{value:p.HERMIT},"Hermit"),u.a.createElement(b.a,{value:"text"},"Enter as text"))),r.renderImportByMethod())},r.renderImportByMethod=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.network,a=e.addressType,o=e.defaultBIP32Path,i=t.method;return i===p.TREZOR||i===p.LEDGER?u.a.createElement(R,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:r.validateAndSetBIP32Path,validateAndSetRootFingerprint:r.validateAndSetRootFingerprint,resetBIP32Path:r.resetBIP32Path,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,addressType:a,defaultBIP32Path:o,network:n}):i===p.HERMIT?u.a.createElement(z,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:r.validateAndSetBIP32Path,validateAndSetRootFingerprint:r.validateAndSetRootFingerprint,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,addressType:a,defaultBIP32Path:o,network:n,resetBIP32Path:r.resetBIP32Path,reset:r.reset}):i===p.KEYSTONE?u.a.createElement(q,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:r.validateAndSetBIP32Path,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,resetBIP32Path:r.resetBIP32Path,validateAndSetRootFingerprint:r.validateAndSetRootFingerprint,reset:r.reset,network:n}):i===p.COLDCARD?u.a.createElement(F,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r.validateAndSetExtendedPublicKey,validateAndSetBIP32Path:r.validateAndSetBIP32Path,validateAndSetRootFingerprint:r.validateAndSetRootFingerprint,addressType:a,defaultBIP32Path:o,network:n}):"text"===i?u.a.createElement(N,{extendedPublicKeyImporter:t,validateAndSetExtendedPublicKey:r.validateAndSetExtendedPublicKey}):null},r.handleMethodChange=function(e){var t=r.props,n=t.number,a=t.setMethod,o=t.setExtendedPublicKey;a(n,e.target.value),o(n,"")},r.disableChangeMethod=function(){r.setState({disableChangeMethod:!0})},r.enableChangeMethod=function(){r.setState({disableChangeMethod:!1})},r.finalize=function(){var e=r.props,t=e.number;(0,e.setFinalized)(t,!0)},r.reset=function(e){var t=r.props,n=t.number,a=t.setExtendedPublicKey,o=t.setFinalized;a(n,""),o(n,!1),e&&r.resetBIP32Path()},r.renderBIP32Path=function(){var e=r.props.extendedPublicKeyImporter;return"text"===e.method?u.a.createElement("div",{className:"mt-4"},u.a.createElement("p",null,"Make sure you ",u.a.createElement("strong",null,"record the corresponding BIP32 path."))):u.a.createElement("div",{className:"mt-4"},u.a.createElement("p",null,"The BIP32 path for this extended public key is:"),u.a.createElement("div",{className:"text-center"},u.a.createElement(T.a,{text:e.bip32Path,showIcon:!0})),u.a.createElement("p",{className:"mt-4"},"You will need this BIP32 path to sign for this key later."," ",u.a.createElement("strong",null,"Write down this BIP32 path!")))},r.validateAndSetBIP32Path=function(e,t,n,a){var o=r.props,i=o.number,s=o.setBIP32Path,c=Object(d.validateBIP32Path)(e,a);s(i,e),c?n(c):(n(""),t())},r.resetBIP32Path=function(){var e=r.props,t=e.number;(0,e.resetBIP32Path)(t)},r.renderExtendedPublicKey=function(){var e=r.props,t=e.extendedPublicKeyImporter,n=e.network,a=e.classes,o=r.state.conversionMessage,i=t.method===p.HERMIT&&n===d.NETWORKS.TESTNET?"this should not be an issue as hermit signing is not affected by the conversion.":"this may indicate an invalid network setting, if so correct setting, remove key and try again.";return u.a.createElement("div",null,u.a.createElement("p",null,"The following extended public key was imported:"),u.a.createElement("div",{className:a.xpub},u.a.createElement(T.a,{text:t.extendedPublicKey,showIcon:!0})),r.renderBIP32Path(),""!==o&&u.a.createElement(E.a,{mb:2},u.a.createElement(g.a,null,o,", ",i," ")),u.a.createElement(v.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){r.reset(t.method===p.HERMIT)}},"Remove Extended Public Key"))},r.validateAndSetExtendedPublicKey=function(e,t,n){var a=r.props,o=a.number,i=a.network,s=a.extendedPublicKeyImporters,c=a.setExtendedPublicKey,u=Object(d.validateExtendedPublicKey)(e,i),l=e;if(""!==u)try{l=Object(d.convertExtendedPublicKey)(e,"testnet"===i?"tpub":"xpub")}catch(h){return t(h.message),void c(o,e)}var p=Object(d.validateExtendedPublicKey)(l,i);if(""!==p)return t(p),void c(o,e);if(c(o,l),l&&Object.values(s).find((function(e,t){return t!==o-1&&e.extendedPublicKey===l})))t("This extended public key has already been imported.");else{t("");var m=l===e?"":"Your extended public key has been converted from ".concat(e.slice(0,4)," to ").concat(l.slice(0,4));r.setState({conversionMessage:m}),r.finalize(),n&&n()}},r.validateAndSetRootFingerprint=function(e,t){var n=r.props,a=n.number,o=n.setExtendedPublicKeyRootXfp,i=Object(d.validateRootFingerprint)(e);i?t(i):o(a,e)},r.state={disableChangeMethod:!1,conversionMessage:""},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.extendedPublicKeyImporter,n=e.finalizedNetwork,r=e.network,a=t.method&&t.conflict,o="";return a&&(o=n!==r?"Warning, you can not mix xpub and tpub.  Do not proceed without resolving by either removing conflicting imported keys or returning network type to original state!":"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"),u.a.createElement(y.a,null,u.a.createElement(P.a,{title:this.title()}),u.a.createElement(O.a,null,a&&u.a.createElement(K.a,{message:o}),t.finalized?this.renderExtendedPublicKey():this.renderImport()))}}]),n}(u.a.Component);var V={setName:B.o,resetBIP32Path:B.i,setBIP32Path:B.j,setMethod:B.n,setExtendedPublicKey:B.k,setExtendedPublicKeyRootXfp:B.l,setFinalized:B.m},X=Object(S.a)((function(){return{xpub:{lineHeight:".8rem",overflowWrap:"break-word"}}}))(G);t.a=Object(l.b)((function(e,t){return Object(r.a)(Object(r.a)(Object(r.a)({},e.settings),e.quorum),{extendedPublicKeyImporter:e.quorum.extendedPublicKeyImporters[t.number]})}),V)(X)},1106:function(e,t,n){e.exports=n(1702)},1138:function(e,t){},1140:function(e,t){},1149:function(e,t){},1151:function(e,t){},1164:function(e,t){},1167:function(e,t){},124:function(e,t,n){"use strict";n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return P})),n.d(t,"c",(function(){return S}));var r=n(10),a=n.n(r),o=n(16),i=n(261),s=n.n(i),c=n(29),u=n.n(c),l=n(5);function d(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(a.a.mark((function e(t,n,r){var i,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:[],e.abrupt("return",new Promise(function(){var e=Object(o.a)(a.a.mark((function e(o,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s()(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},auth:n,data:{jsonrpc:"2.0",id:0,method:"".concat(r),params:i}}).then((function(e){return o(e.data)})).catch(c);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return e.response&&e.response.data&&e.response.data.error&&-4===e.response.data.error.code}function h(e){return{url:e.url,auth:{username:e.username,password:e.password}}}function f(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,s,c,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,o=t.address,i=t.addresses,e.prev=1,s=i||[o],e.next=5,d(n,r,"listunspent",[0,9999999,s]);case 5:return c=e.sent,p=[],c.result.forEach((function(e){p.push(d(n,r,"gettransaction",[e.txid]))})),e.next=10,Promise.all(p);case 10:return m=e.sent,e.abrupt("return",c.result.map((function(e,t){var n=new u.a(e.amount);return{confirmed:(e.confirmations||0)>0,txid:e.txid,index:e.vout,amount:n.toFixed(8),amountSats:Object(l.bitcoinsToSatoshis)(n),transactionHex:m[t].result.hex,time:m[t].result.blocktime}})));case 14:throw e.prev=14,e.t0=e.catch(1),console.error("There was a problem:",e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function E(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,o=t.address,e.prev=1,e.next=4,d(n,r,"getreceivedbyaddress",[o]);case 4:if("undefined"!==typeof(i=e.sent).result){e.next=7;break}throw new Error("Error: invalid response from ".concat(n));case 7:return e.abrupt("return",{used:i.result>0});case 10:return e.prev=10,e.t0=e.catch(1),m(e.t0)?console.warn("Address ".concat(o," not found in bitcoind's wallet. Query failed.")):console.error(e.t0.message),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,o=t.numBlocks,i=void 0===o?2:o,e.next=3,d(n,r,"estimatesmartfee",[i]);case 3:return s=e.sent,c=s.result.feerate,e.abrupt("return",Math.ceil(1e5*c));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.auth,o=t.hex,e.prev=1,e.next=4,d(n,r,"sendrawtransaction",[o]);case 4:return i=e.sent,e.abrupt("return",i.result);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("send tx error",e.t0),e.t0.response&&e.t0.response.data.error.message||e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function S(e){var t=e.url,n=e.auth,r=e.addresses,a=e.label,o=e.rescan,i=[t,n,"importmulti",[r.map((function(e){return{scriptPubKey:{address:e},label:a,timestamp:0}})),{rescan:o}]];return o?(d.apply(void 0,i),new Promise((function(e){return e({result:[]})}))):d.apply(void 0,i)}},1282:function(e){e.exports=JSON.parse('{"name":"unchained-wallets","version":"0.1.21","description":"Unchained Capital\'s HD Wallets Library","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/unchained-capital/unchained-wallets.git"},"author":"Unchained Capital","license":"MIT","bugs":{"url":"https://github.com/unchained-capital/unchained-wallets/issues"},"homepage":"https://github.com/unchained-capital/unchained-wallets","devDependencies":{"@babel/cli":"^7.7.0","@babel/core":"^7.7.2","@babel/preset-env":"^7.7.1","babel-plugin-transform-inline-environment-variables":"^0.4.3","eslint":"^6.6.0","eslint-plugin-import":"^2.18.2","eslint-plugin-jest":"^23.0.3","jest":"^24.9.0","jest-junit":"^9.0.0","jsdoc":"^3.6.3","mocha":"^6.2.2"},"scripts":{"compile-images":"node images/compile.js","compile":"babel -d lib/ src/ && npm run compile-images","compile:trezor-dev":"TREZOR_DEV=true babel --watch -d lib/ src/ && npm run compile-images","compile:watch":"babel --watch -d lib/ src/ && npm run compile-images","prepublish":"npm run compile","pretest":"npm run compile","prepare":"npm run compile","test":"jest lib","docs":"./bin/build-docs.sh","lint":"eslint src"},"bin":{},"dependencies":{"@babel/polyfill":"^7.7.0","@cvbb/bc-ur":"^0.2.9","@keystonehq/bc-ur-registry":"^0.4.4","@ledgerhq/hw-app-btc":"^5.34.1","@ledgerhq/hw-transport-node-hid":"^5.34.0","@ledgerhq/hw-transport-u2f":"^5.34.0","@ledgerhq/hw-transport-webusb":"5.53.0","@ngraveio/bc-ur":"^1.1.6","bignumber.js":"^8.1.1","bitcoinjs-lib":"^4.0.5","bowser":"^2.6.1","core-js":"^2.6.10","hi-base32":"^0.5.0","pako":"^1.0.10","punycode":"^2.1.1","trezor-connect":"^8.1.19","unchained-bitcoin":"^0.1.3"},"directories":{"lib":"lib"},"babel":{"plugins":["transform-inline-environment-variables"],"presets":[["@babel/env",{"useBuiltIns":"usage","corejs":2}]]}}')},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColdcardMultisigWalletConfig=t.ColdcardSignMultisigTransaction=t.ColdcardExportExtendedPublicKey=t.ColdcardExportPublicKey=t.ColdcardInteraction=t.COLDCARD_WALLET_CONFIG_VERSION=t.COLDCARD_BASE_BIP32_PATHS=t.COLDCARD=void 0,n(285),n(220),n(912),n(493),n(913),n(662),n(1294),n(172),n(139),n(246),n(284),n(404),n(494),n(326),n(663),n(919),n(152),n(140),n(103),n(171),n(920);var r=n(327),a=n(283);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t,n){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.COLDCARD="coldcard";var h={"m/45'":r.P2SH,"m/48'/0'/0'/1'":r.P2SH_P2WSH.replace("-","_"),"m/48'/0'/0'/2'":r.P2WSH,"m/48'/1'/0'/1'":r.P2SH_P2WSH.replace("-","_"),"m/48'/1'/0'/2'":r.P2WSH};t.COLDCARD_BASE_BIP32_PATHS=h;var f=Object.keys(h);t.COLDCARD_WALLET_CONFIG_VERSION="1.0.0";var b=function(e){function t(){return u(this,t),l(this,d(t).apply(this,arguments))}return p(t,e),t}(a.IndirectKeystoreInteraction);t.ColdcardInteraction=b;var E=function(e){function t(e){var n,a=e.network,o=e.bip32Path;if(u(this,t),n=l(this,d(t).call(this)),![r.MAINNET,r.TESTNET].find((function(e){return e===a})))throw new Error("Unknown network.");return n.network=a,n.bip32Path=o,n.bip32ValidationErrorMessage={},n.bip32ValidationError=n.validateColdcardBip32Path(o),n}return p(t,e),s(t,[{key:"isSupported",value:function(){return!this.bip32ValidationError.length}},{key:"messages",value:function(){var e=c(d(t.prototype),"messages",this).call(this);return Object.entries(this.bip32ValidationErrorMessage).length&&e.push({state:a.PENDING,level:a.ERROR,code:this.bip32ValidationErrorMessage.code,text:this.bip32ValidationErrorMessage.text}),e.push({state:a.PENDING,level:a.INFO,code:"coldcard.export_xpub",text:"Go to Settings > Multisig Wallets > Export XPUB"}),e.push({state:a.PENDING,level:a.INFO,code:"coldcard.select_account",text:"Enter 0 for account"}),e.push({state:a.PENDING,level:a.INFO,code:"coldcard.upload_key",text:"Upload the JSON file from your Coldcard."}),e}},{key:"chrootForBIP32Path",value:function(e){for(var t=0;t<f.length;t++){var n=f[t];if(e.startsWith(n))return n}return null}},{key:"validateColdcardBip32Path",value:function(e){var t=(0,r.validateBIP32Path)(e);if(t.length)return this.bip32ValidationErrorMessage={text:t,code:"coldcard.bip32_path.path_error"},t;var n=this.chrootForBIP32Path(e);if(n){if(n===e)return"";var a=(0,r.getRelativeBIP32Path)(n,e),o=(0,r.validateBIP32Path)(a,{mode:"unhardened"});return o?(this.bip32ValidationErrorMessage={text:o,code:"coldcard.bip32_path.no_hardened_relative_path_error"},o):""}var i="The bip32Path must begin with one of the known Coldcard paths: ".concat(f);return this.bip32ValidationErrorMessage={text:i,code:"coldcard.bip32_path.unknown_chroot_error"},i}},{key:"parse",value:function(e){var t;if("object"===o(e))t=e;else{if("string"!==typeof e)throw new Error("Not valid JSON.");try{t=JSON.parse(e)}catch(s){throw new Error("Unable to parse JSON.")}}if(0===Object.keys(t).length)throw new Error("Empty JSON file.");if(!t.p2sh_deriv||!t.p2sh||!t.p2wsh_deriv||!t.p2wsh||(!t.p2wsh_p2sh_deriv||!t.p2wsh_p2sh)&&(!t.p2sh_p2wsh_deriv||!t.p2sh_p2wsh))throw new Error("Missing required params. Was this file exported from a Coldcard?  If you are using firmware version 4.1.0 please upgrade to 4.1.1 or later.");var n=r.ExtendedPublicKey.fromBase58(t.p2sh);if(!t.xfp&&1!==n.depth)throw new Error("No xfp in JSON file.");var a=1===n.depth?(0,r.fingerprintToFixedLengthHex)(n.parentFingerprint):null;if(a&&t.xfp&&a!==t.xfp.toLowerCase())throw new Error("Computed fingerprint does not match the one in the file.");var i=t.xfp?t.xfp:a;return t.rootFingerprint=i.toLowerCase(),t}},{key:"deriveDeeperXpubIfNecessary",value:function(e){var t=this.chrootForBIP32Path(this.bip32Path),n=(0,r.getRelativeBIP32Path)(t,this.bip32Path),a=h[t];a.includes("_")&&!e[a.toLowerCase()]&&(a="p2wsh_p2sh");var o=this.network===r.TESTNET?"tpub":"xpub",i=a.toLowerCase().includes("w")?(0,r.convertExtendedPublicKey)(e[a.toLowerCase()],o):e[a.toLowerCase()];return n.length?(0,r.deriveChildExtendedPublicKey)(i,n,this.network):i}}]),t}(b),g=function(e){function t(e){var n=e.network,r=e.bip32Path;return u(this,t),l(this,d(t).call(this,{network:n,bip32Path:r}))}return p(t,e),s(t,[{key:"messages",value:function(){return c(d(t.prototype),"messages",this).call(this)}},{key:"parse",value:function(e){var n=c(d(t.prototype),"parse",this).call(this,e),a=this.deriveDeeperXpubIfNecessary(n);return{publicKey:r.ExtendedPublicKey.fromBase58(a).pubkey,rootFingerprint:n.rootFingerprint,bip32Path:this.bip32Path}}}]),t}(E);t.ColdcardExportPublicKey=g;var v=function(e){function t(e){var n=e.network,r=e.bip32Path;return u(this,t),l(this,d(t).call(this,{network:n,bip32Path:r}))}return p(t,e),s(t,[{key:"messages",value:function(){return c(d(t.prototype),"messages",this).call(this)}},{key:"parse",value:function(e){var n=c(d(t.prototype),"parse",this).call(this,e);return{xpub:this.deriveDeeperXpubIfNecessary(n),rootFingerprint:n.rootFingerprint,bip32Path:this.bip32Path}}}]),t}(E);t.ColdcardExportExtendedPublicKey=v;var y=function(e){function t(e){var n,a=e.network,o=e.inputs,i=e.outputs,s=e.bip32Paths,c=e.psbt;if(u(this,t),(n=l(this,d(t).call(this))).network=a,n.inputs=o,n.outputs=i,n.bip32Paths=s,c)n.psbt=c;else try{n.psbt=(0,r.unsignedMultisigPSBT)(a,o,i)}catch(p){throw new Error("Unable to build the PSBT from the provided parameters.")}return n}return p(t,e),s(t,[{key:"messages",value:function(){var e=c(d(t.prototype),"messages",this).call(this);return e.push({state:a.PENDING,level:a.INFO,code:"coldcard.install_multisig_config",text:"Ensure your Coldcard has the multisig wallet installed."}),e.push({state:a.PENDING,level:a.INFO,code:"coldcard.download_psbt",text:"Download and save this PSBT file to your SD card."}),e.push({state:a.PENDING,level:a.INFO,code:"coldcard.transfer_psbt",text:"Transfer the PSBT file to your Coldcard."}),e.push({state:a.ACTIVE,level:a.INFO,code:"coldcard.transfer_psbt",text:"Transfer the PSBT file to your Coldcard."}),e.push({state:a.ACTIVE,level:a.INFO,code:"coldcard.select_psbt",text:"Choose 'Ready To Sign' and select the PSBT."}),e.push({state:a.ACTIVE,level:a.INFO,code:"coldcard.sign_psbt",text:"Verify the transaction details and sign."}),e.push({state:a.ACTIVE,level:a.INFO,code:"coldcard.upload_signed_psbt",text:"Upload the signed PSBT below."}),e}},{key:"request",value:function(){return this.psbt}},{key:"parse",value:function(e){var t=(0,r.parseSignaturesFromPSBT)(e);if(!t||0===t.length)throw new Error("No signatures found in the PSBT. Did you upload the right one?");return t}}]),t}(b);t.ColdcardSignMultisigTransaction=y;var P=function(){function e(t){var n=t.jsonConfig;if(u(this,e),"object"===o(n))this.jsonConfig=n;else{if("string"!==typeof n)throw new Error("Not valid JSON.");try{this.jsonConfig=JSON.parse(n)}catch(r){throw new Error("Unable to parse JSON.")}}if(!this.jsonConfig.uuid&&!this.jsonConfig.name)throw new Error("Configuration file needs a UUID or a name.");if(this.name=this.jsonConfig.uuid||this.jsonConfig.name,!this.jsonConfig.quorum.requiredSigners||!this.jsonConfig.quorum.totalSigners)throw new Error("Configuration file needs quorum.requiredSigners and quorum.totalSigners.");if(this.requiredSigners=this.jsonConfig.quorum.requiredSigners,this.totalSigners=this.jsonConfig.quorum.totalSigners,!this.jsonConfig.addressType)throw new Error("Configuration file needs addressType.");if(this.addressType=n.addressType,!this.jsonConfig.extendedPublicKeys||!this.jsonConfig.extendedPublicKeys.every((function(e){if(!e.xfp||"Unknown"===e.xfp)throw new Error("ExtendedPublicKeys missing at least one xfp.");if("string"!==typeof e.xfp)throw new Error("XFP not a string");if(8!==e.xfp.length)throw new Error("XFP not length 8");if(isNaN(Number("0x".concat(e.xfp))))throw new Error("XFP is invalid hex");return!0})))throw new Error("Configuration file needs extendedPublicKeys.");this.extendedPublicKeys=this.jsonConfig.extendedPublicKeys}return s(e,[{key:"adapt",value:function(){var e="# Coldcard Multisig setup file (exported from unchained-wallets)\n# https://github.com/unchained-capital/unchained-wallets\n# v".concat("1.0.0","\n# \nName: ").concat(this.name,"\nPolicy: ").concat(this.requiredSigners," of ").concat(this.totalSigners,"\nFormat: ").concat(this.addressType,"\n\n");return e+=this.extendedPublicKeys.map((function(e){var t=e.bip32Path.toLowerCase().includes("unknown")?"m".concat("/0".repeat(r.ExtendedPublicKey.fromBase58(e.xpub).depth)):e.bip32Path;return"Derivation: ".concat(t,"\n").concat(e.xfp,": ").concat(e.xpub)})).join("\n"),e+="\n"}}]),e}();t.ColdcardMultisigWalletConfig=P},1307:function(e,t){},1310:function(e,t){},1311:function(e,t){},135:function(e,t,n){"use strict";function r(e){return function(t){return{type:e,value:t}}}function a(e){var t,n={},a=Object.keys(e);for(t=0;t<a.length;t+=1){var o=a[t],i=e[o];n[o]=r(i)}return n}function o(e){return function(t,n){return{type:e,number:t,value:n}}}function i(e){var t,n={},r=Object.keys(e);for(t=0;t<r.length;t+=1){var a=r[t],i=e[a];n[a]=o(i)}return n}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},137:function(e,t,n){"use strict";n.r(t),n.d(t,"SET_ERROR_NOTIFICATION",(function(){return r})),n.d(t,"CLEAR_ERROR_NOTIFICATION",(function(){return a})),n.d(t,"setErrorNotification",(function(){return o})),n.d(t,"clearErrorNotification",(function(){return i}));var r="SET_ERROR_NOTIFICATION",a="CLEAR_ERROR_NOTIFICATION";function o(e){return{type:r,value:e}}function i(){return{type:a}}},138:function(e,t,n){e.exports={feeMagicBtn:"styles_feeMagicBtn__QX0iX",utxoTxid:"styles_utxoTxid__1p6kt",outputsFormInput:"styles_outputsFormInput__3Osdm",unconfirmed:"styles_unconfirmed__3KzJ4",spent:"styles_spent__10i2F",outputsFormLabel:"styles_outputsFormLabel__NZOnp",maxSpend:"styles_maxSpend__32e8a"}},1388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomSignMultisigTransaction=t.CustomExportExtendedPublicKey=t.CustomInteraction=t.CUSTOM=void 0,n(172),n(139),n(246),n(284),n(285),n(220),n(326),n(411),n(399),n(919);var r=n(327),a=n(283);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t,n){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.CUSTOM="custom";var h=function(e){function t(){return u(this,t),l(this,d(t).apply(this,arguments))}return p(t,e),t}(a.IndirectKeystoreInteraction);t.CustomInteraction=h;var f=function(e){function t(e){var n,a=e.network,o=e.bip32Path;if(u(this,t),n=l(this,d(t).call(this)),![r.MAINNET,r.TESTNET].find((function(e){return e===a})))throw new Error("Unknown network.");n.network=a,n.validationErrorMessages=[],n.bip32Path=o;var i=(0,r.validateBIP32Path)(o);return i.length&&n.validationErrorMessages.push({code:"custom.bip32_path.path_error",text:i}),n}return p(t,e),s(t,[{key:"isSupported",value:function(){return 0===this.validationErrorMessages.length}},{key:"messages",value:function(){var e=c(d(t.prototype),"messages",this).call(this);return this.validationErrorMessages.length&&this.validationErrorMessages.forEach((function(t){e.push({state:a.PENDING,level:a.ERROR,code:t.code,text:t.text})})),e.push({state:a.PENDING,level:a.INFO,code:"custom.import_xpub",text:"Type or paste the extended public key here."}),e}},{key:"parse",value:function(e){var t,n;try{t=r.ExtendedPublicKey.fromBase58(e.xpub)}catch(s){throw new Error("Not a valid ExtendedPublicKey.")}try{if(""===e.rootFingerprint||void 0===e.rootFingerprint){var a=t.pubkey.length;n=t.pubkey.substring(a-8)}else(0,r.validateRootFingerprint)(e.rootFingerprint),n=e.rootFingerprint}catch(s){throw new Error("Root fingerprint validation error: ".concat(s.message.toLowerCase(),"."))}var o=this.bip32Path.split("/").length,i=this.bip32Path.startsWith("m/")?o-1:o;if(t.depth!==i)throw new Error("Depth of ExtendedPublicKey (".concat(t.depth,") does not match depth of BIP32 path (").concat(i,")."));return{xpub:t.base58String,rootFingerprint:n,bip32Path:this.bip32Path}}}]),t}(h);t.CustomExportExtendedPublicKey=f;var b=function(e){function t(e){var n,a=e.network,o=e.inputs,i=e.outputs,s=e.bip32Paths,c=e.psbt;if(u(this,t),(n=l(this,d(t).call(this))).network=a,n.inputs=o,n.outputs=i,n.bip32Paths=s,c)n.psbt=c;else try{n.psbt=(0,r.unsignedMultisigPSBT)(a,o,i)}catch(p){throw new Error("Unable to build the PSBT from the provided parameters.")}return n}return p(t,e),s(t,[{key:"messages",value:function(){var e=c(d(t.prototype),"messages",this).call(this);return e.push({state:a.PENDING,level:a.INFO,code:"custom.download_psbt",text:"Download and save this PSBT file."}),e.push({state:a.PENDING,level:a.INFO,code:"custom.sign_psbt",text:"Add your signature to the PSBT."}),e.push({state:a.ACTIVE,level:a.INFO,code:"custom.sign_psbt",text:"Verify the transaction details and sign."}),e.push({state:a.ACTIVE,level:a.INFO,code:"custom.upload_signed_psbt",text:"Upload the signed PSBT."}),e}},{key:"request",value:function(){return this.psbt}},{key:"parse",value:function(e){var t=(0,r.parseSignaturesFromPSBT)(e);if(!t||0===t.length)throw new Error("No signatures found in the PSBT. Did you upload the right one?");return t}}]),t}(h);t.CustomSignMultisigTransaction=b},1389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHermitQRCodeData=y,t.encodeHermitQRCodeData=P,t.HermitSignTransaction=t.HermitExportExtendedPublicKey=t.HermitExportPublicKey=t.HermitDisplayer=t.HermitReader=t.HermitInteraction=t.HERMIT=void 0,n(172),n(284),n(285),n(220),n(484),n(282),n(399),n(400),n(139),n(171),n(246),n(493),n(152),n(140),n(103),n(943),n(325),n(954),n(326);var r=c(n(1390)),a=c(n(1392)),o=c(n(227)),i=n(327),s=n(283);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t,n){return(p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t="Unable to parse QR code";try{var n=r.default.decode.asBytes(e);try{var o=a.default.inflate(n,{to:"string"});try{return JSON.parse(o)}catch(i){throw new Error("".concat(t," (JSON parse error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (gzip decompression error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (Base32 decode error)"))}}function P(e){var t="Unable to create QR code";try{var n=JSON.stringify(e);try{var o=a.default.deflate(n,{gzip:!0});try{return r.default.encode(o)}catch(i){throw new Error("".concat(t," (Base32 encode error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (gzip compression error)"))}}catch(i){throw i.message&&i.message.startsWith(t)?i:new Error("".concat(t," (JSON encode error)"))}}function O(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{state:s.PENDING,level:s.INFO,code:"hermit.command",mode:"wallet"},{},{text:"".concat(e.instructions," '").concat(e.command,"'")},{},e)}t.HERMIT="hermit";var S=function(e){function t(){return m(this,t),h(this,f(t).apply(this,arguments))}return b(t,e),t}(s.IndirectKeystoreInteraction);t.HermitInteraction=S;var T=function(e){function t(){var e;return m(this,t),(e=h(this,f(t).call(this))).reader=!0,e}return b(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push({state:s.ACTIVE,level:s.INFO,code:"hermit.scanning",text:"Scan Hermit QR code now."}),e}}]),t}(S);t.HermitReader=T;var w=function(e){function t(){var e;return m(this,t),(e=h(this,f(t).call(this))).displayer=!0,e}return b(t,e),t}(T);t.HermitDisplayer=w;var I=function(e){function t(e){var n,r=e.bip32Path;return m(this,t),(n=h(this,f(t).call(this))).bip32Path=r,n}return b(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push(O({instructions:"Run the following Hermit command, replacing the BIP32 path if you need to:",command:"export-pub ".concat(this.bip32Path)})),e}},{key:"parse",value:function(e){var t=y(e),n=t.xpub,r=t.pubkey,a=t.bip32_path;if(!r)throw n?new Error("Make sure you export a plain public key and NOT an extended public key."):new Error("No public key in QR code.");if(!a)throw new Error("No BIP32 path in QR code.");return t.bip32Path=a,Reflect.deleteProperty(t,"bip32_path"),t}}]),t}(T);t.HermitExportPublicKey=I;var x=function(e){function t(e){var n,r=e.bip32Path;return m(this,t),(n=h(this,f(t).call(this))).bip32Path=r,n}return b(t,e),d(t,[{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return e.push(O({instructions:"Run the following Hermit command, replacing the BIP32 path if you need to:",command:"export-xpub ".concat(this.bip32Path)})),e}},{key:"parse",value:function(e){var t=y(e),n=t.xpub,r=t.pubkey,a=t.bip32_path;if(!n)throw r?new Error("Make sure you export an extended public key and NOT a plain public key."):new Error("No extended public key in QR code.");if(!a)throw new Error("No BIP32 path in QR code.");return t.bip32Path=a,Reflect.deleteProperty(t,"bip32_path"),t}}]),t}(T);t.HermitExportExtendedPublicKey=x;var j=function(e){function t(e){var n,r=e.inputs,a=e.outputs,o=e.bip32Paths;return m(this,t),(n=h(this,f(t).call(this))).inputs=r,n.outputs=a,n.bip32Paths=o,n.inputAddressType="",n}return b(t,e),d(t,[{key:"isSupported",value:function(){return this.inputsAreSupported()&&this.outputsAreSupported()}},{key:"outputsAreSupported",value:function(){if(this.outputs&&this.outputs.length)for(var e=0;e<this.outputs.length;e++){if(this.outputs[e].address.match(/^(tb|bc)/))return!1}return!0}},{key:"inputsAreSupported",value:function(){if(this.inputs&&this.inputs.length)for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,i.multisigAddressType)(t.multisig);if(n!==i.MULTISIG_ADDRESS_TYPES.P2SH)return this.inputAddressType=n,!1}return!0}},{key:"messages",value:function(){var e=p(f(t.prototype),"messages",this).call(this);return this.inputsAreSupported()||e.push({state:s.UNSUPPORTED,level:s.ERROR,code:"hermit.unsupported.inputaddress",text:"Unsupported input address type ".concat(this.inputAddressType,", must be P2SH.")}),this.outputsAreSupported()||e.push({state:s.UNSUPPORTED,level:s.ERROR,code:"hermit.unsupported.outputaddress",text:"Unsupported output address type. bech32 addresses are unsupported."}),this.inputsAreSupported()&&this.outputsAreSupported()?(e.push(O({instructions:"Scan this QR code into Hermit by running the following command:",command:"sign-bitcoin"})),e):e}},{key:"request",value:function(){return P(this.signatureRequestData())}},{key:"signatureRequestData",value:function(){for(var e={},t=0;t<this.inputs.length;t++){var n=this.inputs[t],r=this.bip32Paths[t],a=(0,i.scriptToHex)((0,i.multisigRedeemScript)(n.multisig));e[a]||(e[a]=[a,r]),e[a].push({txid:n.txid,index:n.index,amount:new o.default(n.amountSats).toNumber()})}return{inputs:Object.values(e),outputs:this.outputs.map((function(e){return{address:e.address,amount:new o.default(e.amountSats).toNumber()}}))}}},{key:"parse",value:function(e){var t=y(e).signatures;if(!t||0===t.length)throw new Error("No signatures in QR code.");return(t||[]).map((function(e){return"".concat(e,"01")}))}}]),t}(w);t.HermitSignTransaction=j},1401:function(e,t,n){"use strict";(function(e){var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.LedgerSignMultisigTransaction=t.LedgerExportExtendedPublicKey=t.LedgerExportPublicKey=t.LedgerGetMetadata=t.LedgerBitcoinInteraction=t.LedgerDashboardInteraction=t.LedgerInteraction=t.LEDGER_BOTH_BUTTONS=t.LEDGER_RIGHT_BUTTON=t.LEDGER_LEFT_BUTTON=t.LEDGER=void 0,n(409),n(501),n(172),n(139),n(662),n(651),n(246),n(284),n(285),n(220),n(493),n(152),n(140),n(663),n(411),n(325),n(920),n(404),n(494),n(174),n(681),n(103),n(656);var a=n(327),o=n(283),i=n(1402),s=n(1404);function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){d(o,r,a,i,s,"next",e)}function s(e){d(o,r,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t,n){return(E="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.LEDGER="ledger";var P=n(1405).default,O=n(1408).default,S=n(1434).default;t.LEDGER_LEFT_BUTTON="ledger_left_button";t.LEDGER_RIGHT_BUTTON="ledger_right_button";t.LEDGER_BOTH_BUTTONS="ledger_both_buttons";var T=function(e){function t(){return m(this,t),b(this,g(t).apply(this,arguments))}return v(t,e),f(t,[{key:"messages",value:function(){var e=E(g(t.prototype),"messages",this).call(this);return e.push({state:o.PENDING,level:o.INFO,text:"Please plug in and unlock your Ledger.",code:"device.setup"}),e.push({state:o.ACTIVE,level:o.INFO,text:"Communicating with Ledger...",code:"device.active"}),e}},{key:"withTransport",value:function(){var e=p(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.environment.satisfies({firefox:">70"})){e.next=12;break}return e.prev=2,e.next=5,P.create();case 5:return n=e.sent,e.abrupt("return",t(n));case 9:throw e.prev=9,e.t0=e.catch(2),new Error(e.t0.message);case 12:return e.prev=12,e.next=15,O.create();case 15:return a=e.sent,e.abrupt("return",t(a));case 19:throw e.prev=19,e.t1=e.catch(12),e.t1.message&&("No device selected."===e.t1.message&&(e.t1.message="Select your device in the WebUSB dialog box. Make sure it's plugged in, unlocked, and has the Bitcoin app open."),"undefined is not an object (evaluating 'navigator.usb.getDevices')"===e.t1.message&&(e.t1.message="Safari is not a supported browser.")),new Error(e.t1.message);case 23:case"end":return e.stop()}}),e,this,[[2,9],[12,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"withApp",value:function(e){return this.withTransport(function(){var t=p(r.mark((function t(n){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new S(n),t.abrupt("return",e(a,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"closeTransport",value:function(){return this.withTransport(function(){var e=p(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),t}(o.DirectKeystoreInteraction);t.LedgerInteraction=T;var w=function(e){function t(){return m(this,t),b(this,g(t).apply(this,arguments))}return v(t,e),f(t,[{key:"messages",value:function(){var e=E(g(t.prototype),"messages",this).call(this);return e.push({state:o.PENDING,level:o.INFO,text:"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.",code:"ledger.app.dashboard"}),e.push({state:o.ACTIVE,level:o.INFO,text:"Make sure you have the main Ledger dashboard open, NOT the Bitcoin app.",code:"ledger.app.dashboard"}),e}}]),t}(T);t.LedgerDashboardInteraction=w;var I=function(e){function t(){return m(this,t),b(this,g(t).apply(this,arguments))}return v(t,e),f(t,[{key:"messages",value:function(){var e=E(g(t.prototype),"messages",this).call(this);return e.push({state:o.PENDING,level:o.INFO,text:"Then open the Bitcoin app.",code:"ledger.app.bitcoin"}),e.push({state:o.ACTIVE,level:o.INFO,text:"Make sure you have opened the Bitcoin app.",code:"ledger.app.bitcoin"}),e}}]),t}(T);t.LedgerBitcoinInteraction=I;var x=function(t){function n(){return m(this,n),b(this,g(n).apply(this,arguments))}return v(n,t),f(n,[{key:"run",value:function(){var e=p(r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.withTransport(function(){var e=p(r.mark((function e(a){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setScrambleKey("B0L0S"),e.next=4,a.send(224,1,0,0);case 4:return o=e.sent,e.abrupt("return",t.parseMetadata(o));case 6:return e.prev=6,e.next=9,E(g(n.prototype),"closeTransport",t).call(t);case 9:return e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[0,,6,10]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMetadata",value:function(t){try{var n=l(t),r=n.slice(0,n.length-2),a=e.from(r.slice(0,4)).readUIntBE(0,4),o=r[4],i=e.from(r.slice(5,5+o)).toString(),s=r[5+o],c=e.from(r.slice(5+o+1,5+o+1+s)),d=r[5+o+1+s],p=e.from(r.slice(7+o+s,7+o+s+d));0===p[p.length-1]&&(p=p.slice(0,p.length-1)),p=p.toString(),o||(i="0.0.0",c=e.allocUnsafeSlow(0),p="");i.includes("-osu");var m=i.replace("-osu",""),h=u(i.match(/([0-9]+.[0-9]+)(.[0-9]+)?(-(.*))?/)||[],5),f=(h[1],h[4],c.length>0?c[0]:0),b=(Boolean(8&f),Boolean(128&f),u((m||"").split("."),3)),E=b[0],g=b[1],v=b[2],y=u((p||"").split("."),2),P=y[0],O=y[1],S=[{minTargetId:855638020,model:"Nano X"},{minTargetId:823132162,model:"Nano S"},{minTargetId:823132162,model:"Blue"},{minTargetId:16777217,model:"MCU"}],T="Unknown";if(a)for(var w=0;w<S.length;w++){var I=S[w];if(a>=I.minTargetId){T=I.model;break}}return{spec:"".concat(T," v").concat(m," (MCU v").concat(p,")"),model:T,version:{major:E,minor:g,patch:v,string:m},mcuVersion:{major:P,minor:O,string:p}}}catch(x){throw console.error(x),new Error("Unable to parse metadata from Ledger device.")}}}]),n}(w);t.LedgerGetMetadata=x;var j=function(e){function t(e){var n,r=e.bip32Path;m(this,t),(n=b(this,g(t).call(this))).bip32Path=r,n.bip32ValidationErrorMessage={};var o=(0,a.validateBIP32Path)(r);return o.length&&(n.bip32ValidationErrorMessage={text:o,code:"ledger.bip32_path.path_error"}),n}return v(t,e),f(t,[{key:"messages",value:function(){var e=E(g(t.prototype),"messages",this).call(this);return Object.entries(this.bip32ValidationErrorMessage).length&&e.push({state:o.PENDING,level:o.ERROR,code:this.bip32ValidationErrorMessage.code,text:this.bip32ValidationErrorMessage.text}),e}},{key:"hasBIP32PathWarning",value:function(){var e=(0,a.bip32PathToSequence)(this.bip32Path),t=(0,a.hardenedBIP32Index)(0),n=(0,a.hardenedBIP32Index)(44),r=(0,a.hardenedBIP32Index)(100);return 5!==e.length||(e[0]!==n||(e[2]<t||e[2]>r||(0!==e[3]||(e[4]<0||e[4]>5e4))))}},{key:"getFingerprint",value:function(){var e=p(r.mark((function e(){var t,n,o,i=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=i.length>0&&void 0!==i[0]&&i[0])){e.next=7;break}return e.next=4,this.getMultisigRootPublicKey();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.getParentPublicKey();case 9:e.t0=e.sent;case 10:return n=e.t0,o=(0,a.getFingerprintFromPublicKey)(n),e.abrupt("return",t?(0,a.fingerprintToFixedLengthHex)(o):o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getParentPublicKey",value:function(){var e=this;return this.withApp(function(){var t=p(r.mark((function t(n){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,a.getParentBIP32Path)(e.bip32Path),t.next=3,n.getWalletPublicKey(o);case 3:return t.abrupt("return",t.sent.publicKey);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"getMultisigRootPublicKey",value:function(){return this.withApp(function(){var e=p(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getWalletPublicKey();case 2:return e.abrupt("return",e.sent.publicKey);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"run",value:function(){var e=this;return this.withApp(function(){var t=p(r.mark((function t(n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.getWalletPublicKey(e.bip32Path));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}(I),C=function(e){function t(e){var n,r=e.bip32Path,a=e.includeXFP,o=void 0!==a&&a;return m(this,t),(n=b(this,g(t).call(this,{bip32Path:r}))).includeXFP=o,n}return v(t,e),f(t,[{key:"run",value:function(){var e=p(r.mark((function e(){var n,a,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(g(t.prototype),"run",this).call(this);case 3:if(n=e.sent,a=this.parsePublicKey((n||{}).publicKey),!this.includeXFP){e.next=10;break}return e.next=8,this.getFingerprint(!0);case 8:return o=e.sent,e.abrupt("return",{rootFingerprint:o,publicKey:a});case 10:return e.abrupt("return",a);case 11:return e.prev=11,e.next=14,E(g(t.prototype),"closeTransport",this).call(this);case 14:return e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[0,,11,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"parsePublicKey",value:function(e){if(!e)throw new Error("Received no public key from Ledger device.");try{return(0,a.compressPublicKey)(e)}catch(t){throw console.error(t),new Error("Unable to compress public key from Ledger device.")}}}]),t}(j);t.LedgerExportPublicKey=C;var k=function(e){function t(e){var n,r=e.bip32Path,a=e.network,o=e.includeXFP;return m(this,t),(n=b(this,g(t).call(this,{bip32Path:r}))).network=a,n.includeXFP=o,n}return v(t,e),f(t,[{key:"messages",value:function(){return E(g(t.prototype),"messages",this).call(this)}},{key:"run",value:function(){var e=p(r.mark((function e(){var n,o,i,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(g(t.prototype),"run",this).call(this);case 3:return n=e.sent,e.next=6,this.getFingerprint();case 6:if(o=e.sent,i=(0,a.deriveExtendedPublicKey)(this.bip32Path,n.publicKey,n.chainCode,o,this.network),!this.includeXFP){e.next=13;break}return e.next=11,this.getFingerprint(!0);case 11:return s=e.sent,e.abrupt("return",{rootFingerprint:s,xpub:i});case 13:return e.abrupt("return",i);case 14:return e.prev=14,e.next=17,E(g(t.prototype),"closeTransport",this).call(this);case 17:return e.finish(14);case 18:case"end":return e.stop()}}),e,this,[[0,,14,18]])})));return function(){return e.apply(this,arguments)}}()}]),t}(j);t.LedgerExportExtendedPublicKey=k;var R=function(e){function t(e){var n,r=e.network,a=e.inputs,o=e.outputs,i=e.bip32Paths;return m(this,t),(n=b(this,g(t).call(this))).network=r,n.inputs=a,n.outputs=o,n.bip32Paths=i,n}return v(t,e),f(t,[{key:"messages",value:function(){var e=E(g(t.prototype),"messages",this).call(this);return e.push({state:o.ACTIVE,level:o.WARNING,code:"ledger.sign.delay",text:"Your Ledger device may take up to several minutes to process a transaction with many inputs.",preProcessingTime:this.preProcessingTime(),postProcessingTime:this.postProcessingTime()}),this.anySegwitInputs()?(e.push({state:o.ACTIVE,level:o.INFO,code:"ledger.sign",version:"<1.6.0",text:'Your Ledger will ask you to "Confirm transaction" and display each output amount and address followed by the the fee amount.',action:"ledger_right_button"}),e.push({state:o.ACTIVE,level:o.INFO,code:"ledger.sign",version:">=1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:'Your Ledger will ask you to "Review transaction".',action:"ledger_right_button"},{text:"For each output, your Ledger device will display the output amount...",action:"ledger_right_button"},{text:"...followed by the output address in several parts",action:"ledger_right_button"},{text:"Your Ledger will display the transaction fees.",action:"ledger_right_button"},{text:'Your Ledger will ask you to "Accept and send".',action:"ledger_both_buttons"}]})):(e.push({state:o.ACTIVE,level:o.INFO,code:"ledger.sign",version:"<1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:"For each output, your Ledger will display the output amount and address for you to confirm.",action:"ledger_right_button"},{text:'Your Ledger will ask if you want to "Confirm the transaction".  Due to a bug in the Ledger software, your device may display the transaction fee as "UNKNOWN".',action:"ledger_right_button"}]}),e.push({state:o.ACTIVE,level:o.INFO,code:"ledger.sign",version:">=1.6.0",text:"Confirm each output on your Ledger device and approve the transaction.",messages:[{text:'For each output, your Ledger will ask you to "Review output".',action:"ledger_right_button"},{text:"Your Ledger will display the output amount.",action:"ledger_right_button"},{text:"Your Ledger will display the output address in several parts.",action:"ledger_right_button"},{text:'Your Ledger will ask if you want to "Accept" the output.',action:"ledger_both_buttons"},{text:'Your Ledger will ask if you want to "Confirm the transaction".',action:"ledger_right_button"},{text:'Due to a bug in the Ledger software, your device will display the transaction fee as "UNKNOWN".',action:"ledger_right_button"},{text:'Your Ledger will ask you to "Accept and send".',action:"ledger_both_buttons"}]})),e}},{key:"preProcessingTime",value:function(){return 10}},{key:"postProcessingTime",value:function(){return 10}},{key:"run",value:function(){var e=this;return this.withApp(function(){var t=p(r.mark((function t(n,a){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.setExchangeTimeout(2e4*e.outputs.length),t.next=4,n.signP2SHTransaction({inputs:e.ledgerInputs(),associatedKeysets:e.ledgerKeysets(),outputScriptHex:e.ledgerOutputScriptHex(),lockTime:0,sigHashType:1,segwit:e.anySegwitInputs(),transactionVersion:1});case 4:return o=t.sent,t.abrupt("return",e.parse(o));case 6:return t.prev=6,a.close(),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[0,,6,9]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"parse",value:function(e){return(e||[]).map((function(e){return"".concat((0,a.signatureNoSighashType)(e),"01")}))}},{key:"ledgerInputs",value:function(){return this.inputs.map((function(e){var t=(0,a.multisigAddressType)(e.multisig),n=(0,i.splitTransaction)(e.transactionHex,!0),r=t===a.P2SH?a.multisigRedeemScript:a.multisigWitnessScript,o=(0,a.scriptToHex)(r(e.multisig));return[n,e.index,o]}))}},{key:"ledgerKeysets",value:function(){var e=this;return this.bip32Paths.map((function(t){return e.ledgerBIP32Path(t)}))}},{key:"ledgerOutputScriptHex",value:function(){var e=(0,a.unsignedMultisigTransaction)(this.network,this.inputs,this.outputs).toHex(),t=(0,i.splitTransaction)(e,this.anySegwitInputs());return(0,s.serializeTransactionOutputs)(t).toString("hex")}},{key:"ledgerBIP32Path",value:function(e){return e.split("/").slice(1).join("/")}},{key:"anySegwitInputs",value:function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=(0,a.multisigAddressType)(t.multisig);if(n===a.P2SH_P2WSH||n===a.P2WSH)return!0}return!1}}]),t}(I);t.LedgerSignMultisigTransaction=R}).call(this,n(8).Buffer)},1458:function(e,t,n){"use strict";(function(e){var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.trezorCoin=A,t.TrezorConfirmMultisigAddress=t.TrezorSignMultisigTransaction=t.TrezorExportExtendedPublicKey=t.TrezorExportPublicKey=t.TrezorExportHDNode=t.TrezorGetMetadata=t.TrezorInteraction=t.TREZOR_PUSH_AND_HOLD_BUTTON=t.TREZOR_BOTH_BUTTONS=t.TREZOR_RIGHT_BUTTON=t.TREZOR_LEFT_BUTTON=t.TREZOR=void 0,n(484),n(282),n(399),n(400),n(171),n(172),n(139),n(662),n(651),n(284),n(285),n(220),n(246),n(912),n(174),n(681),n(1459),n(493),n(152),n(140),n(103),n(663),n(411),n(656);var a,o=l(n(227)),i=n(327),s=l(n(1461)),c=n(283),u=n(7);function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t,n){return(v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.TREZOR="trezor";var T=n(1492).default,w=(S(a={},i.P2SH,"SPENDMULTISIG"),S(a,i.P2SH_P2WSH,"SPENDP2SHWITNESS"),S(a,i.P2WSH,"SPENDWITNESS"),a);t.TREZOR_LEFT_BUTTON="trezor_left_button";t.TREZOR_RIGHT_BUTTON="trezor_right_button";t.TREZOR_BOTH_BUTTONS="trezor_both_buttons";t.TREZOR_PUSH_AND_HOLD_BUTTON="trezor_push_and_hold_button";try{T.manifest({email:"help@unchained-capital.com",appUrl:"https://github.com/unchained-capital/unchained-wallets"})}catch(B){console.error("Unable to call TrezorConnect.manifest.")}var I=function(e){function t(e){var n,r=e.network;return f(this,t),(n=g(this,y(t).call(this))).network=r,n.trezorCoin=A(r),n}return P(t,e),E(t,[{key:"messages",value:function(){var e=v(y(t.prototype),"messages",this).call(this);return e.push({version:"One",state:c.PENDING,level:c.INFO,text:"Make sure your Trezor device is plugged in.",code:"device.connect"}),e.push({version:"T",state:c.PENDING,level:c.INFO,text:"Make sure your Trezor device is plugged in and unlocked.",code:"device.connect"}),e.push({state:c.ACTIVE,level:c.INFO,text:"Your browser should now open a new window to Trezor Connect. Ensure you have enabled popups for this site.",code:"trezor.connect.generic"}),e}},{key:"run",value:function(){var e,t=(e=r.mark((function e(){var t,n,a,o,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.connectParams(),n=m(t,2),a=n[0],o=n[1],e.next=3,a(o);case 3:if((i=e.sent).success){e.next=6;break}throw new Error(i.payload.error);case 6:return e.abrupt("return",this.parse(i.payload));case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){h(o,r,a,i,s,"next",e)}function s(e){h(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()},{key:"connectParams",value:function(){return[function(){throw new Error("Override the `connectParams` method on a subclass of TrezorInteraction.")},{}]}},{key:"parse",value:function(e){return e}}]),t}(c.DirectKeystoreInteraction);t.TrezorInteraction=I;var x=function(e){function t(){return f(this,t),g(this,y(t).call(this,{}))}return P(t,e),E(t,[{key:"connectParams",value:function(){return[T.getFeatures,{}]}},{key:"parse",value:function(e){var t=e.major_version,n=e.minor_version,r=e.patch_version,a=e.label,o=e.model,i=e.pin_protection,s=e.passphrase_protection,c="Model ".concat(o," v.").concat(t,".").concat(n,".").concat(r);return i&&(c+=" w/PIN"),s&&(c+=" w/PASS"),{spec:c,model:"Model ".concat(o),version:{major:t,minor:n,patch:r,string:"".concat(t,".").concat(n,".").concat(r)},label:a,pin:i,passphrase:s}}}]),t}(I);t.TrezorGetMetadata=x;var j=function(e){function t(e){var n,r=e.network,a=e.bip32Path,o=e.includeXFP;f(this,t),(n=g(this,y(t).call(this,{network:r}))).bip32Path=a,n.includeXFP=o,n.bip32ValidationErrorMessage={};var s=(0,i.validateBIP32Path)(a);return s.length&&(n.bip32ValidationErrorMessage={text:s,code:"trezor.bip32_path.path_error"}),n}return P(t,e),E(t,[{key:"messages",value:function(){var e=v(y(t.prototype),"messages",this).call(this);return(this.bip32Path||"").split("/").length<4&&e.push({state:c.PENDING,level:c.ERROR,text:"BIP32 path must be at least depth 3.",code:"trezor.bip32_path.minimum"}),Object.entries(this.bip32ValidationErrorMessage).length&&e.push({state:c.PENDING,level:c.ERROR,code:this.bip32ValidationErrorMessage.code,text:this.bip32ValidationErrorMessage.text}),e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export public key'. You may be prompted to enter your PIN.",code:"trezor.connect.export_hdnode"}),e}},{key:"extractDetailsFromPayload",value:function(e){var t=e.payload,n=e.pubkey;if(2!==t.length)throw new Error("Payload does not have two responses.");for(var r="",a=null,o=0;o<t.length;o++)if(t[o].serializedPath===u.MULTISIG_ROOT){var s=t[o].fingerprint;a=(0,i.fingerprintToFixedLengthHex)(s)}else r=n?t[o].publicKey:t[o].xpub;return{rootFingerprint:a,keyMaterial:r}}},{key:"connectParams",value:function(){return this.includeXFP?[T.getPublicKey,{bundle:[{path:this.bip32Path},{path:u.MULTISIG_ROOT}],coin:this.trezorCoin,crossChain:!0}]:[T.getPublicKey,{path:this.bip32Path,coin:this.trezorCoin,crossChain:!0}]}}]),t}(I);t.TrezorExportHDNode=j;var C=function(e){function t(e){var n,r=e.network,a=e.bip32Path,o=e.includeXFP;return f(this,t),(n=g(this,y(t).call(this,{network:r,bip32Path:a,includeXFP:o}))).includeXFP=o,n}return P(t,e),E(t,[{key:"parse",value:function(e){if(this.includeXFP){var t=this.extractDetailsFromPayload({payload:e,pubkey:!0});return{rootFingerprint:t.rootFingerprint,publicKey:t.keyMaterial}}return e.publicKey}}]),t}(j);t.TrezorExportPublicKey=C;var k=function(e){function t(e){var n,r=e.network,a=e.bip32Path,o=e.includeXFP;return f(this,t),(n=g(this,y(t).call(this,{network:r,bip32Path:a,includeXFP:o}))).includeXFP=o,n}return P(t,e),E(t,[{key:"parse",value:function(e){if(this.includeXFP){var t=this.extractDetailsFromPayload({payload:e,pubkey:!1});return{rootFingerprint:t.rootFingerprint,xpub:t.keyMaterial}}return e.xpub}}]),t}(j);t.TrezorExportExtendedPublicKey=k;var R=function(e){function t(e){var n,r=e.network,a=e.inputs,o=e.outputs,i=e.bip32Paths;return f(this,t),(n=g(this,y(t).call(this,{network:r}))).inputs=a,n.outputs=o,n.bip32Paths=i,n}return P(t,e),E(t,[{key:"messages",value:function(){var e=v(y(t.prototype),"messages",this).call(this);return e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Sign ".concat(this.network," transaction'.  You may be prompted to enter your PIN."),code:"trezor.connect.sign"}),e.push({state:c.ACTIVE,level:c.INFO,version:"One",text:"Confirm each output on your Trezor device and approve the transaction.",messages:[{text:"For each output, your Trezor device will display the output amount and address.",action:"trezor_right_button"},{text:"Your Trezor device will display the total output amounts and fee amount.",action:"trezor_right_button"}],code:"trezor.sign"}),e.push({state:c.ACTIVE,level:c.INFO,version:"T",text:"Confirm each output on your Trezor device and approve the transaction.",messages:[{text:'For each input, your Trezor device will display a "Confirm path" dialogue displaying the input BIP32 path.  It is safe to continue',action:"trezor_right_button"},{text:'For each output, your Trezor device will display a "Confirm sending" dialogue displaying the output amount and address.',action:"trezor_right_button"},{text:'Your Trezor device will display the "Confirm transaction" dialogue displaying the total output amount and fee amount.',action:"trezor_push_and_hold_button"}],code:"trezor.sign"}),e}},{key:"connectParams",value:function(){var e=this;return[T.signTransaction,{inputs:this.inputs.map((function(t,n){return function(e,t){var n=(0,i.multisigRequiredSigners)(e.multisig),r=(0,i.multisigPublicKeys)(e.multisig),a=(0,i.multisigAddressType)(e.multisig);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({script_type:w[a],multisig:{m:n,pubkeys:r.map((function(e){return K(e)})),signatures:Array(r.length).fill("")},prev_hash:e.txid,prev_index:e.index,address_n:(0,i.bip32PathToSequence)(t)},e.amountSats&&{amount:(0,o.default)(e.amountSats).toString()})}(t,e.bip32Paths[n])})),outputs:this.outputs.map((function(e){return function(e){return{amount:(0,o.default)(e.amountSats).toFixed(0),address:e.address,script_type:"PAYTOADDRESS"}}(e)})),coin:this.trezorCoin}]}},{key:"parse",value:function(e){return(e.signatures||[]).map((function(e){return"".concat((0,i.signatureNoSighashType)(e),"01")}))}}]),t}(I);t.TrezorSignMultisigTransaction=R;var N=function(t){function n(e){var t,r=e.network,a=e.bip32Path,o=e.multisig,i=e.publicKey;return f(this,n),(t=g(this,y(n).call(this,{network:r}))).bip32Path=a,t.multisig=o,t.publicKey=i,t}return P(n,t),E(n,[{key:"messages",value:function(){var e=v(y(n.prototype),"messages",this).call(this);return this.publicKey?e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to \u2018Export multiple ".concat(this.trezorCoin," addresses\u2019. You may be prompted to enter your PIN. You may also receive a warning about your selected BIP32 path."),code:"trezor.connect.confirm_address"}):e.push({state:c.ACTIVE,level:c.INFO,text:"Confirm in the Trezor Connect window that you want to 'Export ".concat(this.trezorCoin," address'.  You may be prompted to enter your PIN."),code:"trezor.connect.confirm_address"}),e.push({state:c.ACTIVE,level:c.INFO,version:"One",text:"It is safe to continue and confirm the address on your Trezor device.",messages:[{text:'Your Trezor device may display a warning "Wrong address path for selected coin".  It is safe to continue',action:"trezor_right_button"},{text:"Your Trezor device will display the multisig address and BIP32 path.",action:"trezor_right_button"}],code:"trezor.confirm_address"}),e.push({state:c.ACTIVE,level:c.INFO,version:"T",text:"Confirm the addresss on your Trezor device.",messages:[{text:'For each signer in your quorum, your Trezor device will display a "Confirm path" dialogue displaying the signer\'s BIP32 path.  It is safe to continue',action:"trezor_right_button"},{text:"Your Trezor device will display the multisig address.",action:"trezor_right_button"}],code:"trezor.confirm_address"}),e}},{key:"connectParams",value:function(){return this.publicKey?[T.getAddress,{bundle:[{path:this.bip32Path,showOnTrezor:!1,coin:this.trezorCoin,crossChain:!0},{path:this.bip32Path,address:(0,i.multisigAddress)(this.multisig),showOnTrezor:!0,coin:this.trezorCoin,crossChain:!0,multisig:{m:(0,i.multisigRequiredSigners)(this.multisig),pubkeys:(0,i.multisigPublicKeys)(this.multisig).map((function(e){return K(e)}))},scriptType:w[(0,i.multisigAddressType)(this.multisig)]}]}]:[T.getAddress,{path:this.bip32Path,address:(0,i.multisigAddress)(this.multisig),showOnTrezor:!0,coin:this.trezorCoin,crossChain:!0,multisig:{m:(0,i.multisigRequiredSigners)(this.multisig),pubkeys:(0,i.multisigPublicKeys)(this.multisig).map((function(e){return K(e)}))},scriptType:w[(0,i.multisigAddressType)(this.multisig)]}]}},{key:"parse",value:function(t){if(!this.publicKey)return t;var n=s.default.ECPair.fromPublicKey(e.from(this.publicKey,"hex")),r=s.default.payments.p2pkh({pubkey:n.publicKey,network:(0,i.networkData)(this.network)}).address;if(r!==t[0].address&&r!==t[1].address)throw new Error("Wrong public key specified");return t}}]),n}(I);function A(e){return e===i.MAINNET?"Bitcoin":"Testnet"}function K(e){return{address_n:[],node:{depth:0,child_num:0,fingerprint:0,chain_code:"0".repeat(64),public_key:e}}}t.TrezorConfirmMultisigAddress=N}).call(this,n(8).Buffer)},1520:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.KeystoneSignMultisigTransaction=t.KeystoneExportExtendedPublicKey=t.KeystoneWalletPlayer=t.KeystonePSBTPlayer=t.KeystoneDisplayer=t.KeystoneReader=t.KeystoneInteraction=t.KEYSTONE=void 0,n(172),n(284),n(285),n(220),n(484),n(282),n(399),n(400),n(139),n(152),n(140),n(171),n(246),n(174),n(681),n(103),n(954),n(326);var r=n(327),a=n(702),o=n(706),i=n(283);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.KEYSTONE="keystone";var v=null;function y(e){return E({},{state:i.PENDING,level:i.INFO,code:"keystone.command",mode:"wallet"},{},{text:"".concat(e.instructions)},{},e)}var P=function(e){function t(){return d(this,t),p(this,m(t).apply(this,arguments))}return h(t,e),t}(i.IndirectKeystoreInteraction);t.KeystoneInteraction=P;var O=function(e){function t(){var e;return d(this,t),(e=p(this,m(t).call(this))).reader=!0,e}return h(t,e),u(t,[{key:"messages",value:function(){var e=l(m(t.prototype),"messages",this).call(this);return e.push({state:i.ACTIVE,level:i.INFO,code:"keystone.scanning",text:"Scan Keystone QR code now."}),e}},{key:"parse",value:function(e){return function(e){if(console.log(e),!e)return{success:!1,progress:0};if(!e.startsWith("UR"))throw new Error("Unknown QR code");if(null===v&&(v=new o.URDecoder),v.receivePart(e),v.isSuccess()){var t={success:!0,result:v.resultUR(),progress:v.getProgress()};return v=new o.URDecoder,t}if(v.isError())throw v=new o.URDecoder,new Error("Invalid Keystone Wallet QR code, invalid checksum");return{success:!1,progress:v.getProgress()}}(e)}}]),t}(P);t.KeystoneReader=O;var S=function(e){function t(){var e;return d(this,t),(e=p(this,m(t).call(this))).displayer=!0,e}return h(t,e),t}(P);t.KeystoneDisplayer=S;var T=function(t){function n(){return d(this,n),p(this,m(n).apply(this,arguments))}return h(n,t),u(n,[{key:"encode",value:function(t){return new a.CryptoPSBT(e.from(t,"hex")).toUREncoder(400)}}]),n}(S);t.KeystonePSBTPlayer=T;var w=function(t){function n(){return d(this,n),p(this,m(n).apply(this,arguments))}return h(n,t),u(n,[{key:"encode",value:function(t){return new a.Bytes(e.from(t,"hex")).toUREncoder(400)}}]),n}(S);t.KeystoneWalletPlayer=w;var I=function(e){function t(){return d(this,t),p(this,m(t).apply(this,arguments))}return h(t,e),u(t,[{key:"messages",value:function(){var e=l(m(t.prototype),"messages",this).call(this);return e.push(y({instructions:"\u2460Please open Keystone, go to Menu > Multisig Wallet > More > Show/Export  XPUB."})),e.push(y({instructions:"\u2461Click the camera icon above and scan the QR Code of XPUB displays on Keystone"})),e}},{key:"parseResult",value:function(e){var t=e.xpub,n=e.path,r=e.xfp;if(!t)throw new Error("No Extended PublicKey.");if(!n)throw new Error("No BIP32 path.");return e.bip32Path=n,e.xpub=t,e.rootFingerprint=r,Reflect.deleteProperty(e,"xfp"),Reflect.deleteProperty(e,"path"),{success:!0,result:e,type:"json"}}},{key:"parse",value:function(e){var n=l(m(t.prototype),"parse",this).call(this,e),r=n.success,o=n.result;if(!r)return{success:!1};if("crypto-account"===o.type){var i=a.CryptoAccount.fromCBOR(o.cbor),s=i.getMasterFingerprint();if(!s)throw new Error("Invalid Keystone Wallet QR code, no master fingerprint found");var c=s.toString("hex"),u=i.getOutputDescriptors()[0];if(!u)throw new Error("Invalid Keystone Wallet QR code, no expected crypto output found");var d=u.getHDKey();if(!d)throw new Error("Invalid Keystone Wallet QR code, no expected crypto hd key found");var p=d.getBip32Key(),h=d.getOrigin().getPath();return this.parseResult({xfp:c,path:h,xpub:p})}throw new Error("Unknown QR code")}},{key:"parseFile",value:function(e){try{var t=JSON.parse(e);return this.parseResult(t)}catch(n){throw new Error("Unable to parse file")}}}]),t}(O);t.KeystoneExportExtendedPublicKey=I;var x=function(t){function n(e){var t,a=e.network,o=e.inputs,i=e.outputs,s=e.bip32Paths,c=e.psbt;if(d(this,n),(t=p(this,m(n).call(this))).network=a,t.inputs=o,t.outputs=i,t.bip32Paths=s,c)t.psbt=c;else try{t.psbt=(0,r.unsignedMultisigPSBT)(a,o,i)}catch(u){throw new Error("Unable to build the PSBT from the provided parameters.")}return t}return h(n,t),u(n,[{key:"isSupported",value:function(){return!0}},{key:"messages",value:function(){var e=l(m(n.prototype),"messages",this).call(this);return e.push(y({instructions:"Scan this QR code into Keystone and sign the transaction."})),e}},{key:"request",value:function(){return"string"===typeof this.psbt?this.psbt.startsWith("70736274")?this.psbt:e.from(this.psbt,"base64").toString("hex"):this.psbt.toHex()}},{key:"parse",value:function(e){var t=l(m(n.prototype),"parse",this).call(this,e);return t.success?E({},t,{result:(0,r.parseSignaturesFromPSBT)(t.result)}):t}},{key:"parseFile",value:function(e){return{success:!0,result:(0,r.parseSignaturesFromPSBT)(e),type:"psbt"}}}]),n}(O);t.KeystoneSignMultisigTransaction=x}).call(this,n(8).Buffer)},1693:function(e,t,n){},1698:function(e,t,n){},1699:function(e,t,n){},1700:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABRCAYAAABotpveAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGFBJREFUeNrsXX+MHNV9/9oydjBg1q5/gGzqMQchhuLbQ8VuaIh3hUl6tClrIqWpqLg9qaGqVOK7/lEqtfT23FZp/ro73D9aUmnXVpEipHJH0sRqILpxWxEBVW/tKoEUzI2Bi+vY2GtjSBwnTt9n5o1vbm7ej9md2V/3PtL4x+7sm3nvzfvM9/t53+97RO2Anv4cO2YOPPfyOXYUycDAwCACy1pMVBb7c4wdBfz3wFee8r+psmP4iS/cZ5suMjAwaC1h9fRn2J9D7BgJfhwgLB9TnLgc01UGHQvvxWzx/zl0/LB5nuvE8hZ0Hly+2TBZCQDLa5a5iSV2ZEx3GXQgWY3x532aH7P8M4O2trCgU3nuX1Z0SoSFFQTeSqPM2qqYbuvKgV0MWCEL+/344UqH1mmMexJRGGf1GjYdL7RIi1FfrWjSxUdENxADKKfMLK0BTly26dmuAvo1F/E5+rlTX1JFxXeGsMRjfaS5hDWvU+1jR5LuHB7qHCOuCicuowcYtCsydX5nIEA6GpZn3s9wlkyrY9xrQN8y3WjQpqhKvpsyzdNqwurpz7IDwmJZoEek8QYbYaQFYb5gutOgzTAq+Lwm+c4gdcKC+9fTX+ZWVU51euHBT1J2+61J+7yTjLSm2ZE13WrQFjh+GFZUH3kanE3zelyefVc1DRQfjWtYPf1wybR0KpDU2F/+EeV23U35R/88jfrkuJuIhwLxWzXTxQYtJi0Q06BpiFZbWD39BXb48VRSssqsuY4R1eM0882/d8mqCSiSF781ZLrYwGApW1hemEJZx/Xz3b/yV//UJa0mAyQ6xkgL1t9g08MgxHFFNnvr2orf5oTte/xwKaI/ispz58vsDbxgYIEeJQjAjbgo3owwys6GygeOkBdDh2vUGmxT1LXAr2GFrlHlLli6ZSfVN3ANwxHvnrei6sds4D7T6McCr//uwDdJle+38VZaGI+p3X8rYlYG1lQsqwVuYJJktXnDGrp18zpan/HKnDt9gd6eO0tnah+KfoJGgrZlc+JymkRZAxJSV5FnjsSZAKWI+onP9YhzhMSTIAX3+55+3NNwrAdSL8bOb4MyOx+u+mjs1BT1dXL8PAysiUXEoX45jEj6yi/bIS9uKptQ39icyIOQ9WOO5JNZfj86rguqeinG78dg+aOxgnk9kh3TaOMab2OnMZewpx8kNRuXrJLEqmtW0N7cXe7Re/vNLnHh2HnnFvrigzvoofvuoDXXrVKRANzEsSWT5uNNhOjO2KJ9ZjjB6ZRd4s9EMcYdua669jXmB/2M5nUyfFCVNeuAQTSt6S3gPibJ02ub3Y/+fVqa9zmdYj9a/OUzw4lIp/wZzTbO8Od1rD7C8pZ9meUFZFpLVne6BCUCrK7HHrqHdt51i3u+BENLSN8q1vGbsvJB9AhhpIH7KscgLauOZ6+ozNfz6lDPM9CKcTBUZxsXUuzHLCfGbArlZ+MRFkzEnv7JGKyeKu7PWlddQBV8i2u7tUFH38KMYo4MwhhTPITFBK5R1npDNzLIPTdK5DEUl3g/jiXQBhnX6vTkonD5xTTaePkinWreRGyLQExYS5+Qk88i3MBcwwfuvc11H2VWmf+WYKSFGC6LDObdwygy8d7YqocQ+gPEU2gcKj1sJOV6DEj0GhlqXGMaJbXe2M6wIi1Zj8hlVhvqjFCMPD9kutLi9vQIbCxmG2tNyCwPMeJsEx6iWFifWV33b0FWIK09jLwU+la3L2MDAtlGxw8vcw+itaROvC3EemN75ISASFxnLzsg/PbxB74quKc4yb8YMHuv1sGrR15BilF1UMUMQlBey468K97jb6+9Km3Sj32hNhhUDPbdMV8Ug7zuFVe4945xmg+AFVmzVsiFlbex9zwG23gbYQULJWHx5YnJE7vabrCKXMFXf/Aeffe1t+iDDy8py4CF9nvMTYS+pfHGn+2yZZpHOYHMvyERXuA9hMPaD7pnXVkSMslHzkx5n+UDb2ibn7s3xmyhwwfqlKLsxS7LYkuxqBispYg61FwCbi1pVXibVUP3VnGJXGYtL7Ywc5JnJbqOXkiKzNIqSC3beQxzkqpFtPEwKVKWlnOdSqklWFs2tcYlXBktoM/9+Dy97pymr794zCWvS5d/rnQtoW8NPHSPK9Ar/PJyl2hbjnSK3yMtXdLYrRjoNcl1anxQ5flbNa6bJS7f+3xC0Z/+YM1KXsq2cqreIy2nBf1Yk75cvPasSlw2ldXpX0Nl4VgSF3l3gBAtSRuPK9q4JGtjZRxWbtcOGvnyo3TklWNUevrZpvcUiIkY0YQBF2/uNLlE9er336U3nB8zQrpFqXdB30IIBOK3/qPqyOK3ugEHNc6pCh6wMGFnJaSoJqD6Aw5rGuXrlm1JvpuI4ZY1e4ZZJ+j2BR3DQ/LiqS64hkfufiBwltRhCVmNNj4Y47mNtx4WLKqxv3jcjVQHQFjthBuu+9iC/19gruFLzEV8nRGXzqwi9C3MJsI6A+F1KXQsmaOkN8EicwfThA4Z6UbQZxMgvSMtIKwTCZYlln28GWCLNLNYBM9HVuHa6z63eoSFqHRYVEPFzlytBZYT3ESENXyKEZciJks1i2igZ520FrDeevobLUN3MLUiod5uwjVyDdxbNUCqmQQIi7Rdwuz2no4lqyCgb709d456P36zq121EXo7tEmrmi5HZwIukJ7bupRXCvXJ6Sh3IasxSclqlLRWdHPrBvUtxGW1iTWl88C3I6nV6nCz2nHAjUjqoUNYD3f4sHA0+7pKflKyR05OAuVnNa1FYRsvpyUA6FuT9vfdQycMInXTOyoyeP5Nj7dQO5q4R4QE7EWOqyyYghuULKt7awfriEYdMm3aN0n0I4AZvG2hOLSpmMnqMtLfp9nGxSVNWD6gbx389n8vCIO49LOft2JwjEk6a7JNm29KOtjlOWX4zs8rm9UiuDTgDTxH6K6ok6Ynu8AllPVjUat+CDIX5YJ6M43VBtpYGg+6pAjLB9zEQ9+aYa7iaTpz/qNWvMmK7tr3ntVh8bXw8QDMtK2L5ekVtsTNnV5kQXmpXkPkxfplAueOuUn1quTcdDCh6JfJReQ7H1yd6/iH3yOUiqIfi4L8wCzPMfZWAREnsE9oPPtRbTytsmBX0BIFLCyEQaT8JitLXcPOGwDDnFRFD/sIza+ZVFOQr8W1imbvHlPhrokl+L7gHt7aTNWuIKnFGOX1zAj60SckO9Rf1iJrCLOz4YBb/L+nX7YGW468pYxit/GStLCa+CYb77I66a5PbmlYiq3ZOcbrF506ZLqUrHzXWKcNcoHDErpw0XJAKm1sCCv9N1m1yx72CjW+qQJIIx975dHk6mDTUt8YwsvLVCVO6/Zl09o4dcK6sflrubeblaVaUSDqARhs83pVSJ50LIND7bDN1XzScNwBO9hFz6ffj3adJeB3fcK+nC8/sTZOlbCQ3lN85MHop3bu1NIhLW+ZlVGNAV7hD0ClA+plu0vJeA+XDvl47qS3/Ey1TergLbuj1zd2x/RNXDffW94F5K2rJ07RfCK7o2HNxmnjvKyNUxPdZbvlgKyc9xojrO1bN3RWDqCXhV4KJJVaocFshxJc85olVyXn6hBDhRpJ/fAergqfVYpKktUNPBymaBFY9+1cXxt4ba7qm/D9p9U3rezHqauE5S3wF17ZohZoi1rMshNr42WsgF8GP8DqDNPP/t1iMebpZ7VWawhulioUdgRlHfjKU5Hnf6lwb2ROIHbL+e5rx5VLy9SJfNO3BjMwMJAiMQtLN2m6duFDGq/Em8menTsXuWwM1rXavHENs7Teo6NvnjS9aWDQ5UhEwwJJzdoVraTp/KNPuqQVB6/+QOz6wfLCcjJYmM+svGBgYCwsIeA+Ygt6uIEqgKT2/vFfU/X1t2NfB7mASKeRrbqAhfmwfjvSb7B08oXW5wwaxATfCCQY0Ogwt7xiWsagIcLC7B/cv+Ije7TOn3rxezT8t880JLRDYF+zepVyRVFYWdifEC4iXMWU9C2D5MkKRLUoj4x9jqh06Ik100oGsQmrxIhqH3P9dLafhzU1/DfPkK2xWumtv7qFLjNyuUay4B5SaeZOn9damA+7Q4PcjL7VMRAlvWJGCfmIpQ4kYX+L9igMMxKumm5PibBAUgOf30PWZvVmFHD/MBOoI66vX7eWPn3vPbT5po10wnmH1q7N0Np1GVq+PFpe8xfm23nXFpeUZPD1rSw7zyO7C6bH23Ng50i+SsDuDq2aLPUkY3o+AcISWUOwqHSsqsrzLzGr6h+VwvqqlSvpfkZU22/bdvWzK7+4Qu+fOUsXzn9Av7J+Ha258YbI38LNwwYSsJx0FuYz+paBQRdbWCAdXX1qnuj+xyUqHVF9V/Zu6t3+cZe0onD58mX6v5OnGHFdcInr2tXXRp7nL8yH8Ib7ey2XmGTw9S0I+Ef/96TRt9oEiHdjVpZD4gTbgyGLDOcVRe9MVp5jWnUJERaIp7Dnk1oWFaLW4f5V/uUl5bnQqWBVrbleL7/wo49+Qh+9M8csrTW0cdN6oZuIAFIc2Ci19/ablPoWZhtx3n8yKw0upkFbAKkh0xGuUiViphCEJVoh1KbW7B1o0CrCgjuHeKnJf3hKqln5OpXK/QNB7fnN33B1qnoAS+vixYuuvgWLSwTMJMJygm6lmk0EqcGdxHZhXbzNVydZWVVmOW2jhate2ibbwEBJWABcu77P/YkbDBoU20FOUy99zyUrVZgCXL6dvb9G2TvvaPhGg/rWBmZtXS+w0vyF+apvesRlgkk7irS6bw0xg+YQlk9OJc0cwjBAUiArkU4VxuZNa2nu1DnledC3fvTeSVq9+lqXuFatitatsKMz9C3sT4gdoVX6loGBQYcTVj2A2wf3T6VT3b51E+3etZ123HHLgs/P1i7SmydO0eF/P+b+WwToWydm33VDIOAmqsIgsD+hjr6VJgKR3FgaOJwN7+sviM05GCdGh5e7j8SrJaDcCYjR7Fy4XANRRjX7fjhUrjCOiJ2b5+cUeX1ytDi7H9fFFupTqsBPyX1dvZbuu5KVFf7MkQnxoX6pt/3i3qdBKwkLBAVBHcK6ypL6/Gfvpdu2Rmtj6zLX0y4cvT30ytHj9Px3/ot+8tOfCcs7d7ZG5/lsIjQukZvo70/4qV7LnVVsAVGNkGT7Io4cP4bYbzBIpMGF7JwMJxRZuf5yHihzNHAdHQjjiDiZlUm8FLK/JRaOMVyb1UXm7lmUzJLEUQSLepcE7Yd+GdJsP9z/eerWpZOXAmHB5fPdPxmu/dhKeuQzv+4SkS5wLiww+9U36PCRo8LzoG+dPnWGamfP0003b5SGQXz75R+6uhb0rfWZ65pBVkU+iOIGCmJQzLDfD0bl03HCmI5Z7gglt9V6nGtnOGn1srq0xYqdvP0mSRxKEYUhas1W9QZJEBaCPmFVqXSq/t29lNv5CZe04gK/6f/0Dtq141bX2jr2w3el+ta778y5+tammzcJ03wQQPr1F4+5+tbKFF1ETlblBosps3JqbKBPNUhWQfJIAvWUU4S71mrS4hZvq9vPoA7UtbwMdKrf/9xvuVqVjKxgHZWe2OsSTj1kFXYV//ALOfryY59x3UoZoG/NHnfcWcUrV64Iz4O+lVaeIU83KSdUXJm7L74b08kbeoK0hlp8D2VDPEvAwoJOtbP37gXpNJGEptCpFlk8p87R+7WLtIX9DsQkA8p88vHf0dK3QFjnztVo48YNwjSflAeFDDZ5gnSVuyXIlysqtKQp7pbI3Bh/o8wj/N/43UBM1ycu/Os5XO95WKHzjDDSqqS0AkM1wm1zQlZvTtF+U7xvapr1MWgnwvJ1Klk6je++xdGpQFTP/9tr7qygD/wWZagssqC+Zb/yupC4oG8hzccjrvVCfSsFV9CSDIjBoIvnD3r2uwlaLGTjvOHALNeAYrCGl2IBMZa4VTOWcFVr/HrV0PXGuYUpsgQznJzTiLkaVgSb7lO0397QjKJfnyTce4O0XUJYU19k7p8qpiq3a7vr/umQFcjl2W+8TF995l8XkBUAy6l0YNINa1DB17ee/NJvLwqPCOPSTy+5+taP5k66y9ikDNmgiCIrF3zg+3vF2ZwMrg4gTgIiInRIsm4Un6FLeuPSvGgWk5OGTKsaaJF2lVWQryOoD6zIYUMZbUpYWPblkc8+oIypQjwViErHKnJfV8waAiGBmGSEhllBnCcT2cP61qO/e5/y3IsffKilbzUwKDKSQWGLyCpEWn2I6YmwFGRuyaiGizVOyc1yVVSxYryuonOyLXjeG2o/TvqOoY02IixYUSApiOqy3D+QBATwJ9ih0p2At5glBQJS6U5BIHD0n56z6cCh72hFwcO6w4ykDkBYCDxFqk/CkA3EF3QKkAQ5bpX8pqJRrm+5JYGDmue9ICH3ZutCluS7OHvyGbSDhqVa9iXohsEF1CUduH9h1y8O8Fu4jzr6Fu4N1pssSt6H7jI2CaKa0oCLUy4C2gpNrAsIcqTdB0KMJWnOG9poMWHpLvsCktINUYAVpQr4jAsQEVxE/z5EcMV45nrqIriMDYjrmham7xgYGEgICzqVzrIv0Kp0gz91Qg7qha9v4RqwtqLE9nU31hfBHlzGZnU61pbV4O+dOtxQbbeyDtfX1jyv7QHt0Wx00f5Yzsgqr2Peu27Z177lzt6JiOgt7rrBBUyDrMKu5lsCN1NHUxPhyi+u1N4/c3bwz4oP2HUWIWvLhxus9gnJgNN18woJdYFuXXZL3DC7yc+7k0C7PGxoo4WEdeCvHrPZ0Ufz0+lK6wbEFZy983WqpzXF8UaBwFQI/rCwotDAPWDafxtrj0oDWkhNQloFnlYjfdOz4xw7ynwaXpcM92lYEYjFSirCu+hH30uul5MQQSt2jJFdc0SjPoVOsRi7lrCudoY3SLeRRqxOcPYOrh8ITBamkBTgjiJ0AZHusij6Y2+8E7foKU5UJXYk4RbIZtCmRaTFB4yf41YkL/m55A8kHiYgur8cSE4y2FBekoGjGV6XjOB6fnKxCGlZV1nJy6QqsbLwcihL6gPyjRs4KnuWcoZ+4mNZZMfuP2Txh7vQLjeqm0ANNxGWXow37jCszKT1EPbXrMKaqYSILcetpIzgwXcDTkFgJJ91w4CcCFgTGe7GFBW3bYfXc+KDdFpjUE6ECAjXU+ULbgvOzMnqxc5bFtHGv5Tcz16+sYW/xE3GX9pGI2K93var5z79PnVj98xy0GpEToexAey4nb7/kP9WsVp1gxDV4frp6FJwBb/2nFaf42EZZfVMZTleuIVYFkZhYRR1BkGEOzMuITbfUhhrYhf5a0rFCV0YTWBnm6rAmvItvzAJjfO+qfDdpLNNaj/ZfU4G7tNO0ersPpdQQFzQt+AmDlOT1wHydSpEsOuQFTQ1WFYaYv84d/9SXTucu2+VhIq7mkvINbK9HfzMYWXTUgLlTMQ41woFqQ428XmeMDTTJMIKEJc7yKkJGwTo6lRBqwpaGjQ1BVnZnKiGE9KpdEgLA6PR/L3RcBR7IE+vnnq0cureTc5OqG0rFE+4Hwj81r+P1Nsvxn2a5W6SIixOWjUMdk5cqZiu0KmSSKCO0CTy7N7z3NVtKrg1ka+jzRyuxZQkAyEfc9D6RJeI1Ufx8urG2T33JRzrFKddC6H2c3M2Y/ZLtc720+knM/uogdgh3XzQ55/Yf6jAfX2r0ZtAUCqsKt34KcSCyZaUCbwJR9N2/TRJy9UnuFuCN31O0G5XN27QzA10Bx2fbvfLjXpTwz2d4EK0KOAzbpiBP+CL/NpZwTk2v7aK3Jy4pM7JLx/YCKMgaNOpKEuX31M+0C8FSfu9wPWvbJ332cfvc5+krQwUWNbwYNx/qERyEVgIENQfMKLSXegPM4D/zKwqjTxBDPamuX71gj/8mYC2U0ugzOBqEU4j4rZilnDRahIBnagWZ9efhNvUCrwMYrdpqP1Sq0ew783sYBMJi5OWzu4tC4B8QFHgZxgxEqhtTlTmbZXMoIpFWAYGbecSCtxEL6Zk/6EJTlw5JbMwlw4Cuyy2yo2s5+6fhjsBojJLfxgYGMLSJi5vid79h2BpjZBC35IlMYOkZHmLAX1iAhHqpisNDLofy9MolKf5QJAdJcU0cDDNx09oxsyfxmoP7jUMWRkYLB0sS/sCPM1HZ9djXdjkzf7ZpvvShdGwDLraJRRYWw55+hby5qBv1Rtv4nCiqphuMzAwhJU2ceFt3Mf1rbhbt8O1HG/3MIUuhEPiSH3HNI9B17mEAjcRZDVE6oRZd0++VkSoGxgYGMIKE5dF0cvYpLLsi4GBgSGsJIgrR/NpPsNGpzIwMIjC/wswAA64k7aIrI+oAAAAAElFTkSuQmCC"},1702:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"START_TEST_SUITE_RUN",(function(){return qe})),n.d(r,"SET_CURRENT_TEST_RUN",(function(){return Ge})),n.d(r,"startTestSuiteRun",(function(){return Ve})),n.d(r,"setCurrentTestRun",(function(){return Xe}));var a={};n.r(a),n.d(a,"SET_KEYSTORE",(function(){return Je})),n.d(a,"SET_KEYSTORE_NOTE",(function(){return Ze})),n.d(a,"SET_KEYSTORE_STATUS",(function(){return Qe})),n.d(a,"setKeystore",(function(){return $e})),n.d(a,"setKeystoreNote",(function(){return et})),n.d(a,"setKeystoreStatus",(function(){return tt}));var o={};n.r(o),n.d(o,"START_TEST_RUN",(function(){return rt})),n.d(o,"END_TEST_RUN",(function(){return at})),n.d(o,"RESET_TEST_RUN",(function(){return ot})),n.d(o,"SET_TEST_RUN_NOTE",(function(){return it})),n.d(o,"startTestRun",(function(){return st})),n.d(o,"endTestRun",(function(){return ct})),n.d(o,"resetTestRun",(function(){return ut})),n.d(o,"setTestRunNote",(function(){return lt}));var i=n(0),s=n.n(i),c=n(36),u=n.n(c),l=n(109),d=n(20),p=n(1048),m=n.n(p),h=n(1049),f=n(11),b=n(18),E=n(14),g=n(13),v=n(1092),y=n(1095),P=n(70),O=n(1753),S=n(1752),T=n(344),w=n(51),I=n(55),x=n(26),j=n(307),C=n(376),k=n(308),R=n(96),N=n(589),A=n(749),K=n(1097),B=n(554),_=n(1744),D=n(1739),M=n(1740),U=n(1741),F=n(1742),L=n(1743),z=n(1745),W=n(1746),H=n(35),q=function(){return s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Disclaimer"}),s.a.createElement(k.a,null,s.a.createElement("small",null,"This application is in \u201calpha\u201d state and is presented for evaluation and testing only. It is provided \u201cas is,\u201d and any express or implied warranties, including but not limited to the implied warranties of merchantability and fitness for a particular purpose, are disclaimed. By using this application, you accept all risks of such use, including full responsibility for any direct or indirect loss of any kind resulting from the use of this application, which may involve complete loss of any Bitcoin or other coins associated with addresses used with this application. In no event shall Unchained Capital, Inc., its employees and affiliates, or developers of this application be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this application, even if advised of the possibility of such damage.")))},G=function(){return s.a.createElement("div",null,s.a.createElement(w.a,{mt:4,mb:2},s.a.createElement(I.a,{variant:"h2"},"Welcome to Caravan!")),s.a.createElement(x.a,{container:!0,spacing:3},s.a.createElement(x.a,{container:!0,item:!0,md:8,spacing:2,direction:"column"},s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Get Started"}),s.a.createElement(k.a,null,s.a.createElement(w.a,{mb:3},s.a.createElement(I.a,null,"Start using caravan by choosing to either make a multisig wallet or fully stateless address.")),s.a.createElement(x.a,{container:!0,alignItems:"center",justify:"center",spacing:3},s.a.createElement(x.a,{item:!0,xs:10,md:4},s.a.createElement(R.a,{variant:"contained","data-cy":"setup-wallet-button",size:"large",color:"primary",href:"#/wallet",startIcon:s.a.createElement(D.a,null)},"Wallet")),s.a.createElement(x.a,{item:!0,xs:10,md:4},s.a.createElement(R.a,{variant:"contained","data-cy":"setup-address-button",size:"large",color:"default",href:"#/address",startIcon:s.a.createElement(M.a,null)},"Address")))))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Stateless Multisig Coordinator"}),s.a.createElement(k.a,null,s.a.createElement("p",null,"Caravan makes bitcoin multisig custody easier and safer through transparency and standards."),s.a.createElement("p",null,"Caravan is a ",s.a.createElement("strong",null,"coordination software")," for multisig addresses and wallets. Caravan can be used to build a multisig wallet derived from xpubs, or individual multisig addresses derived from pubkeys. In both cases, in order to transact from the wallet or address, you must also have your private keys and BIP32 paths."),s.a.createElement("p",null,"Caravan is ",s.a.createElement("strong",null,"stateless"),". It does not itself store any data outside your current browser session. You must safekeep the wallet details (xpubs, BIP32 paths) and addresses (redeem scripts, BIP32 paths) that you create.")))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Keys"}),s.a.createElement(k.a,null,s.a.createElement("p",null,"All bitcoin is ultimately protected by private keys."),s.a.createElement("p",null,"Your private key may live on a piece of paper, a hardware wallet, some software on a laptop, or even just in your mind. Caravan, being stateless, does not store or ask for your private key but it can talk to hardware devices or software applications which do."),s.a.createElement("p",null,"Caravan supports entering public keys and signatures via text, so any wallet which can export such data can be made compatible with Caravan.")))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Consensus"}),s.a.createElement(k.a,null,s.a.createElement("p",null,"In order to look up wallet addresses and their balances, and broadcast transactions, Caravan requires knowledge of the constantly changing bitcoin network."),s.a.createElement("p",null,"Running a full bitcoin node is the most private way to determine the current state of the bitcoin network. Caravan can be easily configured to use your own node for consensus information and broadcasting transactions."),s.a.createElement("p",null,"If you don't want to or cannot run your own full node, Caravan defaults to using the freely available API at",s.a.createElement("code",null," blockstream.info"),"."))))),s.a.createElement(x.a,{container:!0,item:!0,md:4,spacing:4,direction:"column"},s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Learn More"}),s.a.createElement(k.a,null,s.a.createElement(N.a,null,s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(U.a,null)),s.a.createElement(B.a,null,Object(H.b)("https://unchained-capital.com/blog/gearing-up-the-caravan/","Blog Post"))),s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(F.a,null)),s.a.createElement(B.a,null,Object(H.b)("https://www.youtube.com/playlist?list=PLUM8mrUjWoPRsVGEZ1gTntqPd4xrQZoiH","Video Tutorials"))),s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(L.a,null)),s.a.createElement(B.a,null,Object(H.b)("https://github.com/unchained-capital/caravan","Source Code"))))))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Supported Devices"}),s.a.createElement(k.a,null,"Caravan has been ",s.a.createElement("a",{href:"#/test"},"tested")," with the following hardware wallets:",s.a.createElement("ul",null,s.a.createElement("li",null,Object(H.b)("https://shop.trezor.io/product/trezor-one-white","Trezor One")),s.a.createElement("li",null,Object(H.b)("https://shop.trezor.io/product/trezor-model-t","Trezor Model T")),s.a.createElement("li",null,Object(H.b)("https://www.ledger.com/products/ledger-nano-s","Ledger Nano S")),s.a.createElement("li",null,Object(H.b)("https://www.ledger.com/products/ledger-nano-x","Ledger Nano X")),s.a.createElement("li",null,Object(H.b)("https://coldcardwallet.com","Coldcard Mk2 & Mk3")),s.a.createElement("li",null,Object(H.b)("https://keyst.one","Keystone"))),"And web browsers:",s.a.createElement("ul",null,s.a.createElement("li",null,Object(H.b)("https://www.google.com/chrome/","Chrome")),s.a.createElement("li",null,Object(H.b)("https://www.mozilla.org/en-US/firefox/new/","Firefox"))),"Seeing a bug or need a feature?"),s.a.createElement(_.a,null,s.a.createElement(R.a,{href:"https://github.com/unchained-capital/caravan/issues"},s.a.createElement(z.a,null)," \xa0 Report Issue"),s.a.createElement(R.a,{"data-cy":"run-tests-button",href:"#/test"},s.a.createElement(W.a,null)," \xa0 Run Tests")))))),s.a.createElement(w.a,{mt:2},s.a.createElement(q,null)))},V=n(1051),X=n(2),Y=n(359),J=n(565),Z=n(361),Q=n(5),$=n(126),ee=n(135);var te=Object(ee.b)({setPublicKeyImporterName:"SET_PUBLIC_KEY_IMPORTER_NAME",resetPublicKeyImporterBIP32Path:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterBIP32Path:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",setPublicKeyImporterMethod:"SET_PUBLIC_KEY_IMPORTER_METHOD",setPublicKeyImporterPublicKey:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",setPublicKeyImporterFinalized:"SET_PUBLIC_KEY_IMPORTER_FINALIZED",movePublicKeyImporterUp:"MOVE_PUBLIC_KEY_IMPORTER_UP",movePublicKeyImporterDown:"MOVE_PUBLIC_KEY_IMPORTER_DOWN"}),ne=te.setPublicKeyImporterName,re=te.setPublicKeyImporterBIP32Path,ae=te.resetPublicKeyImporterBIP32Path,oe=te.setPublicKeyImporterMethod,ie=te.setPublicKeyImporterPublicKey,se=te.setPublicKeyImporterFinalized,ce=te.movePublicKeyImporterUp,ue=te.movePublicKeyImporterDown,le=n(256),de=n(302),pe=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isInConflict=function(){var t=e.props.publicKeyImporters;return Object.values(t).some((function(e){return e.conflict}))},e.publicKeyCount=function(){var t=e.props,n=t.publicKeyImporters,r=t.addressType;return Object.values(n).filter((function(e){var t=e.publicKey;return e.finalized&&!Object(Q.validatePublicKey)(t,r)})).length},e.publicKeysAreCanonicallySorted=function(){var t=e.props.publicKeyImporters,n=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})),r=Object.values(t).map((function(e){return e.publicKey})).filter((function(e){return""!==e})).sort();return n.filter((function(e,t){return e===r[t]})).length===n.length},e.canonicallySortPublicKeys=function(){(0,e.props.sortPublicKeyImporters)()},e.generateMultisig=function(){for(var t=e.props,n=t.network,r=t.publicKeyImporters,a=t.totalSigners,o=t.requiredSigners,i=t.addressType,s=t.setMultisigAddress,c=[],u=1;u<=a;u+=1)c.push(r[u].publicKey);var l=Q.generateMultisigFromPublicKeys.apply(void 0,[n,i,o].concat(c));return s(l.address),l},e.downloadAddressDetails=function(t){t.preventDefault();var n=e.generateMultisig(),r=e.addressDetailsText(n),a=e.addressDetailsFilename(n);Object(H.a)(r,a)},e.addressDetailsFilename=function(t){var n=e.props,r=n.totalSigners,a=n.requiredSigners,o=n.addressType;return"bitcoin-".concat(a,"-of-").concat(r,"-").concat(o,"-").concat(t.address,".txt")},e.addressDetailsText=function(t){var n=e.props,r=n.addressType,a=n.network,o=n.totalSigners,i=n.requiredSigners,s=Object(Q.multisigRedeemScript)(t),c=Object(Q.multisigWitnessScript)(t),u=s?"Redeem Script: ".concat(Object(Q.scriptToHex)(s)):"",l=c?"Witness Script: ".concat(Object(Q.scriptToHex)(c)):"",d=s&&c?"\n\n":"";return"Address: ".concat(t.address,"\n\nType: ").concat(r,"\n\nNetwork: ").concat(a,"\n\nQuorum: ").concat(i,"-of-").concat(o,"\n\nBIP32 Paths:\n").concat(e.publicKeyImporterBIP32Paths(),"\n\n").concat(u).concat(d).concat(l,"\n")},e.publicKeyImporterBIP32Paths=function(){for(var t=e.props.totalSigners,n=[],r=1;r<=t;r+=1)n.push(e.publicKeyImporterBIP32Path(r));return n.join("\n")},e.publicKeyImporterBIP32Path=function(t){var n=e.props.publicKeyImporters[t],r="text"===n.method?"Unknown (make sure you have written this down previously!)":n.bip32Path;return"  * ".concat(n.name,": ").concat(r,": ").concat(n.publicKey)},e.title=function(){var t=e.props,n=t.totalSigners,r=t.requiredSigners,a=t.addressType;return s.a.createElement(x.a,{container:!0,justify:"space-between"},s.a.createElement(x.a,{item:!0},r,"-of-",n," Multisig ",a," "),s.a.createElement(x.a,{item:!0},s.a.createElement("small",null,"Public Keys: ".concat(e.publicKeyCount(),"/").concat(n))))},e}return Object(b.a)(n,[{key:"body",value:function(){var e=this.props.totalSigners;if(this.publicKeyCount()===e){var t=this.generateMultisig(),n=this.publicKeysAreCanonicallySorted();return s.a.createElement("div",null,this.isInConflict()&&s.a.createElement(de.a,null),!n&&s.a.createElement(x.a,{container:!0,justify:"space-between"},s.a.createElement(x.a,{item:!0,md:8},s.a.createElement($.a,{error:!0},"WARNING: These public keys are not in the standard"," ",Object(H.b)("https://github.com/bitcoin/bips/blob/master/bip-0067.mediawiki","BIP67 order"),".")),s.a.createElement(x.a,{item:!0,md:4},s.a.createElement(R.a,{variant:"contained",color:"primary",onClick:this.canonicallySortPublicKeys},"Sort Public Keys"))),s.a.createElement(w.a,{mt:2},s.a.createElement(le.a,{multisig:t})),s.a.createElement(w.a,{mt:2},s.a.createElement(R.a,{variant:"contained",color:"primary",onClick:this.downloadAddressDetails},"Download Address Details")))}return s.a.createElement("p",null,"Once you have imported all ".concat(e," public keys, "),"your address details will be displayed here.")}},{key:"render",value:function(){return s.a.createElement(j.a,null,s.a.createElement(C.a,{title:this.title()}),s.a.createElement(k.a,null,this.body()))}}]),n}(s.a.Component);var me={sortPublicKeyImporters:function(){return{type:"SORT_PUBLIC_KEY_IMPORTERS"}},setMultisigAddress:function(e){return{type:"UPDATE_MULTISIG_ADDRESS",value:e}}},he=Object(d.b)((function(e){return Object(X.a)(Object(X.a)({},e.settings),e.address)}),me)(pe),fe=n(7),be=n(370),Ee=n(731),ge=n(738),ve=n(1026),ye=n(1760),Pe=n(1761),Oe=n(48),Se=n(441),Te=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.state,t=e.error,n=e.publicKey;return s.a.createElement(w.a,{mt:2},s.a.createElement(Se.a,{fullWidth:!0,name:"publicKey",label:"Public Key",value:n,onChange:r.handleChange,error:r.hasError(),helperText:t}),s.a.createElement(w.a,{mt:2},s.a.createElement(R.a,{variant:"contained",color:"primary",size:"large",onClick:r.import,disabled:""===n||r.hasError()},"Add Public Key")))},r.import=function(){var e=r.props,t=e.validatePublicKey,n=e.onImport,a=r.state.publicKey,o=t(a);o?r.setError(o):n({publicKey:a})},r.hasError=function(){return""!==r.state.error},r.setError=function(e){r.setState({error:e})},r.handleChange=function(e){var t=e.target.value,n=(0,r.props.validatePublicKey)(t);r.setState({publicKey:t,error:n})},r.state={error:"",publicKey:""},r}return n}(s.a.Component),we=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.state,t=e.bip32Path,n=e.extendedPublicKey,a=e.extendedPublicKeyError,o=e.bip32PathError,i=e.conversionMessage;return s.a.createElement("div",null,s.a.createElement(w.a,{mt:2},s.a.createElement(Se.a,{fullWidth:!0,name:"extendedPublicKey",label:"Extended Public Key",value:n,onChange:r.handleExtendedPublicKeyChange,error:r.hasExtendedPublicKeyError(),helperText:a})),""!==i&&s.a.createElement(w.a,{mb:2},s.a.createElement($.a,null,i,", this may indicate an invalid network setting, if so correct setting, remove key and try again.")),s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0},s.a.createElement(x.a,{item:!0,md:10},s.a.createElement(Se.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path (relative to xpub)",type:"text",value:t,onChange:r.handleBIP32PathChange,error:r.hasBIP32PathError(),helperText:o}),s.a.createElement($.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),s.a.createElement(x.a,{item:!0,md:2},!r.bip32PathIsDefault()&&s.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:r.resetBIP32Path},"Default"))),s.a.createElement(w.a,{mt:2},s.a.createElement(R.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:r.import,disabled:""===n||r.hasError()},"Import Public Key"))))},r.import=function(){var e=r.props,t=e.network,n=e.validatePublicKey,a=e.onImport,o=r.state,i=o.extendedPublicKey,s=o.bip32Path,c=Object(Q.deriveChildPublicKey)(i,s,t),u=n(c);u?r.setState({bip32PathError:u}):a({publicKey:c,bip32Path:s})},r.hasBIP32PathError=function(){return""!==r.state.bip32PathError},r.hasExtendedPublicKeyError=function(){return""!==r.state.extendedPublicKeyError},r.hasError=function(){return r.hasBIP32PathError()||r.hasExtendedPublicKeyError()},r.handleBIP32PathChange=function(e){var t=e.target.value,n=Object(Q.validateBIP32Path)(t,{mode:"unhardened"});r.setState({bip32Path:t,bip32PathError:null!==n&&void 0!==n?n:""})},r.bip32PathIsDefault=function(){return"m/0"===r.state.bip32Path},r.resetBIP32Path=function(){r.setState({bip32Path:"m/0",bip32PathError:""})},r.handleExtendedPublicKeyChange=function(e){var t=r.props.network,n=e.target.value,a=n;if(""!==Object(Q.validateExtendedPublicKeyForNetwork)(n,t))try{a=Object(Q.convertExtendedPublicKey)(n,"testnet"===t?"tpub":"xpub")}catch(s){return void r.setState({extendedPublicKey:n,extendedPublicKeyError:s.message,conversionMessage:""})}var o=Object(Q.validateExtendedPublicKey)(a,t);if(""===o){var i=a===n?"":"Your extended public key has been converted from ".concat(n.slice(0,4)," to ").concat(a.slice(0,4));r.setState({extendedPublicKey:a,extendedPublicKeyError:"",conversionMessage:i})}else r.setState({extendedPublicKey:n,extendedPublicKeyError:o,conversionMessage:""})},r.state={bip32Path:"m/0",extendedPublicKey:"",extendedPublicKeyError:"",bip32PathError:"",conversionMessage:""},r}return n}(s.a.Component),Ie=n(1718),xe=n(253),je=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).interaction=function(){var e=r.props,t=e.network,n=e.defaultBIP32Path;return Object(fe.ExportPublicKey)({keystore:fe.HERMIT,network:t,bip32Path:n})},r.render=function(){var e=r.state.publicKeyError;return s.a.createElement(Ie.a,null,s.a.createElement(xe.a,{startText:"Import Public Key",interaction:r.interaction(),onStart:r.handleReaderStart,onSuccess:r.handleReaderSuccess,onClear:r.handleReaderClear}),s.a.createElement($.a,{error:!0},e))},r.setError=function(e){r.setState({publicKeyError:e})},r.handleReaderStart=function(){(0,r.props.disableChangeMethod)()},r.handleReaderSuccess=function(e){var t=r.props,n=t.validatePublicKey,a=t.onImport,o=t.enableChangeMethod,i=e.pubkey,s=e.bip32Path;o();var c=Object(Q.validateBIP32Path)(s);if(c)r.setError(c);else{var u=n(i);u?r.setError(u):a({publicKey:i,bip32Path:s})}},r.handleReaderClear=function(){var e=r.props.enableChangeMethod;r.setError(""),e()},r.state={publicKeyError:""},r}return n}(s.a.Component),Ce=n(10),ke=n.n(Ce),Re=n(16),Ne=n(66),Ae=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).interaction=function(){var e,t,n=r.props,a=n.network,o=n.method,i=n.defaultBIP32Path;return Object(fe.ExportPublicKey)({network:a,keystore:o,bip32Path:null!==(e=null===(t=r.state)||void 0===t?void 0:t.bip32Path)&&void 0!==e?e:i})},r.render=function(){var e=r.state,t=e.status,n=e.bip32Path,a=e.publicKeyError,o=r.interaction();return t===fe.UNSUPPORTED?s.a.createElement($.a,{error:!0},o.messageTextFor({status:t})):s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0},s.a.createElement(x.a,{item:!0,md:6},s.a.createElement(Se.a,{fullWidth:!0,label:"BIP32 Path",value:n,onChange:r.handleBIP32PathChange,disabled:t!==fe.PENDING,error:r.hasBIP32PathError(),helperText:r.bip32PathError()})),s.a.createElement(x.a,{item:!0,md:6},!r.bip32PathIsDefault()&&s.a.createElement(R.a,{type:"button",variant:"contained",size:"small",onClick:r.resetBIP32Path,disabled:t!==fe.PENDING},"Default"))),s.a.createElement($.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),s.a.createElement(w.a,{mt:2},s.a.createElement(R.a,{type:"button",variant:"contained",color:"primary",size:"large",onClick:r.import,disabled:r.hasBIP32PathError()||t===fe.ACTIVE},"Import Public Key")),s.a.createElement(Ne.a,{messages:o.messagesFor({state:t}),excludeCodes:["bip32"]}),s.a.createElement($.a,{error:!0},a))},r.import=Object(Re.a)(ke.a.mark((function e(){var t,n,a,o,i,s,c,u;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.enableChangeMethod,a=t.disableChangeMethod,o=t.validatePublicKey,i=t.onImport,s=r.state.bip32Path,a(),r.setState({publicKeyError:"",status:fe.ACTIVE}),e.prev=4,e.next=7,r.interaction().run();case 7:c=e.sent,(u=o(c))?r.setState({publicKeyError:u,status:fe.PENDING}):i({publicKey:c,bip32Path:s}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),r.setState({publicKeyError:e.t0.message,status:fe.PENDING});case 16:n();case 17:case"end":return e.stop()}}),e,null,[[4,12]])}))),r.hasBIP32PathError=function(){var e=r.state,t=e.bip32PathError,n=e.status;return""!==t||r.interaction().hasMessagesFor({state:n,level:fe.ERROR,code:"bip32"})},r.bip32PathError=function(){var e=r.state,t=e.bip32PathError,n=e.status;return""!==t?t:r.interaction().messageTextFor({state:n,level:fe.ERROR,code:"bip32"})},r.handleBIP32PathChange=function(e){var t=e.target.value,n=Object(Q.validateBIP32Path)(t);r.setState({bip32Path:t,bip32PathError:null!==n&&void 0!==n?n:""})},r.bip32PathIsDefault=function(){return r.state.bip32Path===r.props.defaultBIP32Path},r.resetBIP32Path=function(){var e=r.props.defaultBIP32Path;r.setState({bip32Path:e,bip32PathError:""})},r.state={bip32Path:e.defaultBIP32Path,publicKeyError:"",bip32PathError:"",status:r.interaction().isSupported()?fe.PENDING:fe.UNSUPPORTED},r}return n}(s.a.Component),Ke=n(255),Be=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).title=function(){var e=r.props,t=e.number,n=e.totalSigners,a=e.publicKeyImporter,o=e.setName;return s.a.createElement(x.a,{container:!0,justify:"space-between"},s.a.createElement(x.a,{item:!0},s.a.createElement(Ke.a,{number:t,name:a.name,setName:o})),s.a.createElement(x.a,{item:!0},s.a.createElement(x.a,{container:!0,justify:"flex-end"},s.a.createElement(R.a,{type:"button",variant:"contained",onClick:r.moveUp,disabled:1===t},s.a.createElement(ye.a,null)),s.a.createElement("span",null,"\xa0"),s.a.createElement(R.a,{type:"button",variant:"contained",onClick:r.moveDown,disabled:t===n},s.a.createElement(Pe.a,null)))))},r.renderImport=function(){var e=r.props,t=e.publicKeyImporter,n=e.number,a=r.state.disableChangeMethod,o="public-key-".concat(n,"-importer-select-label");return s.a.createElement("div",null,s.a.createElement(be.a,{fullWidth:!0},s.a.createElement(Ee.a,{id:o},"Select Method"),s.a.createElement(ge.a,{labelId:o,id:"public-key-".concat(n,"-importer-select"),disabled:a,value:t.method,onChange:r.handleMethodChange},s.a.createElement(ve.a,{value:""},"< Select method >"),s.a.createElement(ve.a,{value:fe.TREZOR},"Trezor"),s.a.createElement(ve.a,{value:fe.LEDGER},"Ledger"),s.a.createElement(ve.a,{value:fe.HERMIT},"Hermit"),s.a.createElement(ve.a,{value:"xpub"},"Derive from extended public key"),s.a.createElement(ve.a,{value:"text"},"Enter as text"))),r.renderImportByMethod())},r.renderImportByMethod=function(){var e=r.props,t=e.publicKeyImporter,n=e.network,a=e.defaultBIP32Path;return t.method===fe.TREZOR||t.method===fe.LEDGER?s.a.createElement(Ae,{method:t.method,validatePublicKey:r.validatePublicKey,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,defaultBIP32Path:a,network:n,onImport:r.handleImport}):t.method===fe.HERMIT?s.a.createElement(je,{network:n,defaultBIP32Path:a,validatePublicKey:r.validatePublicKey,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,onImport:r.handleImport}):"xpub"===t.method?s.a.createElement(we,{network:n,validatePublicKey:r.validatePublicKey,onImport:r.handleImport}):"text"===t.method?s.a.createElement(Te,{validatePublicKey:r.validatePublicKey,onImport:r.handleImport}):null},r.handleMethodChange=function(e){var t=r.props,n=t.number,a=t.setMethod,o=t.setPublicKey;a(n,e.target.value),o(n,"")},r.disableChangeMethod=function(){r.setState({disableChangeMethod:!0})},r.enableChangeMethod=function(){r.setState({disableChangeMethod:!1})},r.finalize=function(){var e=r.props,t=e.number;(0,e.setFinalized)(t,!0)},r.reset=function(e){var t=r.props,n=t.number,a=t.setPublicKey,o=t.resetBIP32Path,i=t.setFinalized;a(n,""),i(n,!1),e&&o(n)},r.moveUp=function(e){var t=r.props,n=t.moveUp,a=t.number;e.preventDefault(),n(a)},r.moveDown=function(e){var t=r.props,n=t.moveDown,a=t.number;e.preventDefault(),n(a)},r.renderBIP32Path=function(){var e=r.props.publicKeyImporter;return"text"!==e.method?s.a.createElement(w.a,{mt:4},s.a.createElement("p",null,"The BIP32 path for this public key is:"),s.a.createElement(x.a,{container:!0,justify:"center"},s.a.createElement(Oe.a,{text:e.bip32Path,code:!0})),s.a.createElement(w.a,{mt:4},s.a.createElement("p",null,"You will need this BIP32 path to sign for this key later."," ",s.a.createElement("strong",null,"Write down this BIP32 path!")))):null},r.renderPublicKey=function(){var e=r.props.publicKeyImporter;return s.a.createElement("div",null,s.a.createElement("p",null,"The following public key was imported:"),s.a.createElement(x.a,{container:!0,justify:"center"},s.a.createElement(Oe.a,{text:e.publicKey,showIcon:!0,code:!0})),r.renderBIP32Path(),s.a.createElement(w.a,{mt:2},s.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){r.reset(e.method===fe.HERMIT)}},"Remove Public Key")))},r.handleImport=function(e){var t=e.bip32Path,n=e.publicKey,a=r.props,o=a.number,i=a.setBIP32Path,s=a.setPublicKey;t&&i(o,t),s(o,n),r.finalize()},r.validatePublicKey=function(e){var t=r.props,n=t.number,a=t.addressType,o=t.publicKeyImporters,i=Object(Q.validatePublicKey)(e,a);if(i)return i;var s=e&&Object.values(o).find((function(t,r){return r!==n-1&&t.publicKey===e}))?"This public key has already been imported.":null;return s||""},r.state={disableChangeMethod:!1},r}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.number,r=t.setFinalized,a=t.addressType,o=t.publicKeyImporter;e.addressType!==a&&this.validatePublicKey(o.publicKey)&&r(n,!1)}},{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.validatePublicKey(e.publicKey);return s.a.createElement(j.a,null,s.a.createElement(C.a,{title:this.title()}),s.a.createElement(k.a,null,e.method&&"text"!==e.method&&e.conflict&&s.a.createElement(de.a,{message:"Warning, BIP32 path is in conflict with the network and address type settings.  Do not proceed unless you are absolutely sure you know what you are doing!"}),t.includes("does not support uncompressed public keys")&&s.a.createElement(de.a,{message:t}),e.finalized?this.renderPublicKey():this.renderImport()))}}]),n}(s.a.Component);var _e={setName:ne,setBIP32Path:re,resetBIP32Path:ae,setMethod:oe,setPublicKey:ie,setFinalized:se,moveUp:ce,moveDown:ue},De=Object(d.b)((function(e,t){return Object(X.a)(Object(X.a)(Object(X.a)({},e.settings),e.address),{publicKeyImporter:e.address.publicKeyImporters[t.number]})}),_e)(Be),Me=n(257),Ue=n(205),Fe=(n(234),n(716),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,n=t.address,r=t.client;return s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0,spacing:3},s.a.createElement(x.a,{item:!0,xs:12},s.a.createElement("h1",null,"Address Generator")),s.a.createElement(x.a,{item:!0,md:8},e.renderPublicKeyImporters(),s.a.createElement(w.a,{mt:2},s.a.createElement(he,null))),s.a.createElement(x.a,{item:!0,md:4},s.a.createElement(w.a,null,s.a.createElement(J.a,null)),s.a.createElement(w.a,{mt:2},s.a.createElement(Z.a,null)),s.a.createElement(w.a,{mt:2},s.a.createElement(Y.a,null)),s.a.createElement(w.a,{mt:2},s.a.createElement(Me.a,{publicNotes:s.a.createElement("span",null,'If you plan to use this address with your own bitcoind node you can import the address created here by switching for "Public" to "Private". Otherwise no action is needed here.'),privateNotes:s.a.createElement("div",null,s.a.createElement(Ue.a,{addresses:[n],client:r}))})))))},e.renderPublicKeyImporters=function(){for(var t=e.props.totalSigners,n=[],r=1;r<=t;r+=1)n.push(s.a.createElement(w.a,{key:r,mt:1===r?0:2},s.a.createElement(De,{number:r})));return n},e}return n}(s.a.Component));Fe.defaultProps={address:""};var Le=Object(d.b)((function(e){return Object(X.a)(Object(X.a)(Object(X.a)({},{totalSigners:e.settings.totalSigners}),e.address),{},{client:e.client})}))(Fe),ze=n(1041),We=n(1765),He=n(1766),qe="START_TEST_SUITE_RUN",Ge="SET_CURRENT_TEST_RUN";function Ve(){return{type:qe}}function Xe(e){return{type:Ge,value:e}}var Ye=n(47),Je="SET_KEYSTORE",Ze="SET_KEYSTORE_NOTE",Qe="SET_KEYSTORE_STATUS";function $e(e,t){return{type:Je,keystoreType:e,version:t}}function et(e){return{type:Ze,value:e}}function tt(e){return{type:Qe,value:e}}var nt=n(137),rt="START_TEST_RUN",at="END_TEST_RUN",ot="RESET_TEST_RUN",it="SET_TEST_RUN_NOTE";function st(e){return{type:rt,testRunIndex:e}}function ct(e,t,n){return{type:at,testRunIndex:e,status:t,message:n}}function ut(e){return{type:ot,testRunIndex:e}}function lt(e,t){return{type:it,testRunIndex:e,note:t}}var dt=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){var n=e.props,r=n.setNote,a=n.mode,o=n.testRunIndex,i=t.target.value;"testRun"===a?r(o,i):r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.note;return s.a.createElement(Se.a,{name:"notes",label:"Notes",value:e,onChange:this.handleChange,multiline:!0,fullWidth:!0,rows:3})}}]),n}(s.a.Component);dt.defaultProps={testRunIndex:0};var pt={setNote:et},mt={setNote:lt},ht=Object(d.b)((function(e){return{note:e.keystore.note,mode:"keystore"}}),pt)(dt),ft=Object(d.b)((function(e){return{mode:"testRun",testRunIndex:e.testSuiteRun.currentTestRunIndex,note:e.testSuiteRun.testRuns[e.testSuiteRun.currentTestRunIndex].note}}),mt)(dt),bt=[""].concat(Object(Ye.a)(Object.values(fe.INDIRECT_KEYSTORES))),Et=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).detectVersion=Object(Re.a)(ke.a.mark((function t(){var n,r,a,o,i,s;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.type,a=n.setKeystore,o=n.setKeystoreStatus,i=n.setErrorNotification,o(fe.ACTIVE),t.prev=2,t.next=5,e.interaction().run();case 5:(s=t.sent)&&a(r,s.spec),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),i(t.t0.message);case 13:o(fe.PENDING);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.interaction=function(){var t=e.props.type;return Object(fe.GetMetadata)({keystore:t})},e.handleTypeChange=function(t){var n=e.props,r=n.version;(0,n.setKeystore)(t.target.value,r)},e.handleVersionChange=function(t){var n=e.props,r=n.type;(0,n.setKeystore)(r,t.target.value)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.status,r=e.version;return s.a.createElement(w.a,null,s.a.createElement(x.a,{container:!0,spacing:2,justify:"center"},s.a.createElement(x.a,{item:!0,md:4},s.a.createElement(be.a,{fullWidth:!0},s.a.createElement(Ee.a,{id:"keystore-select-label"},"Type"),s.a.createElement(ge.a,{labelId:"keystore-select-label",id:"keystore-select",value:t,onChange:this.handleTypeChange},s.a.createElement(ve.a,{value:""},"< Select type >"),s.a.createElement(ve.a,{value:fe.TREZOR},"Trezor"),s.a.createElement(ve.a,{value:fe.LEDGER},"Ledger"),s.a.createElement(ve.a,{value:fe.COLDCARD},"Coldcard"),s.a.createElement(ve.a,{value:fe.HERMIT},"Hermit")))),s.a.createElement(x.a,{item:!0,md:6},s.a.createElement(Se.a,{name:"version",fullWidth:!0,label:"Version",value:r,disabled:""===t,onChange:this.handleVersionChange})),s.a.createElement(x.a,{item:!0,md:2},s.a.createElement(R.a,{disabled:n===fe.ACTIVE||bt.includes(t),onClick:this.detectVersion},n===fe.ACTIVE?"Detecting...":"Detect"))),t&&!bt.includes(t)&&s.a.createElement(Ne.a,{messages:this.interaction().messagesFor({state:n})}),s.a.createElement(ht,null))}}]),n}(s.a.Component),gt=Object(X.a)(Object(X.a)({},a),{},{setErrorNotification:nt.setErrorNotification}),vt=Object(d.b)((function(e){return Object(X.a)({},e.keystore)}),gt)(Et),yt=n(167),Pt=n.n(yt),Ot=n(1087),St=n.n(Ot),Tt=n(1754),wt=n(443),It=n(735),xt=n(1762),jt=n(1763),Ct=n(1758),kt=n(1764),Rt=n(1726),Nt=n(588),At=function(){function e(t){Object(f.a)(this,e),this.params=t||{}}return Object(b.a)(e,[{key:"postprocess",value:function(e){return e}},{key:"interaction",value:function(){throw Error("Define the `interaction` method in your subclass of `Test`.")}},{key:"matches",value:function(e,t){return"object"===typeof e&&"object"===typeof t?Object.keys(t).every((function(n){return e[n]===t[n]})):e===t}}]),Object(b.a)(e,[{key:"diff",value:function(e,t){if("string"===typeof e&&"string"===typeof t)return Object(Nt.diffChars)(e,t);if("object"===typeof e&&"object"===typeof t){if(void 0!==e.length&&void 0!==t.length)return Object(Nt.diffArrays)(e,t);if(void 0===e.length&&void 0===t.length)return Object(Nt.diffJson)(e,t)}return null}},{key:"supports",value:function(){return!0}},{key:"name",value:function(){return this.params.name}},{key:"description",value:function(){return this.params.description}},{key:"expected",value:function(){return this.params.expected}},{key:"actual",value:function(){var e=Object(Re.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.postprocess(t?this.interaction().parse(t):this.interaction().run()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"run",value:function(){var e=Object(Re.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual();case 3:return t=e.sent,e.abrupt("return",this.resolve(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"runParse",value:function(){var e=Object(Re.a)(ke.a.mark((function e(t){var n,r;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.actual(t);case 3:return n=e.sent,r=n.rootFingerprint?{pubkey:n.pubkey,xpub:n.xpub||n.tpub,rootFingerprint:n.rootFingerprint}:Object.values(n)[0],e.abrupt("return",this.resolve(r));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resolve",value:function(e){var t=this.expected();return this.matches(t,e)?{status:"success"}:{status:"failure",expected:t,actual:e,diff:this.diff(t,e)}}}]),e}();At.SUCCESS="success",At.FAILURE="failure",At.ERROR="error";var Kt=At,Bt=(n(1698),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,n=t.testSuiteRun,r=t.keystore,a=St.a.getParser(window.navigator.userAgent);return s.a.createElement(x.a,{container:!0,direction:"column",spacing:3},s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Summary"}),s.a.createElement(k.a,null,s.a.createElement("dl",null,s.a.createElement("dt",null,"OS:"),s.a.createElement("dd",null,a.getOSName()," ",a.getOSVersion()),s.a.createElement("dt",null,"Browser:"),s.a.createElement("dd",null,a.getBrowserName()," ",a.getBrowserVersion()),s.a.createElement("dt",null,"unchained-wallets:"),s.a.createElement("dd",null,"v.",fe.VERSION),r.type&&s.a.createElement(w.a,null,s.a.createElement("dt",null,"Keystore:"),s.a.createElement("dd",null,e.keystoreName(r.type)," ",r.version)),r.note&&s.a.createElement(w.a,null,s.a.createElement("dt",null,"Notes:"),s.a.createElement("dd",null,r.note)))))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Tests",subheader:"".concat(n.testRuns.length," Total")}),s.a.createElement(k.a,null,e.renderTests()))))},e.renderTests=function(){var t=e.props,n=t.testSuiteRun;return""===t.keystore.type?s.a.createElement("p",null,"Choose a keystore type to generate a test suite..."):s.a.createElement(w.a,null,s.a.createElement(I.a,{variant:"h6"},s.a.createElement("span",{className:"TestSuiteRunSummary-success"},n.testRuns.filter((function(e){return e.status===Kt.SUCCESS})).length," ",s.a.createElement("small",null,"SUCCESS")),"\xa0 / \xa0",s.a.createElement("span",{className:"TestSuiteRunSummary-failure"},n.testRuns.filter((function(e){return e.status===Kt.FAILURE})).length," ",s.a.createElement("small",null,"FAIL")),"\xa0 / \xa0",s.a.createElement("span",{className:"TestSuiteRunSummary-error"},n.testRuns.filter((function(e){return e.status===Kt.ERROR})).length," ",s.a.createElement("small",null,"ERROR"))),s.a.createElement(Tt.a,null),s.a.createElement(N.a,{style:{maxHeight:"200px",overflow:"auto"},dense:!0,component:"nav"},n.testRuns.map(e.renderTestRun)))},e.renderTestRun=function(t,n){var r=e.props.testSuiteRun;return s.a.createElement(A.a,{selected:r.currentTestRunIndex===n,button:!0,key:n,onClick:e.testRunChooser(n),disabled:!r.started},e.renderTestRunResult(t),s.a.createElement(B.a,null,t.test.name(),t.status!==fe.PENDING&&t.status!==fe.ACTIVE&&s.a.createElement("small",null,"\xa0 (",Pt.a.duration(t.endedAt.diff(t.startedAt)).asSeconds(),"s)")),t.note&&s.a.createElement(K.a,null,s.a.createElement(wt.a,{title:t.note},s.a.createElement(xt.a,null))))},e.renderTestRunResult=function(e){switch(e.status){case fe.PENDING:return s.a.createElement(K.a,null,s.a.createElement(jt.a,{className:"TestSuiteRunSummary-pending"}));case Kt.SUCCESS:return s.a.createElement(K.a,null,s.a.createElement(Ct.a,{className:"TestSuiteRunSummary-success"}));case Kt.FAILURE:return s.a.createElement(K.a,null,s.a.createElement(kt.a,{className:"TestSuiteRunSummary-failure"}));case Kt.ERROR:return s.a.createElement(K.a,null,s.a.createElement(Rt.a,{className:"TestSuiteRunSummary-error"}));case fe.ACTIVE:return s.a.createElement(K.a,null,s.a.createElement(It.a,{className:"TestSuiteRunSummary-active"}));default:return null}},e.testRunChooser=function(t){var n=e.props.setCurrentTestRun;return function(){n(t)}},e.keystoreName=function(e){switch(e){case fe.TREZOR:return"Trezor";case fe.LEDGER:return"Ledger";case fe.HERMIT:return"Hermit";case fe.COLDCARD:return"Coldcard";default:return""}},e}return n}(s.a.Component)),_t={setCurrentTestRun:Xe},Dt=Object(d.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),_t)(Bt),Mt=n(546),Ut=n(258),Ft=(n(1699),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.handleKeyDown=function(t){var n=e.props,r=n.status,a=n.isLastTest,o=n.nextTest;32===t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(t.preventDefault(),r!==fe.ACTIVE&&(r===fe.PENDING?e.start():a||o()))},e.handleDownloadPSBTClick=function(){var t=e.props.test,n=t.interaction(),r=t.name().split(" "),a=n.request().toBase64(),o=Pt()().format("HHmm"),i="".concat(o,"-").concat(r[2],"-").concat(r[1][0],".psbt");Object(H.a)(a,i)},e.handledDownloadWalletConfigClick=function(){var t=e.props.test,n=t.name().split(" "),r="".concat(n[2].toLowerCase(),"-").concat(n[1][0]),a="# Coldcard Multisig setup file for test suite\n#\nName: ".concat(r,"\nPolicy: 2 of 2\nFormat: ").concat(t.params.format.includes("-")?"P2WSH-P2SH":t.params.format,"\nDerivation: ").concat(t.params.derivation,"\n\n");a+=t.params.extendedPublicKeys.map((function(e){return"".concat(e.rootFingerprint,": ").concat(e.base58String)})).join("\r\n"),a+="\r\n";var o="wc-".concat(r,".txt");Object(H.a)(a,o)},e.render=function(){var t=e.props,n=t.test,r=t.testRunIndex,a=t.status,o=t.keystore;return n?s.a.createElement(w.a,null,s.a.createElement(j.a,null,s.a.createElement(C.a,{title:n.name(),subheader:"Test ".concat(r+1)}),s.a.createElement(k.a,null,n.description(),o.type===fe.COLDCARD&&!n.unsignedTransaction&&s.a.createElement(w.a,{align:"center"},s.a.createElement(Ut.a,{interaction:n.interaction(),onReceive:e.startParse,onStart:e.start,setError:e.reset,isTest:!0})),o.type===fe.COLDCARD&&n.unsignedTransaction&&s.a.createElement(w.a,{align:"center",style:{marginTop:"2em"}},s.a.createElement(Ut.c,{handlePSBTDownloadClick:e.handleDownloadPSBTClick,handleWalletConfigDownloadClick:e.handledDownloadWalletConfigClick}),s.a.createElement(Ut.b,{interaction:n.interaction(),onReceivePSBT:e.startParse,onStart:e.start,setError:e.reset,fileType:"PSBT",validFileFormats:".psbt"})),e.renderInteractionMessages(),a===fe.PENDING&&!Object.values(fe.INDIRECT_KEYSTORES).includes(o.type)&&s.a.createElement(w.a,{align:"center"},s.a.createElement(R.a,{variant:"contained",color:"primary",onClick:e.start},"Start Test")),o.type===fe.HERMIT&&n.interaction().displayer&&a===fe.PENDING&&s.a.createElement(w.a,{align:"center"},s.a.createElement(Mt.a,{width:400,string:n.interaction().request()})),o.type===fe.HERMIT&&!e.testComplete()&&s.a.createElement(w.a,null,s.a.createElement(xe.a,{onStart:e.start,onSuccess:e.resolve,onClear:e.reset,startText:"Scan Hermit Response",interaction:n.interaction()})),e.testComplete()&&e.renderResult(),s.a.createElement(ft,null)),s.a.createElement(_.a,null,a===fe.ACTIVE&&s.a.createElement(R.a,{disabled:!0},s.a.createElement(It.a,null),"\xa0 Running test..."),e.testComplete()&&s.a.createElement(R.a,{color:"secondary",onClick:e.reset},"Reset Test")))):s.a.createElement(w.a,null,s.a.createElement("p",null,"No test selected."))},e.testComplete=function(){var t=e.props.status;return t===Kt.SUCCESS||t===Kt.ERROR||t===Kt.FAILURE},e.renderInteractionMessages=function(){var t=e.props,n=t.status,r=t.test;return n===fe.PENDING||n===fe.ACTIVE?s.a.createElement(Ne.a,{excludeCodes:["hermit.command"],messages:r.interaction().messagesFor({state:n})}):null},e.renderResult=function(){var t=e.props,n=t.status,r=t.message;switch(n){case Kt.SUCCESS:return s.a.createElement(w.a,{mt:2,align:"center"},s.a.createElement(I.a,{variant:"h5",className:"TestRun-success"},s.a.createElement(Ct.a,null),"\xa0 Test passed"));case Kt.FAILURE:return s.a.createElement(w.a,{mt:2},s.a.createElement(w.a,{align:"center"},s.a.createElement(I.a,{variant:"h5",className:"TestRun-failure"},s.a.createElement(kt.a,null),"\xa0 Test failed")),r);case Kt.ERROR:return s.a.createElement(w.a,{mt:2},s.a.createElement(w.a,{align:"center"},s.a.createElement(I.a,{variant:"h5",className:"TestRun-error"},s.a.createElement(Rt.a,null),"\xa0 Test error")),r);default:return null}},e.start=Object(Re.a)(ke.a.mark((function t(){var n,r,a,o,i;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.test,a=n.keystore,o=n.testRunIndex,(0,n.startTestRun)(o),a.type!==fe.HERMIT){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r.run();case 6:i=t.sent,e.handleResult(i);case 8:case"end":return t.stop()}}),t)}))),e.startParse=function(){var t=Object(Re.a)(ke.a.mark((function t(n){var r,a,o,i;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.test,o=r.testRunIndex,(0,r.startTestRun)(o),t.next=4,a.runParse(n);case 4:i=t.sent,e.handleResult(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resolve=function(t){var n=e.props.test,r=n.resolve(n.postprocess(t));e.handleResult(r)},e.handleResult=function(t){var n=e.props,r=n.testRunIndex,a=n.endTestRun,o=n.setErrorNotification;t.status===Kt.ERROR&&o(t.message),a(r,t.status,e.formatMessage(t))},e.reset=function(){var t=e.props,n=t.testRunIndex;(0,t.resetTestRun)(n)},e.formatMessage=function(t){switch(t.status){case Kt.FAILURE:return s.a.createElement(w.a,null,s.a.createElement("dl",null,s.a.createElement("dt",null,"Expected:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.expected))),s.a.createElement("dt",null,"Actual:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},e.formatOutput(t.actual))),t.diff&&s.a.createElement("div",null,s.a.createElement("dt",null,"Diff:"),s.a.createElement("dd",null,s.a.createElement("code",{className:"TestRun-wrap"},t.diff.map(e.formatDiffSegment))))));case Kt.ERROR:return s.a.createElement("code",null,t.message);default:return""}},e.formatOutput=function(e){switch(typeof e){case"object":return JSON.stringify(e);case"string":case"number":return e;default:return"Did not recognize output type"}},e.formatDiffSegment=function(t,n){return s.a.createElement("span",{key:n,className:"TestRun-diff-segment-".concat(e.diffSegmentClass(t))},t.value)},e.diffSegmentClass=function(e){return e.added?"added":e.removed?"removed":"common"},e}return n}(s.a.Component)),Lt=Object(X.a)(Object(X.a)({},o),nt),zt=Object(d.b)((function(e,t){return Object(X.a)(Object(X.a)(Object(X.a)({},{keystore:e.keystore}),e.testSuiteRun.testRuns[t.testRunIndex]||{}),{testRunIndex:t.testRunIndex})}),Lt)(Ft);Ft.defaultProps={test:{unsignedTransaction:null,params:{}}};var Wt=zt,Ht=Q.TEST_FIXTURES.keys.open_source.bip39Phrase,qt=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.keystore;return s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,{container:!0},s.a.createElement(x.a,{item:!0,md:3},s.a.createElement("ol",null,Ht.slice(0,6).map(n.renderSeedWord))),s.a.createElement(x.a,{item:!0,md:3},s.a.createElement("ol",{start:7},Ht.slice(6,12).map(n.renderSeedWord))),s.a.createElement(x.a,{item:!0,md:3},s.a.createElement("ol",{start:13},Ht.slice(12,18).map(n.renderSeedWord))),s.a.createElement(x.a,{item:!0,md:3},s.a.createElement("ol",{start:19},Ht.slice(18,24).map(n.renderSeedWord)))),e&&e.type===fe.COLDCARD&&s.a.createElement(x.a,{style:{marginTop:"2em",marginBottom:"2em"}},"If using the simulator, here's a handy command with the same seed phrase:",s.a.createElement("br",null),s.a.createElement("code",null,"./simulator.py --seed '",Ht.join(" "),"'")))}}],[{key:"renderSeedWord",value:function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("code",null,e))}}]),n}(s.a.Component);qt.defaultProps={keystore:null};var Gt=Object(d.b)((function(){return{}}),{})(qt),Vt=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){document.addEventListener("keydown",e.handleKeyDown)},e.componentWillUnmount=function(){document.removeEventListener("keydown",e.handleKeyDown)},e.currentTestIsActive=function(){var t=e.props.testSuiteRun;if(!t.started)return!1;var n=t.testRuns[t.currentTestRunIndex];return!!n&&n.status===fe.ACTIVE},e.handleKeyDown=function(t){if(e.props.testSuiteRun.started){if(e.currentTestIsActive())return;switch(t.keyCode){case 37:case 38:e.isFirstTest()||e.previousTest();break;case 39:case 40:e.isLastTest()||e.nextTest()}}else{if(32!==t.keyCode)return;var n=t.target.tagName.toLowerCase();if("textarea"===n||"input"===n)return;if(t.preventDefault(),e.startDisabled())return;e.start()}},e.render=function(){var t=e.props.testSuiteRun;return s.a.createElement(w.a,{mt:2},t.started&&s.a.createElement(w.a,{mt:2,mb:2},s.a.createElement(ze.a,{variant:"determinate",value:t.testRuns.filter((function(e){return e.status!==fe.PENDING&&e.status!==fe.ACTIVE})).length/t.testRuns.length*100})),s.a.createElement(x.a,{container:!0,spacing:3},s.a.createElement(x.a,{item:!0,md:4},s.a.createElement(Dt,null)),s.a.createElement(x.a,{item:!0,md:8},e.renderBody())))},e.renderSetup=function(){var t=e.props.keystore;return s.a.createElement(x.a,{container:!0,direction:"column",spacing:3},s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Choose Keystore"}),s.a.createElement(k.a,null,s.a.createElement(vt,null),s.a.createElement(w.a,{align:"center",mt:2},s.a.createElement(R.a,{variant:"contained",color:"primary",disabled:e.startDisabled(),onClick:e.start,type:"submit"},"Begin Test Suite"))))),s.a.createElement(x.a,{item:!0},s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Keystore Setup"}),s.a.createElement(k.a,null,s.a.createElement("p",null,"Ensure your keystore has been initialized with the following seed:"),s.a.createElement(Gt,{keystore:t})))))},e.renderBody=function(){var t=e.props.testSuiteRun;return t.started?s.a.createElement(w.a,null,s.a.createElement(Wt,{isLastTest:e.isLastTest(),nextTest:e.nextTest,testRunIndex:t.currentTestRunIndex}),s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0,justify:"space-between"},s.a.createElement(x.a,{item:!0},s.a.createElement(R.a,{disabled:e.isFirstTest()||e.currentTestIsActive(),onClick:e.previousTest},s.a.createElement(We.a,null)," \xa0 Previous")),s.a.createElement(x.a,{item:!0},s.a.createElement(R.a,{disabled:e.isLastTest()||e.currentTestIsActive(),onClick:e.nextTest},"Next \xa0 ",s.a.createElement(He.a,null)))))):e.renderSetup()},e.start=function(){(0,e.props.startTestSuiteRun)()},e.startDisabled=function(){var t=e.props,n=t.testSuiteRun,r=t.keystore;return""===r.type||r.status===fe.ACTIVE||n.started||0===n.testRuns.length},e.isFirstTest=function(){return 0===e.props.testSuiteRun.currentTestRunIndex},e.isLastTest=function(){var t=e.props.testSuiteRun;return t.currentTestRunIndex===t.testRuns.length-1},e.previousTest=function(){var t=e.props,n=t.testSuiteRun,r=t.setCurrentTestRun;n.currentTestRunIndex<1||r(n.currentTestRunIndex-1)},e.nextTest=function(){var t=e.props,n=t.testSuiteRun,r=t.setCurrentTestRun;n.currentTestRunIndex!==n.testRuns.length-1&&r(n.currentTestRunIndex+1)},e}return n}(s.a.Component),Xt=Object(X.a)({},r),Yt=Object(d.b)((function(e){return{keystore:e.keystore,testSuiteRun:e.testSuiteRun}}),Xt)(Vt),Jt=n(85),Zt=n(38),Qt=n(21);var $t=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).disabled=function(){},r.hasScriptError=function(){return""!==r.state.scriptError},r.hasFetchUTXOsError=function(){return""!==r.state.fetchUTXOsError},r.hasError=function(){return r.hasScriptError()||r.hasFetchUTXOsError()},r.scriptName=function(){switch(r.props.addressType){case Q.P2SH:return"redeem";case Q.P2SH_P2WSH:case Q.P2WSH:return"witness";default:return null}},r.scriptTitle=function(){var e=r.scriptName();return e.charAt(0).toUpperCase()+e.substring(1)},r.handleScriptChange=function(e){var t=e.target.value,n="";(""===t&&(n="".concat(r.scriptTitle()," script cannot be blank.")),""===n&&(t.includes("\n")||t.includes("\t")||t.includes(" "))&&(n="".concat(r.scriptTitle()," script should not contain spaces, tabs, or newlines.")),""===n)&&(""!==Object(Q.validateHex)(t)&&(n="".concat(r.scriptTitle()," script is not valid hex.")));if(""!==t&&""===n)try{r.generateMultisig(t)}catch(a){console.error(a),n="Failed to parse ".concat(r.scriptName()," script.")}r.setState({scriptHex:t,scriptError:n,fetchUTXOsError:"",fetchedUTXOs:!1})},r.generateMultisig=function(e){var t=r.props,n=t.network,a=t.addressType,o=r.state.scriptHex;return e&&(o=e),Object(Q.generateMultisigFromHex)(n,a,o)},r.renderDetails=function(){var e=r.state.fetchUTXOsError,t=r.props,n=t.chosePerformSpend,a=t.choseConfirmOwnership,o=t.client,i=r.generateMultisig(),c=n||a;return s.a.createElement("div",null,s.a.createElement(le.a,{multisig:i}),s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0,spacing:3},s.a.createElement(x.a,{item:!0},s.a.createElement(R.a,{variant:"contained",color:"primary",size:"large",onClick:r.performSpend,disabled:c},"Spend from this address")),s.a.createElement(x.a,{item:!0},s.a.createElement(R.a,{variant:"contained",size:"large",onClick:r.confirmOwnership,disabled:c},"Confirm ownership"))),s.a.createElement($.a,{error:!0},e)),"private"===o.type&&s.a.createElement(w.a,{mt:2},s.a.createElement(Ue.a,{addresses:[i.address],client:o})))},r.performSpend=Object(Re.a)(ke.a.mark((function e(){var t,n,a,o,i,s,c,u,l,d,p,m;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.setRequiredSigners,a=t.setTotalSigners,o=t.setInputs,i=t.setFrozen,s=t.choosePerformSpend,c=r.generateMultisig(),e.next=4,r.fetchUTXOs(c);case 4:(u=e.sent)?(l=u.utxos,d=u.balanceSats,p="",d.isLessThanOrEqualTo(0)&&(p="This address has a zero balance."),r.setState({fetchedUTXOs:!0,fetchUTXOsError:p}),""===p&&(m=l.map((function(e){return Object(X.a)(Object(X.a)({},e),{},{multisig:c})})),o(m),n(Object(Q.multisigRequiredSigners)(c)),a(Object(Q.multisigTotalSigners)(c)),i(!0),s())):r.setState({fetchedUTXOs:!1,fetchUTXOsError:"Failed to fetch UTXOs."});case 6:case"end":return e.stop()}}),e)}))),r.fetchUTXOs=function(){var e=Object(Re.a)(ke.a.mark((function e(t){var n,a,o,i;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props,a=n.network,o=n.client,e.next=3,Object(Jt.b)(t.address,a,o);case 3:if(!((i=e.sent)&&i.utxos&&i.utxos.length)){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.confirmOwnership=function(){var e=r.props,t=e.chooseConfirmOwnership,n=e.setOwnershipMultisig,a=e.setFrozen;n(r.generateMultisig()),t(),a(!0)},r.state={scriptHex:"",scriptError:"",fetchUTXOsError:"",fetchedUTXOs:!1},r}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.scriptHex,n=e.scriptError,r=e.fetchedUTXOs;return s.a.createElement(j.a,null,s.a.createElement(C.a,{title:"Enter ".concat(this.scriptTitle()," Script")}),s.a.createElement(k.a,null,s.a.createElement("form",null,s.a.createElement(Se.a,{fullWidth:!0,multiline:!0,autoFocus:!0,variant:"outlined",label:"".concat(this.scriptTitle()," Script"),value:t,rows:5,onChange:this.handleScriptChange,disabled:r&&!this.hasFetchUTXOsError(),helperText:n,error:""!==n})),""===t||this.hasScriptError()?s.a.createElement("p",null,"Enter a valid ",this.scriptName()," script to generate an address to spend funds from."):this.renderDetails()))}}]),n}(s.a.Component);var en={choosePerformSpend:Qt.A,setInputs:Qt.N,setTotalSigners:Qt.W,setRequiredSigners:Qt.S,chooseConfirmOwnership:function(){return{type:"CHOOSE_CONFIRM_OWNERSHIP"}},setOwnershipMultisig:function(e){return{type:"SET_OWNERSHIP_MULTISIG",value:e}},setFrozen:Zt.h},tn=Object(d.b)((function(e){return Object(X.a)(Object(X.a)(Object(X.a)({},e.settings),{client:e.client}),{choseConfirmOwnership:e.spend.ownership.chosen,chosePerformSpend:e.spend.transaction.chosen})}),en)($t),nn=n(364),rn=n(583),an=n(579),on=n(574),sn=n(1088),cn=n.n(sn),un=n(1089),ln=n.n(un),dn=n(540),pn=(n(724),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).titleRef=s.a.createRef(),r.componentDidMount=function(){r.resetBIP32Path(),r.scrollToTitle()},r.componentDidUpdate=function(){r.scrollToTitle()},r.scrollToTitle=function(){r.titleRef.current.scrollIntoView({behavior:"smooth"})},r.handleMethodChange=function(e){(0,r.props.setMethod)(e.target.value),r.reset()},r.disableChangeMethod=function(){r.setState({disableChangeMethod:!0})},r.enableChangeMethod=function(){r.setState({disableChangeMethod:!1})},r.reset=function(){(0,r.props.reset)()},r.resetBIP32Path=function(){(0,r.props.resetBIP32Path)()},r.validateAndSetBIP32Path=function(e,t,n,a){var o=r.props.setBIP32Path,i=Object(Q.validateBIP32Path)(e,a);o(e),i?n(i):(n(""),t())},r.validateAndSetPublicKey=function(e,t,n){var a=r.props.setPublicKey,o=Object(Q.validatePublicKey)(e);a(e),o?t&&t(o):(t&&t(""),n&&n())},r.renderConfirmation=function(){var e=r.props,t=e.publicKeys,n=e.publicKeyImporter;if(""===n.publicKey)return null;if(t.includes(n.publicKey)){var a=Object(dn.a)(K.a)({color:"green"});return s.a.createElement(N.a,null,s.a.createElement(A.a,null,s.a.createElement(a,null,s.a.createElement(cn.a,null)),s.a.createElement(B.a,null,"The public key exported at BIP32 path"," ",s.a.createElement("code",null,n.bip32Path)," is present in the provided redeem script.")))}return s.a.createElement(N.a,null,s.a.createElement(A.a,null,s.a.createElement(K.a,null,s.a.createElement(I.a,{color:"error"},s.a.createElement(ln.a,null))),s.a.createElement(B.a,null,"The public key exported at BIP32 path"," ",s.a.createElement("code",null,n.bip32Path)," is not present in the provided redeem script.")))},r.renderImportByMethod=function(){var e=r.props,t=e.network,n=e.publicKeyImporter,a=e.defaultBIP32Path;return n.method===fe.HERMIT?s.a.createElement(je,{publicKeyImporter:n,validateAndSetBIP32Path:r.validateAndSetBIP32Path,validateAndSetPublicKey:r.validateAndSetPublicKey,resetBIP32Path:r.resetBIP32Path,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod,reset:r.reset}):n.method===fe.TREZOR||n.method===fe.LEDGER?s.a.createElement(Ae,{network:t,publicKeyImporter:n,validateAndSetBIP32Path:r.validateAndSetBIP32Path,resetBIP32Path:r.resetBIP32Path,defaultBIP32Path:a,validateAndSetPublicKey:r.validateAndSetPublicKey,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod}):null},r.state={disableChangeMethod:!1},r}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.publicKeyImporter,t=this.state.disableChangeMethod,n="public-key-importer-select-label",r="".concat(n,"-select");return s.a.createElement(j.a,null,s.a.createElement(C.a,{ref:this.titleRef,title:"Confirm Ownership"}),s.a.createElement(k.a,null,s.a.createElement("form",null,s.a.createElement("p",null,"How will you confirm your ownership of this address?"),s.a.createElement(be.a,{fullWidth:!0},s.a.createElement(Ee.a,{id:n},"Select Method"),s.a.createElement(ge.a,{labelId:r,id:"public-key-importer-select",disabled:t,value:e.method,onChange:this.handleMethodChange},s.a.createElement(ve.a,{value:""},"< Select method >"),s.a.createElement(ve.a,{value:fe.TREZOR},"Trezor"),s.a.createElement(ve.a,{value:fe.LEDGER},"Ledger"),s.a.createElement(ve.a,{value:fe.HERMIT},"Hermit"))),this.renderImportByMethod(),this.renderConfirmation(),""!==e.method&&s.a.createElement(R.a,{variant:"contained",size:"small",color:"secondary",role:"button",onClick:this.reset},"Start Again"))))}}]),n}(s.a.Component));var mn={setMethod:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_METHOD",value:e}},setBIP32Path:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH",value:e}},setPublicKey:function(e){return{type:"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY",value:e}},resetBIP32Path:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH"}},reset:function(){return{type:"RESET_PUBLIC_KEY_IMPORTER"}}},hn=Object(d.b)((function(e){return e.spend.ownership}),mn)(pn),fn=n(365),bn=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){return s.a.createElement(w.a,{mt:2},s.a.createElement(x.a,{container:!0,spacing:3},s.a.createElement(x.a,{item:!0,md:8},s.a.createElement(w.a,null,s.a.createElement(tn,null)),e.renderBody()),s.a.createElement(x.a,{item:!0,md:4},s.a.createElement(w.a,null,s.a.createElement(Z.a,null)),s.a.createElement(w.a,{mt:2},s.a.createElement(Y.a,null)),s.a.createElement(w.a,{mt:2},s.a.createElement(Me.a,null)))))},e.renderBody=function(){var t=e.props,n=t.transaction;return t.ownership.chosen?s.a.createElement(w.a,{mt:2},s.a.createElement(hn,null)):s.a.createElement(w.a,null,e.spendable()&&s.a.createElement(w.a,null,s.a.createElement(w.a,{mt:2},s.a.createElement(j.a,null,s.a.createElement(k.a,null,s.a.createElement(nn.a,{inputs:n.inputs,inputsTotalSats:n.inputsTotalSats})))),s.a.createElement(w.a,{mt:2},s.a.createElement(j.a,null,s.a.createElement(k.a,null,s.a.createElement(I.a,{variant:"h5"},"Define Outputs"),s.a.createElement(rn.a,null))))),n.finalizedOutputs&&s.a.createElement("div",null,s.a.createElement(w.a,{mt:2},s.a.createElement(fn.a,null)),s.a.createElement(w.a,{mt:2},e.renderSignatureImporters())),e.signaturesFinalized()&&s.a.createElement(w.a,{mt:2},s.a.createElement(on.a,null)))},e.renderSignatureImporters=function(){for(var t=e.props.transaction,n=[],r=1;r<=t.requiredSigners;r+=1)n.push(s.a.createElement(w.a,{key:r,mt:2},s.a.createElement(an.a,{number:r})));return n},e.spendable=function(){return e.props.transaction.inputs.length>0},e.signaturesFinalized=function(){var t=e.props.signatureImporters;return Object.values(t).length>0&&Object.values(t).every((function(e){return e.finalized}))},e.confirmOwnership=function(t){e.setState({addressFinalized:!0,confirmOwnership:t})},e}return n}(s.a.Component);var En=Object(d.b)((function(e){return e.spend}))(bn),gn=n(43),vn=n(367),yn=n(1751),Pn=n(1027),On=n(544),Sn=n(1090),Tn=n.n(Sn),wn=Object(vn.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},menuItem:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingX:e.spacing(3)},menuLink:{color:"inherit",textDecoration:"none"}}})),In=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.title,r=e.classes,a=e.handleClose;return s.a.createElement("a",{href:t,className:r.menuLink},s.a.createElement(ve.a,{className:r.menuItem,onClick:a},n))}}]),n}(s.a.Component),xn=function(){var e=wn(),t=s.a.useState(null),n=Object(gn.a)(t,2),r=n[0],a=n[1];return s.a.createElement("div",{className:e.root},s.a.createElement(yn.a,{position:"static"},s.a.createElement(Pn.a,null,s.a.createElement(I.a,{variant:"h6",className:e.title},s.a.createElement(R.a,{color:"inherit",href:"#/"},"Caravan")),s.a.createElement(R.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){a(e.currentTarget)}},s.a.createElement(w.a,{mr:3},s.a.createElement(I.a,null,"Menu")),s.a.createElement(Tn.a,null)),s.a.createElement(On.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){return a(null)}},[{href:"#/wallet",title:"Wallet"},{href:"#/address",title:"Create Address"},{href:"#/script",title:"Script Explorer"},{href:"#/test",title:"Test Suite"},{href:"#/help",title:"Help"}].map((function(t){var n=t.href,r=t.title;return s.a.createElement(In,{href:n,title:r,classes:e,key:n,handleClose:function(){return a(null)}})}))))))},jn=n(1091),Cn=n(1700),kn=function(){return s.a.createElement(w.a,{mt:2},s.a.createElement("hr",null),s.a.createElement(x.a,{container:!0,justify:"space-between",alignItems:"center"},s.a.createElement(x.a,{item:!0,sm:2},Object(H.b)("https://www.unchained-capital.com",s.a.createElement("img",{src:Cn,className:"logo",alt:"Unchained Capital logo",height:"32"}))),s.a.createElement(x.a,{item:!0,sm:6},s.a.createElement("p",null,"Copyright\xa0",new Date(Date.now()).getFullYear()," by Unchained Capital and released under an MIT license.")),s.a.createElement(x.a,{item:!0,sm:1,align:"right"},s.a.createElement("p",null," v",jn.a," "))))},Rn=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).state={error:null,errorInfo:null},r}return Object(b.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t,error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.error,r=t.errorInfo;return r?s.a.createElement(w.a,{m:4},s.a.createElement(w.a,{m:2},s.a.createElement(I.a,{variant:"h3",component:"h1"},"Something went wrong.")),s.a.createElement(w.a,{m:2},s.a.createElement(I.a,{variant:"body1"},"Let us know what happened on"," ",s.a.createElement("a",{href:"https://github.com/unchained-capital/caravan/issues",target:"_blank",rel:"noopener noreferrer"},"github"),".")),s.a.createElement(w.a,{mx:2,my:3},s.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},n&&n.toString(),s.a.createElement("br",null),r.componentStack))):e}}]),n}(s.a.Component),Nn=n(809),An=n(168),Kn=n(1767),Bn={clearErrorNotification:nt.clearErrorNotification},_n=Object(d.b)((function(e){return e.errorNotification}),Bn)((function(e){var t=e.open,n=e.message,r=e.clearErrorNotification;return s.a.createElement(Nn.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,onClose:r,ContentProps:{"aria-describedby":"error-notification"},message:s.a.createElement("span",{id:"error-notification"},n),action:[s.a.createElement(An.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},s.a.createElement(Kn.a,null))]})})),Dn=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(O.a,null),s.a.createElement(T.SnackbarProvider,{maxSnack:3},s.a.createElement(S.a,{maxWidth:"lg"},s.a.createElement(xn,null),s.a.createElement(Rn,null,s.a.createElement(y.a,null,s.a.createElement(P.d,null,s.a.createElement(P.b,{path:"/test",component:Yt}),s.a.createElement(P.b,{path:"/address",component:Le}),s.a.createElement(P.a,{from:"/spend",to:"/script"}),s.a.createElement(P.b,{path:"/script",component:En}),s.a.createElement(P.b,{path:"/wallet",component:V.a}),s.a.createElement(P.b,{path:"/help",component:G}),s.a.createElement(P.b,{path:"/",component:G}))),s.a.createElement(_n,null)),s.a.createElement(kn,null))))},Mn=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).history=Object(v.a)(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.resetApp;this.unlisten=this.history.listen((function(){e()}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return s.a.createElement(Dn,null)}}]),n}(i.Component);var Un=Object(d.b)(null,(function(e){return{resetApp:function(){return e({type:"RESET_APP_STATE"})}}}))(Mn),Fn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ln(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var zn=function(e,t){return Object(X.a)(Object(X.a)({},e),t)},Wn={network:Q.MAINNET,totalSigners:3,requiredSigners:2,addressType:Q.P2SH,startingAddressIndex:0,frozen:!1},Hn=n(67),qn={type:"public",url:"",username:"",password:"",urlError:"",usernameError:"",passwordError:"",status:"unknown"},Gn=n(29),Vn=n.n(Gn),Xn=n(32),Yn={present:!0,bip32Path:"",publicKeys:[],multisig:{},address:"",balanceSats:new Vn.a(0),utxos:[],change:!1,spend:!1,fetchedUTXOs:!1,fetchUTXOsError:"",addressUsed:!1,addressKnown:!0},Jn={nodes:{},trailingEmptyNodes:0,fetchUTXOsErrors:0,balanceSats:new Vn.a(0),spendingSats:new Vn.a(0),nextNode:null};function Zn(e,t){var n=Object(X.a)(Object(X.a)(Object(X.a)({},Yn),e.nodes[t.value.bip32Path]||{}),t.value),r={};r[n.bip32Path]=n;var a=Object(X.a)(Object(X.a)({},e),{nodes:Object(X.a)(Object(X.a)({},e.nodes),r)});if("undefined"!==typeof t.value.spend&&(a.spendingSats=t.value.spend?e.spendingSats.plus(n.balanceSats):e.spendingSats.minus(n.balanceSats)),t.value.balanceSats){var o=e.nodes[n.bip32Path]?e.nodes[n.bip32Path].balanceSats:Vn()(0);a.balanceSats=e.balanceSats.plus(n.balanceSats.minus(o))}var i=0,s=0,c=Object.keys(a.nodes);c.sort((function(e,t){var n=(e||"").split("/"),r=(t||"").split("/");return parseInt(n[2],10)-parseInt(r[2],10)}));for(var u=!1,l=0;l<c.length;l+=1){var d=c[c.length-(l+1)],p=a.nodes[d];p.fetchedUTXOs&&(!p.balanceSats.isEqualTo(0)||p.addressUsed||u?u=!0:i+=1),""!==p.fetchUTXOsError&&(s+=1)}return a.trailingEmptyNodes=i,a.fetchUTXOsErrors=s,a.nextNode=function(e){for(var t=Object.values(e.nodes),n=0;n<t.length;n+=1){var r=t[n];if(r.balanceSats.isEqualTo(0)&&!r.addressUsed)return r}return null}(a),a}function Qn(e){var t=Object(X.a)({},e);return Object.values(t.nodes).forEach((function(e){e.spend=!1})),t}var $n=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Xn.c:return Qn(t);case Xn.b:return zn(t,{fetchUTXOsErrors:0,nodes:Object.values(t.nodes).reduce((function(e,t){var n=e;return n[t.bip32Path]=Object(X.a)(Object(X.a)({},t),{},{fetchUTXOsError:""}),n}),{})});case e:return Zn(t,n);default:return t}}},er=n(60);function tr(e){var t=(new Date).getTime().toString(),n=Object.values(e.extendedPublicKeyImporters).map((function(e){return e.extendedPublicKey})).join("");return"".concat(t,"-").concat(n)}var nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(Q.multisigBIP32Root)(Q.P2SH,Q.MAINNET),bip32PathModified:!1,method:"",extendedPublicKey:"",rootXfp:"",finalized:!1,conflict:!1}};function rr(){return{extendedPublicKeyImporters:Object(Ye.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(X.a)(Object(X.a)({},e),{},{[t]:nr("Extended Public Key ".concat(t))})}),{}),defaultBIP32Path:Object(Q.multisigBIP32Root)(Q.P2SH,Q.MAINNET),network:Q.MAINNET,addressType:Q.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",configuring:!0}}function ar(e,t){t.finalizedNetwork&&(e.conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType)}function or(e,t,n){var r={};r[n]=t.value;var a=Object(X.a)(Object(X.a)({},e),{nodes:{}});return a.extendedPublicKeyImporters[t.number]=zn(e.extendedPublicKeyImporters[t.number],r),Object.values(a.extendedPublicKeyImporters).reduce((function(e,t){return e+t.finalized}),0)===Object.keys(a.extendedPublicKeyImporters).length&&"finalized"===n&&Object.values(a.extendedPublicKeyImporters).every((function(e){return!e.conflict}))&&(a.configuring=!1),ar(a.extendedPublicKeyImporters[t.number],e),zn(a,{fingerprint:tr(a)})}function ir(e,t){for(var n=t.value,r={},a=1;a<=n;a+=1)r[a]=e.extendedPublicKeyImporters[a]||nr("Extended Public Key ".concat(a));var o=0;return Object.keys(r).forEach((function(e){r[e].finalized&&(o+=1)})),Object(X.a)(Object(X.a)({},e),{},{configuring:o<n},{extendedPublicKeyImporters:r})}function sr(e,t,n){for(var r=1;r<=Object.values(e.extendedPublicKeyImporters).length;r+=1){var a=t.extendedPublicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=n),ar(a,t)}}function cr(e,t){var n=e.addressType,r=t.value,a=Object(Q.multisigBIP32Root)(n,r),o=Object(X.a)(Object(X.a)({},e),{network:r,defaultBIP32Path:a});return sr(e,o,a),o}function ur(e,t){var n=t.value,r=e.network,a=Object(Q.multisigBIP32Root)(n,r),o=Object(X.a)(Object(X.a)({},e),{addressType:n,defaultBIP32Path:a});return sr(e,o,a),o}function lr(e,t){var n=Object(X.a)({},e);if(!0===t.value&&""===e.finalizedNetwork)n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.extendedPublicKeyImporters).reduce((function(e,t){return!0===t.finalized?e+1:e}),0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.extendedPublicKeyImporters).forEach((function(e){return e.conflict=!1})))}return n}function dr(e){var t=(new Date).getTime().toString(),n=Object.values(e.publicKeyImporters).map((function(e){return e.publicKey})).join("");return"".concat(t,"-").concat(n)}var pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,bip32Path:Object(Q.multisigBIP32Path)(Q.P2SH,Q.MAINNET),bip32PathModified:!1,method:"",publicKey:"",finalized:!1,conflict:!1}};function mr(){return{publicKeyImporters:Object(Ye.a)(Array(4).keys()).slice(1).reduce((function(e,t){return Object(X.a)(Object(X.a)({},e),{},{[t]:pr("Public Key ".concat(t))})}),{}),defaultBIP32Path:Object(Q.multisigBIP32Path)(Q.P2SH,Q.MAINNET),network:Q.MAINNET,addressType:Q.P2SH,fingerprint:"",finalizedNetwork:"",finalizedAddressType:"",address:""}}function hr(e,t){if(1===t.number)return e;var n=Object(X.a)({},e),r=e.publicKeyImporters[t.number-1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number-1]=a,n.publicKeyImporters[t.number]=r,zn(n,{fingerprint:dr(n)})}function fr(e,t){if(t.number===Object.values(e.publicKeyImporters).length)return e;var n=Object(X.a)({},e),r=e.publicKeyImporters[t.number+1],a=e.publicKeyImporters[t.number];return n.publicKeyImporters[t.number+1]=a,n.publicKeyImporters[t.number]=r,zn(n,{fingerprint:dr(n)})}function br(e){for(var t=Object.values(e.publicKeyImporters),n=t.map((function(e){return e.publicKey})).sort().map((function(e){return t.find((function(t){return t.publicKey===e}))})),r={},a=1;a<=n.length;a+=1)r[a]=n[a-1];var o=Object(X.a)(Object(X.a)({},e),{publicKeyImporters:r});return zn(o,{fingerprint:dr(o)})}function Er(e,t){if(t.finalizedNetwork){var n=Object(X.a)({},t.publicKeyImporters);return n[e].conflict=t.finalizedNetwork!==t.network||t.finalizedAddressType!==t.addressType,zn(t,{publicKeyImporters:n})}return t}function gr(e,t,n){var r={};r[n]=t.value;var a=Object(X.a)({},e);return a.publicKeyImporters[t.number]=zn(e.publicKeyImporters[t.number],r),a=Er(t.number,e),zn(a,{fingerprint:dr(a)})}function vr(e,t){for(var n=t.value,r={},a=1;a<=n;a+=1)r[a]=e.publicKeyImporters[a]||Object(X.a)(Object(X.a)({},pr()),{name:"Public Key ".concat(a)});var o=Object(X.a)(Object(X.a)({},e),{publicKeyImporters:r,stub:t.type});return zn(o,{fingerprint:dr(o)})}function yr(e,t){for(var n=Object(X.a)({},e),r=1;r<=Object.values(e.publicKeyImporters).length;r+=1){var a=n.publicKeyImporters[r];a.bip32PathModified||a.finalized||(a.bip32Path=t),n=Er(r,n)}return n}function Pr(e,t){var n=t.value,r=e.addressType,a=Object(Q.multisigBIP32Path)(r,n),o=Object(X.a)(Object(X.a)({},e),{network:n,defaultBIP32Path:a});return o=yr(o,a)}function Or(e,t){var n=e.network,r=t.value,a=Object(Q.multisigBIP32Path)(r,n),o=Object(X.a)(Object(X.a)({},e),{addressType:r,defaultBIP32Path:a});return o=yr(o,a)}function Sr(e,t){var n=Object(X.a)({},e);if(!0===t.value&&""===e.finalizedNetwork&&"text"!==n.publicKeyImporters[t.number].method)n.finalizedNetwork=e.network,n.finalizedAddressType=e.addressType;else if(!1===t.value&&""!==e.finalizedNetwork){1===Object.values(e.publicKeyImporters).reduce((function(e,t){return!0===t.finalized&&"text"!==t.method?e+1:e}),0)&&(n.finalizedNetwork="",n.finalizedAddressType="",Object.values(n.publicKeyImporters).forEach((function(e){return e.conflict=!1})))}return n}var Tr={walletMode:Xn.j.VIEW,walletName:"My Multisig Wallet",nodesLoaded:!1};function wr(e){return zn(e,{walletMode:Xn.j.VIEW})}var Ir={chosen:!1,publicKeyImporter:Object(X.a)({},{bip32Path:"",method:"",publicKey:""}),network:Q.MAINNET,addressType:Q.P2SH,publicKeys:[],address:"",defaultBIP32Path:Object(Q.multisigBIP32Path)(Q.P2SH,Q.MAINNET)};function xr(e,t,n){var r={};return r[n]=t.value,Object(X.a)(Object(X.a)({},e),{publicKeyImporter:Object(X.a)(Object(X.a)({},e.publicKeyImporter),r)})}function jr(e,t){var n=t.value,r=Object(Q.multisigAddressType)(n),a=Object(Q.multisigBIP32Path)(r,e.network);return Object(X.a)(Object(X.a)({},e),{network:e.network,addressType:r,publicKeys:Object(Q.multisigPublicKeys)(n),address:n.address,defaultBIP32Path:a})}var Cr=n(87),kr={name:"",method:"",publicKeys:[],signature:[],bip32Path:"",finalized:!1},Rr={};function Nr(e,t){for(var n={},r=1;r<=t.value;r+=1)n[r]=Object(X.a)(Object(X.a)({},kr),{name:"Signature ".concat(r)});return n}function Ar(e,t,n){var r={};r[n]=t.value;var a=Object(X.a)({},e);return a[t.number]=zn(e[t.number],r),a}function Kr(e,t){var n=Object(X.a)({},e);return n[t.number]=zn(e[t.number],t.value),n}function Br(e,t){var n=e.txid.toLowerCase(),r=t.txid.toLowerCase();return n<r?-1:n>r?1:e.n<t.n?-1:e.n>t.n?1:0}var _r=function(){return{chosen:!1,network:Q.MAINNET,inputs:[],inputsTotalSats:new Vn.a(0),outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],changeOutputIndex:0,feeRate:"",feeRateError:"",fee:"",feeError:"",finalizedOutputs:!1,txid:"",balanceError:"",addressType:Q.P2SH,requiredSigners:2,totalSigners:3,unsignedTransaction:{},isWallet:!1,autoSpend:!0,changeAddress:"",updatesComplete:!0,signingKeys:[0,0],spendingStep:Qt.v}};function Dr(e,t){var n=t.value.reduce((function(e,t){return e.plus(t.amountSats)}),new Vn.a(0));return zn(e,{inputs:t.value.sort(Br),inputsTotalSats:n})}function Mr(e,t,n){return Object(Q.satoshisToBitcoins)(Object(Q.estimateMultisigTransactionFee)({addressType:e.addressType,numInputs:e.inputs.length,numOutputs:n,m:e.requiredSigners,n:e.totalSigners,feesPerByteInSatoshis:t})).toFixed(8).toString()}function Ur(e,t){for(var n=Object(X.a)({},e),r=[],a=0;a<n.outputs.length;a+=1)a!==t.number-1?r.push(n.outputs[a]):t.number===n.changeOutputIndex&&(n.changeOutputIndex=0),t.number<n.changeOutputIndex&&(n.changeOutputIndex-=1);return Object(X.a)(Object(X.a)({},n),{outputs:r,fee:Mr(n,n.feeRate,r.length)})}function Fr(e,t){var n=t.value,r=Object(Q.validateFeeRate)(n),a=""===r?Mr(e,n,e.outputs.length):"";return zn(e,{feeRate:n,feeRateError:r,fee:a,feeError:""})}function Lr(e,t){var n=t.value,r=Object(Q.bitcoinsToSatoshis)(n),a=Object(Q.validateFee)(r,e.inputsTotalSats);return zn(e,{fee:n,feeError:a,feeRateError:""})}function zr(e){var t=e.outputs.concat({address:"",amount:"",amountSats:"",addressError:"",amountError:""});return Object(X.a)(Object(X.a)({},e),{outputs:t,fee:Mr(e,e.feeRate,t.length)})}function Wr(e,t){var n=Object(Ye.a)(e.outputs),r=t.value,a=Object(Q.validateAddress)(r,e.network);if(""===a)for(var o=0;o<e.inputs.length;o+=1){var i=e.inputs[o];if(i.multisig&&r===i.multisig.address){a="Output address cannot equal input address.";break}}if(""===a)for(var s=0;s<e.outputs.length;s+=1)if(s!==t.number-1&&e.outputs[s].address===r){a="Duplicate output address.";break}return n[t.number-1].address=r,n[t.number-1].addressError=a,Object(X.a)(Object(X.a)({},e),{outputs:n})}function Hr(e,t){var n=Object(Ye.a)(e.outputs);return n[t.number-1].multisig=t.value,Object(X.a)(Object(X.a)({},e),{outputs:n})}function qr(e,t){var n=Object(Ye.a)(e.outputs),r=t.value,a=Object(Q.bitcoinsToSatoshis)(Vn()(r)),o=Object(Q.validateOutputAmount)(a,e.inputsTotalSats);e.isWallet&&"Total input amount must be positive."===o&&(o=""),e.isWallet&&"Output amount is too large."===o&&(o="");var i=Vn()(r).dp();return i>8&&(r=r.slice(0,8-i)),n[t.number-1].amount=r,n[t.number-1].amountError=o,n[t.number-1].amountSats=o?"":a,Object(X.a)(Object(X.a)({},e),{outputs:n})}function Gr(e,t){var n;try{var r=Object(Q.unsignedMultisigPSBT)(e.network,e.inputs,e.outputs);n=Object(Q.unsignedTransactionObjectFromPSBT)(r)}catch(a){n=Object(Q.unsignedMultisigTransaction)(e.network,e.inputs,e.outputs)}return Object(X.a)(Object(X.a)({},e),{finalizedOutputs:t.value,unsignedTransaction:n})}function Vr(e,t){return zn(e,{requiredSigners:t.value,signingKeys:Array(t.value).fill(0)})}function Xr(e,t){var n=Object(Ye.a)(e.signingKeys);return n[t.number-1]=t.value,zn(e,{signingKeys:n})}function Yr(e){return zn(e,{outputs:[{address:"",amount:"",amountSats:"",addressError:"",amountError:""}],fee:"",balanceError:"",changeOutputIndex:0})}function Jr(e){var t=zn(e,Object(X.a)(Object(X.a)({},_r()),{},{totalSigners:e.totalSigners,network:e.network,addressType:e.addressType,isWallet:e.isWallet,changeAddress:e.changeAddress}));return t=Yr(t=Vr(t,{value:e.requiredSigners}))}function Zr(e){var t=Object(X.a)({},e);if(t.outputs.find((function(e){return""!==e.addressError||""!==e.amountError}))||""!==t.feeError||""!==t.feeRateError||0===t.inputs.length)return Object(X.a)(Object(X.a)({},t),{},{balanceError:""});var n=Object(Q.bitcoinsToSatoshis)(new Vn.a(t.fee)),r=function(e){return e.outputs.reduce((function(e,t){var n=t.amount;return e.plus(Object(Q.bitcoinsToSatoshis)(new Vn.a(n||0)))}),new Vn.a(0))}(t);if(!t.inputsTotalSats.isEqualTo(r.plus(n))){var a,o=r.plus(n).minus(t.inputsTotalSats);if(o.isNaN())a="Cannot calculate total.";else{t=zn(t,{updatesComplete:!0});var i=o.isLessThan(0)?"Increase":"Decrease";a="".concat(i," by ").concat(Object(Q.satoshisToBitcoins)(o.absoluteValue()).toFixed(8),".")}return Object(X.a)(Object(X.a)({},t),{},{balanceError:a})}var s=new Vn.a(Mr(t,"1",0));return new Vn.a(t.fee).isLessThan(s)?Object(X.a)(Object(X.a)({},t),{},{balanceError:"Fee is too small. Should be no less than ".concat(Object(Q.bitcoinsToSatoshis)(s)," satoshis.")}):Object(X.a)(Object(X.a)({},t),{},{balanceError:""})}var Qr={type:"",version:"",note:"",status:fe.PENDING},$r=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," public key at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return s.a.createElement("p",null,"Export a public key at BIP32 path",s.a.createElement("code",null,this.params.bip32Path),".")}},{key:"interaction",value:function(){return Object(fe.ExportPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=Q.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.pub,n=e.rootFingerprint;return this.params.keystore===fe.HERMIT?t:{publicKey:t,rootFingerprint:n}}}]),n}(Kt),ea=function(e){switch(e){case fe.COLDCARD:return[new $r({keystore:e,network:Q.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new $r({keystore:e,network:Q.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new $r({keystore:e,network:Q.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new $r({keystore:e,network:Q.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})];default:return[new $r({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/1'/0'/0/0"}),new $r({keystore:e,network:Q.TESTNET,bip32Path:"m/48'/1'/0'/1'/0/0"}),new $r({keystore:e,network:Q.TESTNET,bip32Path:"m/48'/1'/0'/2'/0/0"}),new $r({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new $r({keystore:e,network:Q.MAINNET,bip32Path:"m/48'/0'/0'/1'/0/0"}),new $r({keystore:e,network:Q.MAINNET,bip32Path:"m/48'/0'/0'/2'/0/0"})]}},ta=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"postprocess",value:function(e){return e.pubkey?e.pubkey:e}},{key:"name",value:function(){return"Export ".concat(this.params.network," xpub at ").concat(this.params.bip32Path)}},{key:"description",value:function(){return s.a.createElement("p",null,"Export an extended public key at BIP32 path"," ",s.a.createElement("code",null,this.params.bip32Path))}},{key:"interaction",value:function(){return Object(fe.ExportExtendedPublicKey)({keystore:this.params.keystore,network:this.params.network,bip32Path:this.params.bip32Path,includeXFP:!0})}},{key:"expected",value:function(){var e=Q.TEST_FIXTURES.keys.open_source.nodes[this.params.bip32Path],t=e.xpub,n=e.tpub,r=e.rootFingerprint;return this.params.keystore===fe.HERMIT?{xpub:t,bip32Path:this.params.bip32Path}:this.params.network===Q.MAINNET||this.params.keystore===fe.TREZOR?{xpub:t,rootFingerprint:r}:this.params.keystore===fe.LEDGER||this.params.keystore===fe.COLDCARD?{xpub:n,rootFingerprint:r}:{tpub:n,rootFingerprint:r}}}]),n}(Kt),na=function(e){switch(e){case fe.COLDCARD:return[new ta({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/1/0"}),new ta({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0/0"})];case fe.LEDGER:case fe.TREZOR:default:return[new ta({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/0'/0'"}),new ta({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/0'/0'/0"}),new ta({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/0'/0'/0/0"}),new ta({keystore:e,network:Q.TESTNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"}),new ta({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0'/0'"}),new ta({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0'/0'/0"}),new ta({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0'/0'/0/0"}),new ta({keystore:e,network:Q.MAINNET,bip32Path:"m/45'/0'/4'/99'/2147483647/3/1"})]}},ra=n(732),aa=n(734),oa=n(444),ia=n(97),sa=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"postprocess",value:function(e){return e.signatures?e.signatures:e}},{key:"matches",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"description",value:function(){return s.a.createElement(w.a,null,s.a.createElement("p",null,"Sign a transaction which",this.params.description,"."),s.a.createElement("p",null,s.a.createElement("small",null,"This transaction is not meant to be broadcast, but just in case, the output address is fixed and owned by Unchained Capital.")),s.a.createElement(ra.a,null,s.a.createElement(aa.a,null,s.a.createElement(oa.a,null,s.a.createElement(ia.a,null,"Output Address:"),s.a.createElement(ia.a,null,Object(H.b)(Object(Q.blockExplorerAddressURL)(this.outputAddress(),this.params.network),s.a.createElement("code",null,this.outputAddress())))),s.a.createElement(oa.a,null,s.a.createElement(ia.a,null,"Output Amount:"),s.a.createElement(ia.a,null,Object(Q.satoshisToBitcoins)(this.outputAmountSats()).toString()," BTC")),s.a.createElement(oa.a,null,s.a.createElement(ia.a,null,"Change Output Address:"),s.a.createElement(ia.a,null,s.a.createElement("code",null,this.changeOutputAddress()))),s.a.createElement(oa.a,null,s.a.createElement(ia.a,null,"Change Output Amount:"),s.a.createElement(ia.a,null,Object(Q.satoshisToBitcoins)(this.changeOutputAmountSats()).toString()," ","BTC")),s.a.createElement(oa.a,null,s.a.createElement(ia.a,null,"Fees:"),s.a.createElement(ia.a,null,Object(Q.satoshisToBitcoins)(this.feeSats()).toString()," BTC")))))}},{key:"inputsTotalSats",value:function(){return this.params.inputs.reduce((function(e,t){return e+t.amountSats.toNumber()}),0)}},{key:"outputAddress",value:function(){return this.params.outputs[0].address}},{key:"outputAmountSats",value:function(){return this.params.outputs[0].amountSats.toNumber()}},{key:"changeOutputAddress",value:function(){return this.params.outputs[1].address}},{key:"changeOutputAmountSats",value:function(){return this.params.outputs[1].amountSats.toNumber()}},{key:"feeSats",value:function(){return this.inputsTotalSats()-this.outputAmountSats()-this.changeOutputAmountSats()}},{key:"unsignedTransaction",value:function(){var e;try{var t=Object(Q.unsignedMultisigPSBT)(this.params.network,this.params.inputs,this.params.outputs);e=Object(Q.unsignedTransactionObjectFromPSBT)(t)}catch(n){e=Object(Q.unsignedMultisigTransaction)(this.params.network,this.params.inputs,this.params.outputs)}return e}},{key:"interaction",value:function(){return Object(fe.SignMultisigTransaction)({keystore:this.params.keystore,network:this.params.network,inputs:this.params.inputs,outputs:this.params.outputs,bip32Paths:this.params.bip32Paths})}},{key:"expected",value:function(){return this.params.keystore===fe.COLDCARD?this.params.byteCeilingSignature:this.params.signature}}]),n}(Kt);function ca(e){var t=[];switch(e){case fe.HERMIT:return Q.TEST_FIXTURES.transactions.forEach((function(n){n.segwit||t.push(new sa(Object(X.a)(Object(X.a)({},n),{keystore:e})))})),t;default:return Q.TEST_FIXTURES.transactions.map((function(t){return new sa(Object(X.a)(Object(X.a)({},t),{keystore:e}))}))}}var ua=ea(fe.TREZOR).concat(na(fe.TREZOR)).concat(ca(fe.TREZOR)),la=ea(fe.LEDGER).concat(na(fe.LEDGER)).concat(ca(fe.LEDGER)),da=ea(fe.HERMIT).concat(na(fe.HERMIT)).concat(ca(fe.HERMIT)),pa=ea(fe.COLDCARD).concat(na(fe.COLDCARD)).concat(ca(fe.COLDCARD)),ma={};ma[fe.TREZOR]=ua,ma[fe.LEDGER]=la,ma[fe.HERMIT]=da,ma[fe.COLDCARD]=pa;Q.TEST_FIXTURES.bip39Phrase;var ha={startedAt:"",endedAt:"",status:fe.PENDING,message:"",note:""},fa={started:!1,startedAt:"",endedAt:"",testRuns:[],currentTestRunIndex:-1},ba=function(e){return""===e.keystoreType?[]:(ma[e.keystoreType]||[]).map((function(e){return Object(X.a)(Object(X.a)({},ha),{test:e})}))},Ea=function(e,t,n){return Object(X.a)(Object(X.a)({},e),{testRuns:e.testRuns.map((function(e,r){return r===t?Object(X.a)(Object(X.a)({},e),n):e}))})},ga={message:"",open:!1},va=Object(l.c)({ownership:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir,t=arguments.length>1?arguments[1]:void 0,n=xr(e,{value:""},"publicKey");switch(t.type){case"CHOOSE_CONFIRM_OWNERSHIP":return zn(e,{chosen:!0});case Zt.c:return zn(e,{network:t.value});case"SET_OWNERSHIP_MULTISIG":return jr(e,t);case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return xr(n,t,"bip32Path");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return xr(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return xr(e,t,"publicKey");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return xr(e,{value:e.defaultBIP32Path},"bip32Path");case"RESET_PUBLIC_KEY_IMPORTER":return Object(X.a)(Object(X.a)({},e),{publicKeyImporter:Object(X.a)(Object(X.a)({},e.publicKeyImporter),{bip32Path:e.defaultBIP32Path,publicKey:""})});default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt.b:return zn(e,{chosen:!0});case Zt.c:return zn(e,{network:t.value});case Zt.a:return zn(e,{addressType:t.value});case Qt.q:return Vr(e,t);case Qt.t:return zn(e,{totalSigners:t.value});case Qt.m:return Zr(Dr(e,t));case Qt.a:return Zr(zr(e));case Qt.i:return zn(e,{changeOutputIndex:t.value});case Qt.j:return Hr(e,t);case Qt.o:return Zr(Wr(e,t));case Qt.p:return Zr(qr(e,t));case Qt.c:return Zr(Ur(e,t));case Qt.l:return Zr(Fr(e,t));case Qt.k:return Zr(Lr(e,t));case Qt.d:return Gr(e,t);case Qt.e:return Yr(e);case Qt.u:return zn(e,{txid:t.value});case Qt.n:return zn(e,{isWallet:!0});case Qt.f:return Jr(e);case Qt.y:return zn(e,{autoSpend:t.value});case Qt.r:return Xr(e,t);case Qt.h:return zn(e,{changeAddress:t.value});case Xn.c:return Dr(e,{value:[]});case Qt.g:return zn(e,{balanceError:t.value});case Qt.s:return zn(e,{spendingStep:t.value});default:return e}},signatureImporters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt.f:return Object(X.a)({},Rr);case Qt.q:return Nr(0,t);case Cr.e:return Ar(e,t,"name");case Cr.d:return Ar(e,t,"method");case Cr.a:return Ar(e,t,"bip32Path");case Cr.g:return Ar(e,t,"signature");case Cr.f:return Ar(e,t,"publicKeys");case Cr.c:return Ar(e,t,"finalized");case Cr.b:return Kr(e,t);default:return e}}}),ya=Object(l.c)({deposits:$n(Xn.g),change:$n(Xn.f),common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xn.h:return zn(e,{walletMode:t.value});case Xn.i:return zn(e,{walletName:t.value});case Xn.e:return wr(e);case Xn.a:return zn(e,{nodesLoaded:!0});default:return e}}}),Pa=Object(l.c)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt.c:return zn(e,{network:t.value});case Zt.f:return zn(e,{totalSigners:t.value});case Zt.d:return zn(e,{requiredSigners:t.value});case Zt.e:return zn(e,{startingAddressIndex:t.value});case Zt.a:return zn(e,{addressType:t.value});case Zt.b:return zn(e,{frozen:t.value});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hn.c:return zn(e,{type:t.value});case Hn.d:return zn(e,{url:t.value});case Hn.f:return zn(e,{username:t.value});case Hn.a:return zn(e,{password:t.value});case Hn.e:return zn(e,{urlError:t.value});case Hn.g:return zn(e,{usernameError:t.value});case Hn.b:return zn(e,{passwordError:t.value});default:return e}},address:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt.c:return Pr(e,t);case Zt.a:return Or(e,t);case Zt.f:return vr(e,t);case"SET_PUBLIC_KEY_IMPORTER_NAME":return gr(e,t,"name");case"RESET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return gr(gr(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_BIP32_PATH":return gr(gr(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case"SET_PUBLIC_KEY_IMPORTER_METHOD":return gr(e,t,"method");case"SET_PUBLIC_KEY_IMPORTER_PUBLIC_KEY":return gr(e,t,"publicKey");case"SET_PUBLIC_KEY_IMPORTER_FINALIZED":return gr(Sr(e,t),t,"finalized");case"MOVE_PUBLIC_KEY_IMPORTER_UP":return hr(e,t);case"MOVE_PUBLIC_KEY_IMPORTER_DOWN":return fr(e,t);case"SORT_PUBLIC_KEY_IMPORTERS":return br(e);case"UPDATE_MULTISIG_ADDRESS":return zn(e,{address:t.value});default:return e}},spend:va,quorum:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt.c:return cr(e,t);case Zt.a:return ur(e,t);case Zt.f:return ir(e,t);case er.g:return or(e,t,"name");case er.b:return or(or(e,t,"bip32Path"),{number:t.number,value:!0},"bip32PathModified");case er.a:return or(or(e,{number:t.number,value:e.defaultBIP32Path},"bip32Path"),{number:t.number,value:!1},"bip32PathModified");case er.f:return or(e,t,"method");case er.c:return or(e,t,"extendedPublicKey");case er.d:return or(e,t,"rootXfp");case er.e:return or(lr(e,t),t,"finalized");case er.h:return Object(X.a)(Object(X.a)({},e),{configuring:t.value});default:return e}},wallet:ya,testSuiteRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(X.a)(Object(X.a)({},e),{testRuns:ba(t)});case qe:return Object(X.a)(Object(X.a)({},e),{started:!0,startedAt:Pt()(),currentTestRunIndex:0});case Ge:return Object(X.a)(Object(X.a)({},e),{currentTestRunIndex:t.value});case rt:return Ea(e,t.testRunIndex,{startedAt:Pt()(),status:fe.ACTIVE});case at:return Ea(e,t.testRunIndex,{endedAt:Pt()(),status:t.status,message:t.message});case ot:return Ea(e,t.testRunIndex,ha);case it:return Ea(e,t.testRunIndex,{note:t.note});default:return e}},keystore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(X.a)(Object(X.a)({},e),{type:t.keystoreType,version:t.version});case Ze:return Object(X.a)(Object(X.a)({},e),{note:t.value});case Qe:return Object(X.a)(Object(X.a)({},e),{status:t.value});default:return e}},errorNotification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt.SET_ERROR_NOTIFICATION:return Object(X.a)(Object(X.a)({},e),{open:!0,message:t.value});case nt.CLEAR_ERROR_NOTIFICATION:return Object(X.a)(Object(X.a)({},e),{open:!1,message:""});default:return e}}}),Oa=function(e,t){var n=e;return t.type!==Xn.d&&"RESET_APP_STATE"!==t.type||(n=void 0),Pa(n,t)},Sa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Ta=Object(l.e)(Oa,Sa(Object(l.a)(m.a,h.a)));u.a.render(s.a.createElement(d.a,{store:Ta},s.a.createElement(Un,null)),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("/caravan",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/caravan","/service-worker.js");Fn?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ln(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Ln(e)}))}}()},205:function(e,t,n){"use strict";var r=n(10),a=n.n(r),o=n(2),i=n(16),s=n(43),c=n(0),u=n.n(c),l=n(367),d=n(26),p=n(51),m=n(96),h=n(208),f=n(1724),b=n(443),E=n(126),g=n(1074),v=n.n(g),y=n(124),P=(n(234),Object(l.a)((function(){return{tooltip:{fontSize:".8rem"}}})));function O(e){var t=e.addresses,n=void 0===t?[]:t,r=e.client,l=e.importCallback,g=Object(c.useState)(!1),O=Object(s.a)(g,2),S=O[0],T=O[1],w=Object(c.useState)(""),I=Object(s.a)(w,2),x=I[0],j=I[1],C=Object(c.useState)(!1),k=Object(s.a)(C,2),R=k[0],N=k[1],A=Object(c.useState)(""),K=Object(s.a)(A,2),B=K[0],_=K[1],D=Object(c.useState)(!1),M=Object(s.a)(D,2),U=M[0],F=M[1],L=P();Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(a.a.mark((function e(){var t,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!1),t=n[n.length-1]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(y.b)(Object(o.a)(Object(o.a)({},Object(y.e)(r)),{},{address:t}));case 7:(i=e.sent)&&"undefined"!==typeof i.used?F(!1):F(!0),_(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),s=e.t0.response&&e.t0.response.status||"unknown",c=401===s?e.t0.response.statusText:500===s?e.t0.response.data.error.message:e.t0.message||"An unknown address error occured",_(c);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();"private"!==r.type||U&&1!==n.length||e()}),[n,r]);var z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(e?"A":"a","ddress").concat(n&&n.length>1?"es":"")};function W(){return(W=Object(i.a)(a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.prev=1,e.next=4,Object(y.c)(Object(o.a)(Object(o.a)({},Object(y.e)(r)),{addresses:n,label:"",rescan:R}));case 4:if(t=e.sent,i=t.result.reduce((function(e,t){return t.error&&t.error.message||e}),""),j(i),T(!i.length),!l){e.next=12;break}return s=t.result.filter((function(e){return e.success})),e.next=12,l(s,R);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),j("Unable to import, check your settings and try again"),T(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var H="To get accurate information from your node, your ".concat(z(),"\nwill need to be imported to your node. Importing will give you accurate balance information\nhowever to know if an address has been used prior to import, a rescan needs to take place.");return u.a.createElement(d.a,{className:L.container},u.a.createElement(p.a,{component:"span",ml:2},u.a.createElement(m.a,{variant:"contained",disabled:!U&&!R||!n.length,onClick:function(){return W.apply(this,arguments)}},"Import ",z(!0))),u.a.createElement(p.a,{component:"span",ml:2},u.a.createElement(h.a,{control:u.a.createElement(f.a,{checked:R,onChange:function(e){return N(e.target.checked)},color:"secondary"}),label:"Rescan"}),u.a.createElement(b.a,{title:H,classes:{tooltip:L.tooltip}},u.a.createElement(v.a,{fontSize:"small",color:"disabled"}))),u.a.createElement(p.a,null,B.length>0&&u.a.createElement(E.a,{error:!0},B),x.length>0&&u.a.createElement(E.a,{error:!0},x),S&&R&&u.a.createElement(E.a,null,z(!0)," imported, rescan of your node may take some time."),S&&!R&&u.a.createElement(E.a,null,z(!0)," imported.")))}O.defaultProps={addresses:[],importCallback(){}},t.a=O},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"t",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return E})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"u",(function(){return y})),n.d(t,"f",(function(){return P})),n.d(t,"n",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return T})),n.d(t,"y",(function(){return w})),n.d(t,"h",(function(){return I})),n.d(t,"r",(function(){return x})),n.d(t,"s",(function(){return j})),n.d(t,"g",(function(){return C})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return R})),n.d(t,"x",(function(){return N})),n.d(t,"A",(function(){return A})),n.d(t,"S",(function(){return K})),n.d(t,"W",(function(){return B})),n.d(t,"N",(function(){return _})),n.d(t,"z",(function(){return D})),n.d(t,"J",(function(){return M})),n.d(t,"K",(function(){return U})),n.d(t,"Q",(function(){return F})),n.d(t,"R",(function(){return L})),n.d(t,"H",(function(){return z})),n.d(t,"I",(function(){return W})),n.d(t,"C",(function(){return H})),n.d(t,"B",(function(){return q})),n.d(t,"M",(function(){return G})),n.d(t,"L",(function(){return V})),n.d(t,"D",(function(){return X})),n.d(t,"E",(function(){return Y})),n.d(t,"G",(function(){return J})),n.d(t,"F",(function(){return Z})),n.d(t,"V",(function(){return Q})),n.d(t,"O",(function(){return $})),n.d(t,"X",(function(){return ee})),n.d(t,"T",(function(){return te})),n.d(t,"U",(function(){return ne})),n.d(t,"P",(function(){return re}));var r=n(29),a=n.n(r),o=n(5),i=n(71),s=n(238),c="CHOOSE_PERFORM_SPEND",u="SET_REQUIRED_SIGNERS",l="SET_TOTAL_SIGNERS",d="SET_INPUTS",p="ADD_OUTPUT",m="SET_OUTPUT_ADDRESS",h="SET_OUTPUT_AMOUNT",f="DELETE_OUTPUT",b="SET_FEE_RATE",E="SET_FEE",g="FINALIZE_OUTPUTS",v="RESET_OUTPUTS",y="SET_TXID",P="RESET_TRANSACTION",O="SET_IS_WALLET",S="SET_CHANGE_OUTPUT_INDEX",T="SET_CHANGE_OUTPUT_MULTISIG",w="UPDATE_AUTO_SPEND",I="SET_CHANGE_ADDRESS",x="SET_SIGNING_KEY",j="SET_SPEND_STEP",C="SET_BALANCE_ERROR",k=0,R=1,N=2;function A(){return{type:c}}function K(e){return{type:u,value:e}}function B(e){return{type:l,value:e}}function _(e){return{type:d,value:e}}function D(){return{type:p}}function M(e){return{type:S,value:e}}function U(e,t){return{type:T,number:e,value:t}}function F(e,t){return{type:m,number:e,value:t}}function L(e,t){return{type:h,number:e,value:t}}function z(e){return{type:I,value:e}}function W(e){var t=e.value,n=e.address;return function(e,r){var a=r().spend.transaction,o=a.outputs,i=a.changeOutputIndex;i||e(D());var s=i||o.length+1;e(M(s)),e(z(n)),e(F(s,n)),e(L(s,t))}}function H(e){return{type:f,number:e}}function q(){return function(e,t){var n=t().spend.transaction.changeOutputIndex;n&&e(H(n))}}function G(e){return{type:b,value:e}}function V(e){return{type:E,value:e}}function X(e){return{type:g,value:e}}function Y(){return{type:v}}function J(e){return{type:C,value:e}}function Z(){return{type:P}}function Q(e){return{type:y,value:e}}function $(){return{type:O}}function ee(e){return{type:w,value:e}}function te(e,t){return{type:x,number:e,value:t}}function ne(e){return{type:j,value:e}}function re(e){return function(t,n){var r=Object(i.getSpendableSlices)(n()),c=Object(i.getConfirmedBalance)(n()),u=n(),l=u.settings,d=l.addressType,p=l.requiredSigners,m=l.totalSigners,h=u.spend.transaction,f=h.outputs,b=h.feeRate,E=r.reduce((function(e,t){return e+t.utxos.length}),0),g=Object(o.estimateMultisigTransactionFee)({addressType:d,numInputs:E,numOutputs:f.length,m:p,n:m,feesPerByteInSatoshis:b}),v=f.reduce((function(e,t){return e.plus(t.amount.length?t.amountSats:0)}),new a.a(0)),y=Object(o.satoshisToBitcoins)(new a.a(c).minus(f.length>1?v:0).minus(g));return y.isLessThanOrEqualTo(Object(o.satoshisToBitcoins)(g))&&f.length>1||y.isLessThan(s.c)?t(J("Not enough available funds for max spend. Clear other outputs or wait for incoming deposits to confirm.")):t(L(e,y.toFixed()))}}},234:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(431);a.a.bool,a.a.string,a.a.array,a.a.shape({}),a.a.string.isRequired,a.a.shape(o.a),a.a.array,a.a.bool.isRequired,a.a.bool.isRequired,a.a.bool,a.a.string.isRequired,a.a.bool,a.a.bool.isRequired,a.a.string,a.a.string.isRequired,a.a.string,a.a.string,a.a.string,a.a.string,a.a.string,a.a.string,a.a.string,a.a.string,a.a.number,a.a.number,a.a.string,a.a.bool},237:function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return p}));var r=n(43),a=n(0),o=n.n(a),i=n(7),s=n(26),c=n(126),u=n(96),l=n(580),d=function(e){var t=Object(a.useState)(i.PENDING),n=Object(r.a)(t,2),d=n[0],p=n[1],m=Object(a.useState)(""),h=Object(r.a)(m,2),f=h[0],b=h[1],E=e.interaction,g=e.qrStartText,v=e.fileStartText,y=e.shouldShowFileReader,P=e.fileType,O=e.onClear,S=e.onSuccess,T=function(){p(i.PENDING),b(""),O&&O()};if(d===i.PENDING){var w=E.messagesFor({state:d,code:"keystone.command"});return o.a.createElement("div",null,w.map((function(e,t){return o.a.createElement("p",{key:"message".concat(t)},e.instructions)})),o.a.createElement("p",null,"When you are ready, scan the QR code produced by Keystone or upload the file generated by Keystone:"),o.a.createElement(s.a,{container:!0,spacing:2},o.a.createElement(l.a,{shouldShowFileReader:y,fileStartText:v,qrStartText:g,interaction:E,handleError:function(e){p("error"),b(e.message),O&&O()},handleSuccess:function(e){S(e),p("success")},handleStop:T,fileType:P})))}return"error"===d||"success"===d?o.a.createElement("div",null,o.a.createElement(c.a,{error:!0},f),o.a.createElement(u.a,{variant:"contained",color:"secondary",size:"small",onClick:T},"Reset")):null};d.defaultProps={qrStartText:"",fileStartText:"",fileType:"json"};var p=d,m=n(136),h=n(1757),f=n(582),b=n(1770),E=n(362),g=n.n(E),v=n(372),y=n.n(v),P=function(e){var t=e.urEncoder,n=e.title,i=e.description,c=e.close,l=e.renderDescription,d=Object(a.useState)(t.nextPart()),p=Object(r.a)(d,2),m=p[0],h=p[1],E=Object(a.useState)(240),v=Object(r.a)(E,2),P=v[0],O=v[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return h(t.nextPart())}),300);return function(){clearInterval(e)}}),[t]),o.a.createElement(f.a,{open:!0,onClose:c},o.a.createElement("div",{className:y.a.qrPlayerContainer},n&&o.a.createElement("p",{className:y.a.qrPlayerTitle},n.toUpperCase()),i&&o.a.createElement("p",null,i),l&&l(),o.a.createElement("div",{className:y.a.qrPlayerCodeContainer},o.a.createElement(g.a,{size:P,value:m,level:"L"})),o.a.createElement(b.a,{name:"QR Size",min:240,max:360,onChange:function(e,t){O(t)}}),o.a.createElement(s.a,{container:!0,spacing:1,direction:"row-reverse"},o.a.createElement(s.a,{item:!0},o.a.createElement(u.a,{variant:"outlined",onClick:c},"Close")))))},O=function(e){var t=e.startText,n=e.buttonStyle,i=Object(m.a)(e,["startText","buttonStyle"]),s=Object(a.useState)(!1),c=Object(r.a)(s,2),l=c[0],d=c[1],p=n.variant,f=n.color,b=n.withIcon;return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{startIcon:b?o.a.createElement(h.a,null):void 0,variant:p,color:f,onClick:function(){return d(!0)}},t),l&&o.a.createElement(P,Object.assign({},i,{close:function(){return d(!1)}})))};O.defaultProps={buttonStyle:{variant:"contained",color:"primary",withIcon:!1},title:"",description:"",renderDescription:function(){return null}};var S=O,T=function(e){var t=e.data,n=Object(m.a)(e,["data"]),r=(new i.KeystonePSBTPlayer).encode(t);return o.a.createElement(S,Object.assign({},n,{urEncoder:r}))};T.defaultProps={buttonStyle:{variant:"contained",color:"primary",withIcon:!1},title:"",description:"",renderDescription:function(){return null}};var w=T,I=function(e){var t=e.data,n=Object(m.a)(e,["data"]),r=(new i.KeystoneWalletPlayer).encode(t);return o.a.createElement(S,Object.assign({},n,{urEncoder:r}))};I.defaultProps={buttonStyle:{variant:"contained",color:"primary",withIcon:!1},title:"",description:"",renderDescription:function(){return null}};var x=I},238:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(29),a=n.n(r),o=n(5),i=546,s=Object(o.satoshisToBitcoins)(a()(i)),c="/1",u="m"+c},253:function(e,t,n){"use strict";var r=n(11),a=n(14),o=n(13),i=n(0),s=n.n(i),c=n(7),u=n(573),l=n.n(u),d=n(26),p=n(51),m=n(96),h=n(126),f=n(48),b=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state,t=e.status,n=e.error,r=a.props,o=r.interaction,i=r.width,u=r.startText;if(t===c.PENDING){var b=o.messageFor({state:t,code:"hermit.command"});return s.a.createElement("div",null,s.a.createElement("p",null,b.instructions),s.a.createElement(d.a,{container:!0,justify:"center",className:"mb-2"},s.a.createElement(f.a,{text:b.command,showText:!1},s.a.createElement("code",null,s.a.createElement("strong",null,b.mode,">")," ",b.command))),s.a.createElement("p",null,"When you are ready, scan the QR code produced by Hermit:"),s.a.createElement(p.a,{mt:2},s.a.createElement(m.a,{variant:"contained",color:"primary",className:"mt-2",size:"large",onClick:a.handleStart},u)))}return t===c.ACTIVE?s.a.createElement(d.a,{container:!0,direction:"column"},s.a.createElement(d.a,{item:!0},s.a.createElement(l.a,{delay:300,onError:a.handleError,onScan:a.handleScan,style:{width:i},facingMode:"user"})),s.a.createElement(d.a,{item:!0},s.a.createElement(m.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Cancel"))):"error"===t||"success"===t?s.a.createElement("div",null,s.a.createElement(h.a,{error:!0},n),s.a.createElement(m.a,{variant:"contained",color:"secondary",size:"small",onClick:a.handleStop},"Reset")):null},a.handleStart=function(){var e=a.props.onStart;a.setState({status:c.ACTIVE,error:""}),e&&e()},a.handleError=function(e){var t=a.props.onClear;a.setState({status:"error",error:e.message}),t&&t()},a.handleScan=function(e){var t=a.props,n=t.onSuccess,r=t.interaction;if(e)try{n(r.parse(e)),a.setState({status:"success"})}catch(o){a.handleError(o)}},a.handleStop=function(){var e=a.props.onClear;a.setState({status:c.PENDING,error:""}),e&&e()},a.state={status:c.PENDING,error:""},a}return n}(i.Component);b.defaultProps={width:"256px",startText:"Scan"},t.a=b},255:function(e,t,n){"use strict";var r=n(11),a=n(14),o=n(13),i=n(0),s=n.n(i),c=n(26),u=n(441),l=n(168),d=n(1715),p=n(1716),m=n(1717),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){var e=a.props.name;a.setState({newName:e})},a.render=function(){var e=a.props.name,t=a.state,n=t.editing,r=t.newName,o=t.error;return n?s.a.createElement(c.a,{container:!0,alignItems:"center"},s.a.createElement(c.a,{item:!0},s.a.createElement(u.a,{autoFocus:!0,label:"Name",value:r,onChange:a.handleChange,onFocus:function(e){setTimeout(e.target.select.bind(e.target),20)},onKeyDown:function(e){return"Enter"===e.key?a.submit():null},error:a.hasError(),helperText:o})),s.a.createElement(c.a,{item:!0},s.a.createElement(l.a,{"data-cy":"save-button",size:"small",onClick:a.submit,disabled:a.hasError()},s.a.createElement(d.a,null))),s.a.createElement(c.a,{item:!0},s.a.createElement(l.a,{"data-cy":"cancel-button",color:"secondary",size:"small",onClick:a.cancel},s.a.createElement(p.a,null)))):s.a.createElement("span",null,s.a.createElement(l.a,{"data-cy":"edit-button",size:"small",onClick:a.startEditing},s.a.createElement(m.a,null)),"\xa0",s.a.createElement("span",{"data-cy":"editable-name-value",style:{cursor:"pointer"},onClick:a.startEditing},e))},a.hasError=function(){return""!==a.state.error},a.startEditing=function(e){var t=a.props.name;e.preventDefault(),a.setState({editing:!0,newName:t})},a.handleChange=function(e){var t=e.target.value,n="";null!==t&&void 0!==t&&""!==t||(n="Name cannot be blank."),a.setState({newName:t,error:n})},a.submit=function(){var e=a.props;(0,e.setName)(e.number,a.state.newName),a.setState({editing:!1})},a.cancel=function(){var e=a.props.name;a.setState({error:"",newName:e,editing:!1})},a.state={editing:!1,newName:"",error:""},a}return n}(s.a.Component);t.a=h},256:function(e,t,n){"use strict";var r=n(11),a=n(18),o=n(14),i=n(13),s=n(0),c=n.n(s),u=n(20),l=n(5),d=n(51),p=n(55),m=n(26),h=n(373),f=n(750),b=n(35),E=n(48),g=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderScript=function(e,t){var n=Object(l.scriptToHex)(t),r=Object(l.scriptToOps)(t);return c.a.createElement(d.a,{mt:2},c.a.createElement(p.a,{variant:"h6"},e),c.a.createElement(m.a,{container:!0,spacing:2},c.a.createElement(m.a,{item:!0,sm:6},c.a.createElement(E.a,{text:n,showIcon:!0,code:!0})),c.a.createElement(m.a,{item:!0,sm:6},c.a.createElement(E.a,{text:r,showIcon:!0,code:!0}))))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.multisig,r=e.showAddress,a=n.address,o=Object(l.multisigRedeemScript)(n),i=Object(l.multisigWitnessScript)(n);return c.a.createElement(d.a,{mt:2,style:{maxWidth:"1080px"}},r&&c.a.createElement(p.a,{variant:"h6"},"Address"),c.a.createElement(p.a,{align:"center",variant:"h5"},c.a.createElement(m.a,{container:!0,direction:"column",spacing:2},r&&c.a.createElement(m.a,{item:!0},c.a.createElement(E.a,{text:a,showIcon:!0,code:!0}),"\xa0",Object(b.b)(Object(l.blockExplorerAddressURL)(a,t),c.a.createElement(f.a,null))),c.a.createElement(m.a,{item:!0,justify:"center",container:!0,spacing:3},c.a.createElement(m.a,{item:!0},c.a.createElement(h.a,{label:"BTC"})),c.a.createElement(m.a,{item:!0},c.a.createElement(h.a,{label:Object(l.networkLabel)(t)})),c.a.createElement(m.a,{item:!0},c.a.createElement(h.a,{label:"".concat(Object(l.multisigRequiredSigners)(n),"-of-").concat(Object(l.multisigTotalSigners)(n))})),c.a.createElement(m.a,{item:!0},c.a.createElement(h.a,{label:Object(l.multisigAddressType)(n)}))))),this.renderScript("Script",n),o&&this.renderScript("Redeem Script",o),i&&this.renderScript("Witness Script",i))}}]),n}(c.a.Component);g.defaultProps={showAddress:!0};t.a=Object(u.b)((function(e){return e.settings}),{})(g)},257:function(e,t,n){"use strict";var r=n(10),a=n.n(r),o=n(16),i=n(11),s=n(18),c=n(14),u=n(13),l=n(0),d=n.n(l),p=n(20),m=n(307),h=n(26),f=n(376),b=n(308),E=n(370),g=n(442),v=n(208),y=n(309),P=n(126),O=n(85),S=n(135),T=n(67),w=n(441),I=n(51),x=n(96),j=n(35),C=function(e){var t=e.handleUrlChange,n=e.handleUsernameChange,r=e.handlePasswordChange,a=e.client,o=e.urlError,i=e.usernameError,s=e.passwordError,c=e.privateNotes,u=e.connectSuccess,l=e.connectError,p=e.testConnection;return d.a.createElement("div",null,d.a.createElement("p",null,"A ",d.a.createElement("code",null,"bitcoind"),"-compatible client is required to query UTXO data, estimate fees, and broadcast transactions."),d.a.createElement("p",null,d.a.createElement("small",null,"Due to CORS requirements, you must use a proxy around the node. Instructions are available ",Object(j.b)("https://github.com/unchained-capital/caravan#adding-cors-headers","here"),".")),d.a.createElement("form",null,d.a.createElement(h.a,{container:!0,direction:"column",spacing:1},d.a.createElement(h.a,{item:!0},d.a.createElement(w.a,{fullWidth:!0,label:"URL",value:a.url,onChange:t,error:""!==o,helperText:o})),d.a.createElement(h.a,{item:!0},d.a.createElement(w.a,{id:"bitcoind-username",fullWidth:!0,label:"Username",value:a.username,onChange:n,error:""!==i,helperText:i})),d.a.createElement(h.a,{item:!0},d.a.createElement(w.a,{id:"bitcoind-password",fullWidth:!0,type:"password",label:"Password",value:a.password,onChange:r,error:""!==s,helperText:s})),d.a.createElement(h.a,{item:!0},d.a.createElement(I.a,{mt:1},d.a.createElement(x.a,{variant:"contained",onClick:p},"Test Connection")),d.a.createElement(I.a,{mt:2},u&&d.a.createElement(P.a,null,"Connection Success!"),""!==l&&d.a.createElement(P.a,{error:!0},l))))),c)};C.defaultProps={urlError:"",usernameError:"",passwordError:"",privateNotes:d.a.createElement("span")};var k=C,R=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).handleTypeChange=function(e){var t=r.props,n=t.setType,a=t.network,o=t.setUrl,i=r.state.urlEdited,s=e.target.value;"private"!==s||i||o("http://localhost:".concat("mainnet"===a?8332:18332)),n(s)},r.handleUrlChange=function(e){var t=r.props,a=t.setUrl,o=t.setUrlError,i=r.state.urlEdited,s=e.target.value,c=n.validateUrl(s);i||c||r.setState({urlEdited:!0}),a(s),o(c)},r.handleUsernameChange=function(e){var t=r.props,a=t.setUsername,o=t.setUsernameError,i=e.target.value,s=n.validateUsername(i);a(i),o(s)},r.handlePasswordChange=function(e){var t=r.props,a=t.setPassword,o=t.setPasswordError,i=e.target.value,s=n.validatePassword(i);a(i),o(s)},r.testConnection=Object(o.a)(a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.network,o=t.client,i=t.onSuccess,r.setState({connectError:"",connectSuccess:!1}),e.prev=2,e.next=5,Object(O.c)(n,o);case 5:i&&i(),r.setState({connectSuccess:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.setState({connectError:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),r.state={urlEdited:!1,connectError:"",connectSuccess:!1},r}return Object(s.a)(n,null,[{key:"validatePassword",value:function(){return""}},{key:"validateUsername",value:function(){return""}},{key:"validateUrl",value:function(e){return/^http(s)?:\/\/[^\s]+$/.exec(e)?"":"Must be a valid URL."}}]),Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.urlError,a=t.usernameError,o=t.passwordError,i=t.privateNotes,s=this.state,c=s.connectSuccess,u=s.connectError;return d.a.createElement(m.a,null,d.a.createElement(h.a,{container:!0,justify:"space-between"},d.a.createElement(f.a,{title:"Bitcoin Client"})),d.a.createElement(b.a,null,d.a.createElement(h.a,{item:!0},d.a.createElement(E.a,{component:"fieldset"},d.a.createElement(g.a,null,d.a.createElement(v.a,{id:"public",control:d.a.createElement(y.a,{color:"primary"}),name:"clientType",value:"public",label:d.a.createElement("strong",null,"Public"),onChange:this.handleTypeChange,checked:"public"===n.type}),d.a.createElement(v.a,{id:"private",control:d.a.createElement(y.a,{color:"primary"}),name:"clientType",value:"private",label:"Private",onChange:this.handleTypeChange,checked:"private"===n.type})),"public"===n.type&&d.a.createElement(P.a,null,"'Public' uses the ",d.a.createElement("code",null,"blockstream.info")," API. Switch to private to use a ",d.a.createElement("code",null,"bitcoind")," node."),"private"===n.type&&d.a.createElement(k,{handleUrlChange:function(t){return e.handleUrlChange(t)},handleUsernameChange:function(t){return e.handleUsernameChange(t)},handlePasswordChange:function(t){return e.handlePasswordChange(t)},client:n,urlError:r,usernameError:a,passwordError:o,privateNotes:i,connectSuccess:c,connectError:u,testConnection:function(){return e.testConnection()}})))))}}]),n}(d.a.Component);R.defaultProps={urlError:"",usernameError:"",onSuccess:null,passwordError:"",privateNotes:d.a.createElement("span")};t.a=Object(p.b)((function(e){return{network:e.settings.network,client:e.client,urlError:e.client.urlError,url:e.client.url}}),Object(S.a)({setType:T.c,setUrl:T.d,setUsername:T.f,setPassword:T.a,setUrlError:T.e,setUsernameError:T.g,setPasswordError:T.b}))(R)},258:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}));var r=n(432),a=n(0),o=n.n(a),i=n(96),s=function(e){var t=e.handlePSBTDownloadClick,n=e.handleWalletConfigDownloadClick;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{type:"button",variant:"contained",color:"primary",onClick:t},"Download PSBT"),o.a.createElement(i.a,{type:"button",variant:"contained",onClick:n},"Download Coldcard Config"))}},283:function(e,t,n){"use strict";var r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.IndirectKeystoreInteraction=t.DirectKeystoreInteraction=t.UnsupportedInteraction=t.KeystoreInteraction=t.LEVELS=t.STATES=t.ERROR=t.WARNING=t.INFO=t.ACTIVE=t.PENDING=t.UNSUPPORTED=void 0,n(172),n(139),n(651),n(103),n(284),n(285),n(220),n(246),n(656),n(325),n(400);var a,o=(a=n(1289))&&a.__esModule?a:{default:a};function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))}}function u(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}t.UNSUPPORTED="unsupported";t.PENDING="pending";t.ACTIVE="active";t.INFO="info";t.WARNING="warning";t.ERROR="error";var E=["pending","active","unsupported"];t.STATES=E;var g=["info","warning","error"];t.LEVELS=g;var v=function(){function e(){h(this,e),this.environment=o.default.getParser(window.navigator.userAgent)}return b(e,[{key:"isSupported",value:function(){return!0}},{key:"messages",value:function(){return[]}},{key:"messagesFor",value:function(e){var t=e.state,n=e.level,r=e.code,a=e.text,o=e.version;return this.messages().filter((function(e){return(!t||e.state===t)&&((!n||e.level===n)&&(!(r&&!(e.code||"").match(r))&&(!(a&&!(e.text||"").match(a))&&!(o&&!(e.version||"").match(o)))))}))}},{key:"hasMessagesFor",value:function(e){var t=e.state,n=e.level,r=e.code,a=e.text,o=e.version;return this.messagesFor({state:t,level:n,code:r,text:a,version:o}).length>0}},{key:"messageFor",value:function(e){var t=e.state,n=e.level,r=e.code,a=e.text,o=e.version,i=this.messagesFor({state:t,level:n,code:r,text:a,version:o});return i.length>0?i[0]:null}},{key:"messageTextFor",value:function(e){var t=e.state,n=e.level,r=e.code,a=e.text,o=e.version,i=this.messageFor({state:t,level:n,code:r,text:a,version:o});return i?i.text:null}}]),e}();t.KeystoreInteraction=v;var y=function(e){function t(e){var n,r=e.text,a=e.code;return h(this,t),(n=u(this,d(t).call(this))).text=r,n.code=a,n}return p(t,e),b(t,[{key:"isSupported",value:function(){return!1}},{key:"messages",value:function(){var e=l(d(t.prototype),"messages",this).call(this);return e.push({state:"unsupported",level:"error",code:this.code,text:this.text}),e}},{key:"run",value:function(){var e=c(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(this.text);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){throw new Error(this.text)}},{key:"parse",value:function(){throw new Error(this.text)}}]),t}(v);t.UnsupportedInteraction=y;var P=function(e){function t(){var e;return h(this,t),(e=u(this,d(t).call(this))).direct=!0,e}return p(t,e),b(t,[{key:"run",value:function(){var e=c(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Override the `run` method in this interaction.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){throw new Error("This interaction is direct and does not support a `request` method.")}},{key:"parse",value:function(){throw new Error("This interaction is direct and does not support a `parse` method.")}}]),t}(v);t.DirectKeystoreInteraction=P;var O=function(e){function t(){var e;return h(this,t),(e=u(this,d(t).call(this))).indirect=!0,e}return p(t,e),b(t,[{key:"request",value:function(){throw new Error("Override the `request` method in this interaction.")}},{key:"parse",value:function(e){throw console.log(e),new Error("Override the `parse` method in this interaction.")}},{key:"run",value:function(){var e=c(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This interaction is indirect and does not support a `run` method.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(v);t.IndirectKeystoreInteraction=O},302:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(589),i=n(749),s=n(1097),c=n(55),u=n(554),l=n(1102);t.a=function(e){var t=e.message;return a.a.createElement("small",null,a.a.createElement(o.a,null,a.a.createElement(i.a,{color:"error.main"},a.a.createElement(s.a,null,a.a.createElement(c.a,{color:"error"},a.a.createElement(l.a,null))),a.a.createElement(u.a,null,a.a.createElement(c.a,{color:"error"},t)))))}},305:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d}));var r=n(95),a=n(47),o=n(238),i=function(e){return"asc"===e?-1:1};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.bip32Path&&!t.bip32Path)throw new Error("Mising BIP32 path for comparing slices.");var r=i(n);if(e.change&&!t.change)return r;if(!e.change&&t.change)return-r;var a=parseInt(e.bip32Path.split("/").reverse()[0],10),o=parseInt(t.bip32Path.split("/").reverse()[0],10);return a>o?r:-r}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.balanceSats&&!t.balanceSats)throw new Error("Missing balance for comparing slices");var r=i(n);return e.balanceSats.isEqualTo(t.balanceSats)?0:e.balanceSats.isGreaterThan(t.balanceSats)?r:-r}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e.utxos&&!t.utxos)throw new Error("Missing utxo array for comparing slices");var r=i(n);return e.utxos.length===t.utxos.length?0:e.utxos.length>t.utxos.length?r:-r}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",r=i(n);if(!e.utxos&&!t.utxos&&!e.lastUsed&&!t.lastUsed)return 0;if("Spent"===e.lastUsed)return t.lastUsed&&"Spent"!==t.lastUsed?-r:r;if("Spent"===t.lastUsed)return e.lastUsed&&"Spent"!==e.lastUsed?r:-r;if(e.lastUsedTime&&t.lastUsedTime)return e.lastUsedTime===t.lastUsedTime?0:e.lastUsedTime>=t.lastUsedTime?r:-r;if(e.lastUsedTime&&(!t.lastUsedTime||0===t.utxos.length))return r;if(t.lastUsedTime&&(!e.lastUsedTime||0===e.utxos.length))return-r;if(0===e.utxos.length)return 0===t.utxos.length?0:r;if(0===t.utxos.length)return 0===e.utxos.length?0:-r;var o=Math.max.apply(Math,Object(a.a)(e.utxos.map((function(e){return e.time})))),s=Math.max.apply(Math,Object(a.a)(t.utxos.map((function(e){return e.time}))));return Number.isNaN(o)&&Number.Number.isNaN(s)?0:Number.isNaN(o)?r:Number.isNaN(s)?-r:o>s?r:-r}function d(e){var t=o.b.length;if(e.slice(0,t)===o.b&&e.slice(t).match(/^([0-9]+)$/g))return!0;var n,a=e.match(/\/([0-9]+('?))/g).slice(-2),i=Object(r.a)(a);try{for(i.s();!(n=i.n()).done;){if(n.value.includes("'"))return!1}}catch(s){i.e(s)}finally{i.f()}return a[0]===o.a&&2===a.length}},32:function(e,t,n){"use strict";n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"i",(function(){return P})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return T})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return I})),n.d(t,"j",(function(){return x})),n.d(t,"s",(function(){return j})),n.d(t,"r",(function(){return C})),n.d(t,"n",(function(){return k})),n.d(t,"k",(function(){return R})),n.d(t,"t",(function(){return N})),n.d(t,"q",(function(){return A})),n.d(t,"u",(function(){return K})),n.d(t,"p",(function(){return B})),n.d(t,"o",(function(){return _})),n.d(t,"l",(function(){return D})),n.d(t,"m",(function(){return M}));var r=n(47),a=n(10),o=n.n(a),i=n(16),s=n(43),c=n(2),u=n(5),l=n(29),d=n.n(l),p=n(85),m=n(305),h=n(35),f=n(21),b=n(137),E=n(71),g="UPDATE_DEPOSIT_SLICE",v="UPDATE_CHANGE_SLICE",y="RESET_NODES_SPEND",P="UPDATE_WALLET_NAME",O="UPDATE_WALLET_MODE",S="RESET_WALLET_VIEW",T="RESET_WALLET",w="INITIAL_LOAD_COMPLETE",I="RESET_NODES_FETCH_ERRORS",x={VIEW:0,DEPOSIT:1,SPEND:2};function j(e){return{type:g,value:Object(c.a)(Object(c.a)({},e),{change:!1})}}function C(e){return{type:v,value:Object(c.a)(Object(c.a)({},e),{change:!0})}}function k(){return{type:y}}function R(){return function(e,t){var n,r,a,o=t(),i=o.settings,l=o.spend.transaction,p=o.wallet.change.nextNode.multisig.address,m=i.totalSigners,b=i.requiredSigners,g=i.addressType,v=l.outputs,y=l.feeRate,P=Object(E.getSpendableSlices)(t());try{var O=Object(h.c)({outputs:v,feesPerByteInSatoshis:y,m:b,n:m,addressType:g,slices:P}),S=Object(s.a)(O,2);n=S[0],r=S[1]}catch(j){return e(Object(f.G)(j.message))}var T={addressType:g,numInputs:n.length,m:b,n:m,feesPerByteInSatoshis:y};if(r){var w=v.reduce((function(e,t){return e.plus(t.amountSats)}),new d.a(0)),I=n.reduce((function(e,t){return e.plus(t.amountSats)}),new d.a(0));a=Object(u.estimateMultisigTransactionFee)(Object(c.a)(Object(c.a)({},T),{},{numOutputs:v.length+1}));var x=I.minus(a).minus(w).toFixed(8);e(Object(f.I)({address:p,value:Object(u.satoshisToBitcoins)(x).toFixed()}))}else a=Object(u.estimateMultisigTransactionFee)(Object(c.a)(Object(c.a)({},T),{},{numOutputs:v.length}));e(Object(f.L)(Object(u.satoshisToBitcoins)(a).toFixed())),e(Object(f.N)(n)),e(Object(f.D)(!0))}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(){var a=Object(i.a)(o.a.mark((function a(s,u){var l,d,h,f,E,y,P,O,S,T,w,I,x,j,C,k,R,A,K,B,_,D;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=u(),d=l.settings.network,h=l.client,f=l.spend.transaction,E=f.changeAddress,y=f.inputs,P=f.txid,O=l.wallet,S=O.deposits,T=S.nextNode,w=S.nodes,I=O.change.nodes,x=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(t,d,h);case 2:return r=e.sent,e.abrupt("return",Object(c.a)({addressUsed:!0,change:Object(m.e)(n),address:t,bip32Path:n},r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=Object(r.a)(y),e&&e.multisig.address===E&&j.push(e),C=[],k=new Set,j.forEach((function(e){var t=e.multisig.address;k.has(t)||n.has(t)||(k.add(t),C.push(x(t,e.bip32Path)))})),a.prev=7,a.next=10,Promise.all(C);case 10:R=a.sent,a.next=16;break;case 13:return a.prev=13,a.t0=a.catch(7),a.abrupt("return",s(Object(b.setErrorNotification)("There was a problem updating wallet state. Try a refresh. Error: ".concat(a.t0.message))));case 16:for(A=0;A<R.length;A+=1)K=R[A],B=K.change?I[K.bip32Path].utxos.length:w[K.bip32Path].utxos.length,K&&K.utxos&&K.utxos.length!==B&&(s({type:K.change?v:g,value:K}),n.add(K.address));if(n.size===R.length||!t){a.next=19;break}return a.abrupt("return",setTimeout((function(){return s(N(e,t-1,n))}),750));case 19:if(t){a.next=23;break}return _="There was a problem updating the wallet balance.\n      It is recommended you refresh the wallet to make sure UTXO current set is up to date.",P&&P.length&&(_+=" Transaction ID: ".concat(P)),a.abrupt("return",s(Object(b.setErrorNotification)(_)));case 23:return a.next=25,x(T.multisig.address,T.bip32Path);case 25:if((D=a.sent).utxos.length===w[D.bip32Path].utxos.length){a.next=28;break}return a.abrupt("return",s({type:g,value:D}));case 28:case"end":return a.stop()}}),a,null,[[7,13]])})));return function(e,t){return a.apply(this,arguments)}}()}function A(e){return{type:O,value:e}}function K(e,t){return{type:P,value:t}}function B(){return{type:S}}function _(){return{type:T}}function D(){return{type:w}}function M(){return{type:I}}},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p}));var r=n(2),a=n(29),o=n.n(a),i=n(438),s=n(238),c=n(0),u=n.n(c),l=function(e,t){return u.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)};function d(e,t){var n=new Blob([e],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,t);else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}function p(e){var t,n=e.slices,a=e.outputs,c=n.reduce((function(e,t){var n=e.count,r=e.balance;return{count:n+t.utxos.length,balance:t.balanceSats.plus(r)}}),{count:0,balance:new o.a(0)}),u=c.count,l=c.balance,d=a.reduce((function(e,t){return e.plus(t.amountSats)}),new o.a(0)),p=[],m=new o.a(0),h=function(e){var t=Object(r.a)(Object(r.a)({},e),{},{numOutputs:e.outputs.length}),n=Object(i.estimateMultisigTransactionFee)(t).toNumber(),a=t.outputs.reduce((function(e,t){return e.plus(t.amountSats)}),new o.a(0));if(a.plus(n).isGreaterThan(e.walletBalance))throw new Error("Wallet balance is insufficient to fund transaction");return new o.a(e.walletBalance).minus(n).minus(a).isLessThanOrEqualTo(s.d)}(Object(r.a)(Object(r.a)({},e),{},{walletBalance:l,numInputs:u}));h&&(t=!1);for(var f=0;f<n.length;f+=1){for(var b=n[f],E=b.utxos,g=0;g<E.length;g+=1)p.push(Object(r.a)(Object(r.a)({},E[g]),{},{multisig:b.multisig,bip32Path:b.bip32Path,change:b.change}));if(m=m.plus(b.balanceSats),!h){var v=Object(i.estimateMultisigTransactionFee)(Object(r.a)(Object(r.a)({},e),{},{numInputs:p.length,numOutputs:a.length})),y=Object(i.estimateMultisigTransactionFee)(Object(r.a)(Object(r.a)({},e),{},{numInputs:p.length,numOutputs:a.length+1})),P=m.minus(d);if(P.minus(v).isLessThanOrEqualTo(s.d)&&P.minus(v).isGreaterThanOrEqualTo(0)){t=!1;break}if(P.isGreaterThan(y)){t=!0;break}}}return[p,t]}},359:function(e,t,n){"use strict";var r=n(11),a=n(18),o=n(14),i=n(13),s=n(0),c=n.n(s),u=n(20),l=n(5),d=n(307),p=n(376),m=n(308),h=n(370),f=n(442),b=n(208),E=n(309),g=n(126),v=n(38),y=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleNetworkChange=function(t){(0,e.props.setNetwork)(t.target.value)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.frozen;return c.a.createElement(d.a,null,c.a.createElement(p.a,{title:"Network"}),c.a.createElement(m.a,null,c.a.createElement(h.a,{component:"fieldset"},c.a.createElement(f.a,null,c.a.createElement(b.a,{id:"mainnet",control:c.a.createElement(E.a,{color:"primary"}),name:"network",value:"mainnet",label:c.a.createElement("strong",null,"Mainnet"),onChange:this.handleNetworkChange,checked:t===l.MAINNET,disabled:n}),c.a.createElement(b.a,{id:"testnet",control:c.a.createElement(E.a,{color:"primary"}),name:"network",value:"testnet",label:"Testnet",onChange:this.handleNetworkChange,checked:t===l.TESTNET,disabled:n})),c.a.createElement(g.a,null,c.a.createElement("small",null,"Choose 'Mainnet' if you don't understand the difference.")))))}}]),n}(c.a.Component);var P={setNetwork:v.i};t.a=Object(u.b)((function(e){return{network:e.settings.network,frozen:e.settings.frozen}}),P)(y)},361:function(e,t,n){"use strict";var r=n(11),a=n(18),o=n(14),i=n(13),s=n(0),c=n.n(s),u=n(20),l=n(5),d=n(307),p=n(376),m=n(308),h=n(370),f=n(442),b=n(208),E=n(309),g=n(126),v=n(38),y=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleTypeChange=function(t){(0,e.props.setType)(t.target.value)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.addressType,n=e.frozen;return c.a.createElement(d.a,null,c.a.createElement(p.a,{title:"Address Type"}),c.a.createElement(m.a,null,c.a.createElement(h.a,{component:"fieldset"},c.a.createElement(f.a,null,c.a.createElement(b.a,{id:l.P2SH,control:c.a.createElement(E.a,{color:"primary"}),name:"type",value:l.P2SH,label:l.P2SH,onChange:this.handleTypeChange,checked:t===l.P2SH,disabled:n}),c.a.createElement(b.a,{id:l.P2SH_P2WSH,control:c.a.createElement(E.a,{color:"primary"}),name:"type",value:l.P2SH_P2WSH,label:l.P2SH_P2WSH,onChange:this.handleTypeChange,checked:t===l.P2SH_P2WSH,disabled:n}),c.a.createElement(b.a,{id:l.P2WSH,control:c.a.createElement(E.a,{color:"primary"}),name:"type",value:l.P2WSH,label:l.P2WSH,onChange:this.handleTypeChange,checked:t===l.P2WSH,disabled:n})),c.a.createElement(g.a,null,c.a.createElement("small",null,"Choose '",l.P2WSH,"' for best practices, '",l.P2SH,"' for greatest compatibility.")))))}}]),n}(c.a.Component);var P={setType:v.g};t.a=Object(u.b)((function(e){return e.settings}),P)(y)},364:function(e,t,n){"use strict";var r=n(2),a=n(11),o=n(18),i=n(14),s=n(13),c=n(0),u=n.n(c),l=n(20),d=n(5),p=n(444),m=n(97),h=n(581),f=n(55),b=n(732),E=n(733),g=n(734),v=n(736),y=n(750),P=n(29),O=n.n(P),S=n(35),T=n(48),w=n(21),I=(n(724),n(138)),x=n.n(I),j=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).filterInputs=function(e,t,n){return e.filter((function(e){var r=t.filter((function(t){return t.txid===e.txid&&t.index===e.index}));return n?r.length>0:0===r.length}))},o.toggleInput=function(e){var t=o.state.localInputs;o.setState({toggleAll:!1}),t[e].checked=!t[e].checked,o.setInputsAndUpdateDisplay(t)},o.toggleAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o.state,n=t.localInputs,r=t.toggleAll,a=!r;n.forEach((function(t){var n=t;return n.checked=null===e?a:e,n})),o.setInputsAndUpdateDisplay(n),o.setState({toggleAll:a})},o.setInputsAndUpdateDisplay=function(e){var t=o.props,n=t.setInputs,a=t.multisig,i=t.bip32Path,s=t.existingTransactionInputs,c=t.setSpendCheckbox,u=o.state.localInputs,l=e.filter((function(e){return e.checked}));a&&(l=l.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{multisig:a,bip32Path:i})})));var d=l.reduce((function(e,t){return e.plus(t.amountSats)}),new O.a(0));o.setState({inputsSatsSelected:d});var p=l;if(a){var m=o.filterInputs(s,u,!1);m.length>0&&(p=l.concat(m));var h=l.length;0===h?c(!1):h<u.length?c("indeterminate"):c(!0)}p.length>0?n(p):a&&n([])},o.renderInputs=function(){var e=o.props,t=e.network,n=e.showSelection,r=e.finalizedOutputs;return o.state.localInputs.map((function(e,a){var i="".concat(x.a.utxoTxid).concat(e.confirmed?"":" ".concat(x.a.unconfirmed)),s=e.confirmed?"confirmed":"unconfirmed";return u.a.createElement(p.a,{hover:!0,key:e.txid},n&&u.a.createElement(m.a,null,u.a.createElement(h.a,{"data-testid":"utxo-checkbox-".concat(a),checked:e.checked,onClick:function(){return o.toggleInput(a)},color:"primary",disabled:r})),u.a.createElement(m.a,null,a+1),u.a.createElement(m.a,{className:i},u.a.createElement(T.a,{text:e.txid,showIcon:!0,showText:!1},u.a.createElement("code",{title:s},e.txid))),u.a.createElement(m.a,null,u.a.createElement(T.a,{text:e.index.toString()})),u.a.createElement(m.a,null,u.a.createElement(T.a,{text:Object(d.satoshisToBitcoins)(e.amountSats).toString()})),u.a.createElement(m.a,null,Object(S.b)(Object(d.blockExplorerTransactionURL)(e.txid,t),u.a.createElement(y.a,null))))}))},o.state={inputsSatsSelected:e.inputsTotalSats,localInputs:e.inputs.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{checked:e.selectAll})})),toggleAll:!0},o}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.multisig){var t=this.props,n=t.node,r=t.existingTransactionInputs,a=this.state.localInputs,o=this.filterInputs(a,e.existingTransactionInputs,!0).length,i=this.filterInputs(a,r,!0).length,s=i===a.length;e.node.spend===n.spend&&i===o||!s||this.toggleAll(n.spend)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputsTotalSats,r=t.showSelection,a=void 0===r||r,o=t.hideSelectAllInHeader,i=t.finalizedOutputs,s=this.state,c=s.inputsSatsSelected,l=s.toggleAll,y=s.localInputs;return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{variant:"h5"},"Available Inputs (".concat(y.length,")")," "),u.a.createElement("p",null,"The following UTXOs will be spent as inputs in a new transaction."),u.a.createElement(b.a,null,u.a.createElement(E.a,null,u.a.createElement(p.a,{hover:!0},a&&!o&&u.a.createElement(m.a,null,u.a.createElement(h.a,{"data-testid":"utxo-check-all",checked:l,onClick:function(){return e.toggleAll()},color:"primary",disabled:i})),o&&u.a.createElement(m.a,null),u.a.createElement(m.a,null,"Number"),u.a.createElement(m.a,null,"TXID"),u.a.createElement(m.a,null,"Index"),u.a.createElement(m.a,null,"Amount (BTC)"),u.a.createElement(m.a,null,"View"))),u.a.createElement(g.a,null,this.renderInputs()),u.a.createElement(v.a,null,u.a.createElement(p.a,{hover:!0},u.a.createElement(m.a,{colSpan:3},"TOTAL:"),u.a.createElement(m.a,{colSpan:2},c?Object(d.satoshisToBitcoins)(c).toString():Object(d.satoshisToBitcoins)(n).toString())))))}}]),n}(u.a.Component);j.defaultProps={multisig:!1,bip32Path:"",showSelection:!0,hideSelectAllInHeader:!1,selectAll:!0,node:{},existingTransactionInputs:[],setSpendCheckbox:function(){}};var C={setInputs:w.N};t.a=Object(l.b)((function(e){return Object(r.a)(Object(r.a)({},e.settings),{},{finalizedOutputs:e.spend.transaction.finalizedOutputs,existingTransactionInputs:e.spend.transaction.inputs})}),C)(j)},365:function(e,t,n){"use strict";var r=n(11),a=n(14),o=n(13),i=n(0),s=n.n(i),c=n(20),u=n(96),l=n(48),d=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.state.showUnsignedTransaction,t=a.props.unsignedTransaction;if(e){var n=t.toHex();return s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement(u.a,{size:"small",onClick:a.handleHideUnsignedTransaction},"Hide Unsigned Transaction")),s.a.createElement("p",null,s.a.createElement(l.a,{text:n,showIcon:!0})))}return s.a.createElement("small",null,s.a.createElement(u.a,{size:"small",onClick:a.handleShowUnsignedTransaction},"Show Unsigned Transaction"))},a.handleShowUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!0})},a.handleHideUnsignedTransaction=function(){a.setState({showUnsignedTransaction:!1})},a.state={showUnsignedTransaction:!1},a}return n}(s.a.Component);t.a=Object(c.b)((function(e){return{unsignedTransaction:e.spend.transaction.unsignedTransaction}}),{})(d)},372:function(e,t,n){e.exports={qrPlayerContainer:"QR_qrPlayerContainer__1TpuJ",qrPlayerTitle:"QR_qrPlayerTitle__2UUA9",qrPlayerCodeContainer:"QR_qrPlayerCodeContainer__1PDkJ",qrScannerContainer:"QR_qrScannerContainer__2DQm4"}},38:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h}));var r="SET_NETWORK",a="SET_TOTAL_SIGNERS",o="SET_REQUIRED_SIGNERS",i="SET_STARTING_ADDRESS_INDEX",s="SET_ADDRESS_TYPE",c="SET_FROZEN";function u(e){return{type:r,value:e}}function l(e){return{type:a,value:e}}function d(e){return{type:o,value:e}}function p(e){return{type:i,value:e}}function m(e){return{type:s,value:e}}function h(e){return{type:c,value:e}}},431:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),a=n.n(r),o={c:a.a.arrayOf(a.a.number).isRequired,e:a.a.number.isRequired,s:a.a.number.isRequired}},432:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return I}));var r=n(10),a=n.n(r),o=n(16),i=n(11),s=n(14),c=n(13),u=n(0),l=n.n(u),d=n(6),p=n.n(d),m=n(1076),h=n.n(m),f=n(26),b=n(441),E=n(96),g=n(126),v=n(51),y=n(1727),P=n(5),O=n(448),S=n.n(O),T=function(t){Object(s.a)(r,t);var n=Object(c.a)(r);function r(t){var s;return Object(i.a)(this,r),(s=n.call(this,t)).render=function(){var e=s.props,t=e.maxFileSize,n=e.validFileFormats,r=e.extendedPublicKeyImporter,a=e.handleBIP32PathChange,o=e.resetBIP32Path,i=e.bip32PathIsDefault,c=e.hasError,u=e.errorMessage,d=e.isTest,p=s.state.fileType;return l.a.createElement(f.a,{container:!0,direction:"column"},"JSON"===p&&!d&&l.a.createElement(f.a,{container:!0},l.a.createElement(f.a,{item:!0,md:6},l.a.createElement(b.a,{label:"BIP32 Path",value:r.bip32Path,onChange:a,error:c,helperText:u})),l.a.createElement(f.a,{item:!0,md:6},!i()&&l.a.createElement(E.a,{type:"button",variant:"contained",size:"small",onClick:o},"Default")),l.a.createElement(g.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),l.a.createElement("p",null,"When you are ready, upload the ",p," file from your Coldcard:"),l.a.createElement(v.a,null,l.a.createElement(h.a,{className:c?S.a.dropzoneDull:S.a.dropzone,onDrop:s.onDrop,multiple:!1,minSize:1,maxSize:t,accept:n,disableClick:c},l.a.createElement(y.a,{classes:{root:S.a.uploadIcon}}),l.a.createElement("p",{className:S.a.instruction},"JSON"===p?"Upload The XPUB":"Upload Signed PSBT"))))},s.singleAcceptedFile=function(e,t){return 0===t.length&&1===e.length},s.onDrop=function(){var t=Object(o.a)(a.a.mark((function t(n,r){var o,i,c,u,l,d,p,m,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=s.props,i=o.onReceive,c=o.onReceivePSBT,u=o.setError,l=o.hasError,d=s.state.fileType,!l){t.next=4;break}return t.abrupt("return");case 4:if(!s.singleAcceptedFile(n,r)){t.next=29;break}if(p=n[0],"JSON"!==d){t.next=14;break}return t.t0=i,t.next=10,p.text();case 10:t.t1=t.sent,(0,t.t0)(t.t1),t.next=27;break;case 14:return t.next=16,p.arrayBuffer();case 16:if(m=t.sent,!(h=e.from(m).toString("hex")).startsWith(P.PSBT_MAGIC_HEX)){t.next=22;break}c(h),t.next=27;break;case 22:return t.t2=c,t.next=25,p.text();case 25:t.t3=t.sent,(0,t.t2)(t.t3);case 27:t.next=30;break;case 29:1===r.length?u("The file you attempted to upload was unacceptable. File type must be .".concat(d.toLowerCase(),".")):r.length>1&&u("This dropzone only accepts a single file.");case 30:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s.state={fileType:t.fileType||"JSON"},s}return r}(u.Component);T.defaultProps={onReceive:null,onReceivePSBT:null,handleBIP32PathChange:null,resetBIP32Path:null,bip32PathIsDefault:null,errorMessage:"",hasError:p.a.bool,maxFileSize:1048576,fileType:"JSON",validFileFormats:".json",extendedPublicKeyImporter:null,isTest:!1};var w=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(T);w.defaultProps={fileType:"JSON",validFileFormats:".json"};var I=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(T);I.defaultProps={fileType:"PSBT",validFileFormats:".psbt"}}).call(this,n(8).Buffer)},448:function(e,t,n){e.exports={uploadIcon:"ColdcardFileReader_uploadIcon__1gKkv",instruction:"ColdcardFileReader_instruction__2JEz4",dropzone:"ColdcardFileReader_dropzone__32-R_",dropzoneDull:"ColdcardFileReader_dropzoneDull__2lJaF ColdcardFileReader_dropzone__32-R_",uploadContainer:"ColdcardFileReader_uploadContainer__3NUxc"}},48:function(e,t,n){"use strict";var r=n(43),a=n(136),o=n(0),i=n.n(o),s=n(1069),c=n.n(s),u=n(1720),l=n(367),d=n(168),p=n(344),m=Object(l.a)((function(){return{copyText:{"&:hover":{cursor:"pointer"}},code:{fontSize:"1rem"}}})),h=function(e){var t=e.newline,n=e.text,s=e.children,l=e.showIcon,h=e.showText,f=e.code,b=Object(a.a)(e,["newline","text","children","showIcon","showText","code"]),E=Object(o.useState)(!1),g=Object(r.a)(E,2),v=g[0],y=g[1],P=Object(o.useState)(null),O=Object(r.a)(P,2),S=O[0],T=O[1],w=Object(p.useSnackbar)().enqueueSnackbar;Object(o.useEffect)((function(){S&&clearTimeout(S)}),[]);var I=m(),x=function(){return f?i.a.createElement("code",{className:I.code},n):i.a.createElement("span",null,n)};return i.a.createElement("span",Object.assign({onClick:function(e){return e.stopPropagation()}},b),i.a.createElement(c.a,{text:n,onCopy:function(){var e=setTimeout((function(){y(!1),T(null)}),1e3);y(!0),T(e),function(){var e=n.length>25?"".concat(n.substring(0,25),"..."):n;w("Copied ".concat(e," to clipboard"),{preventDuplicate:!0})}()},options:{format:"text/plain"}},i.a.createElement("span",{style:{fontStyle:v?"italic":"inherit",overflowWrap:"break-word"},className:"copyable ".concat(I.copyText)},s,h&&i.a.createElement(x,null),t&&i.a.createElement("br",null),l&&i.a.createElement(d.a,null,i.a.createElement(u.a,{fontSize:"small",color:v?"primary":"action"})))))};h.defaultProps={newline:!1,showIcon:!1,children:i.a.createElement("span"),showText:!0,code:!1},t.a=h},546:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(362),i=n.n(o),s=n(48),c=function(e){var t=e.width,n=e.string;return a.a.createElement(s.a,{text:n,newline:!0,showText:!1},a.a.createElement(i.a,{size:t,value:n,level:"L"}))};c.defaultProps={string:"",width:120},t.a=c},558:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(10),a=n.n(r),o=n(2),i=n(43),s=n(16),c=n(32),u=n(85),l=n(137),d=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(s.a)(a.a.mark((function e(n,r){var s,d,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r().settings.network,d=r(),p=d.client,e.prev=2,m=t.map((function(e){var t=e.multisig.address;return Promise.all([Object(u.b)(t,s,p),Object(u.d)(t,s,p)])})),e.next=6,Promise.all(m);case 6:e.sent.forEach((function(e,r){var a=Object(i.a)(e,2),s=a[0],u=a[1],l=t[r];if(s&&s.utxos.length){var d=l.change?c.r:c.s,p=Object(o.a)(Object(o.a)({bip32Path:l.bip32Path,addressKnown:!0},s),{},{addressStatus:u});n(d(p))}})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("There was a problem getting updated braid data:",e.t0.message),n(Object(l.setErrorNotification)(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},559:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(304),i=n(5),s=function(e){var t=e.network;return a.a.createElement(o.a,{"data-cy":"bitcoin-icon",htmlColor:t===i.MAINNET?"orange":"grey"},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"bitcoin",className:"svg-inline--fa fa-bitcoin fa-w-16",role:"img",viewBox:"0 0 512 512"},a.a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"})))};s.defaultProps={network:i.MAINNET},t.a=s},565:function(e,t,n){"use strict";var r=n(11),a=n(18),o=n(14),i=n(13),s=n(0),c=n.n(s),u=n(20),l=n(168),d=n(307),p=n(376),m=n(308),h=n(51),f=n(26),b=n(55),E=n(1099),g=n(1100),v=n(38),y=(n(716),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderIncrementRequiredSigners=function(){var t=e.props,n=t.requiredSigners,r=t.totalSigners,a=t.frozen,o=n===r||a;return c.a.createElement(l.a,{color:"primary",onClick:e.handleIncrementRequiredSigners,disabled:o},c.a.createElement(E.a,null))},e.renderDecrementRequiredSigners=function(){var t=e.props,n=t.requiredSigners,r=t.frozen,a=1===n||r;return c.a.createElement(l.a,{color:"secondary",onClick:e.handleDecrementRequiredSigners,disabled:a},c.a.createElement(g.a,null))},e.renderIncrementTotalSigners=function(){var t=e.props,n=t.totalSigners,r=t.frozen,a=7===n||r;return c.a.createElement(l.a,{color:"primary",onClick:e.handleIncrementTotalSigners,disabled:a},c.a.createElement(E.a,null))},e.renderDecrementTotalSigners=function(){var t=e.props,n=t.requiredSigners,r=t.totalSigners,a=t.frozen,o=r===n||2===r||a;return c.a.createElement(l.a,{color:"secondary",onClick:e.handleDecrementTotalSigners,disabled:o},c.a.createElement(g.a,null))},e.handleIncrementRequiredSigners=function(t){var n=e.props,r=n.requiredSigners;(0,n.setRequiredSigners)(r+1),t.preventDefault()},e.handleDecrementRequiredSigners=function(t){var n=e.props,r=n.requiredSigners;(0,n.setRequiredSigners)(r-1),t.preventDefault()},e.handleIncrementTotalSigners=function(t){var n=e.props,r=n.totalSigners;(0,n.setTotalSigners)(r+1),t.preventDefault()},e.handleDecrementTotalSigners=function(t){var n=e.props,r=n.totalSigners;(0,n.setTotalSigners)(r-1),t.preventDefault()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.requiredSigners,n=e.totalSigners;return c.a.createElement(d.a,null,c.a.createElement(p.a,{title:"Quorum"}),c.a.createElement(m.a,null,c.a.createElement(h.a,null,c.a.createElement(f.a,{container:!0,justify:"center"},c.a.createElement(f.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0"),c.a.createElement(f.a,{container:!0,item:!0,xs:3,direction:"column",alignItems:"center"},c.a.createElement(f.a,{item:!0},this.renderIncrementRequiredSigners()),c.a.createElement(f.a,{item:!0},c.a.createElement(b.a,{variant:"h2"},t)),c.a.createElement(f.a,{item:!0},c.a.createElement("small",null,c.a.createElement("p",null,"Required"))),c.a.createElement(f.a,{item:!0},this.renderDecrementRequiredSigners())),c.a.createElement(f.a,{container:!0,item:!0,xs:2,direction:"column",alignItems:"center",justify:"center"},c.a.createElement(f.a,{item:!0},c.a.createElement(b.a,{variant:"h6"},"of"))),c.a.createElement(f.a,{item:!0,container:!0,xs:3,direction:"column",alignItems:"center"},c.a.createElement(f.a,{item:!0},this.renderIncrementTotalSigners()),c.a.createElement(f.a,{item:!0},c.a.createElement(b.a,{variant:"h2"},n)),c.a.createElement(f.a,{item:!0},c.a.createElement("small",null,c.a.createElement("p",null,"Total"))),c.a.createElement(f.a,{item:!0},this.renderDecrementTotalSigners())),c.a.createElement(f.a,{container:!0,item:!0,xs:2,direction:"column"},"\xa0")))))}}]),n}(c.a.Component));var P={setTotalSigners:v.l,setRequiredSigners:v.j};t.a=Object(u.b)((function(e){return e.settings}),P)(y)},574:function(e,t,n){"use strict";var r=n(2),a=n(10),o=n.n(a),i=n(16),s=n(11),c=n(18),u=n(14),l=n(13),d=n(0),p=n.n(d),m=n(20),h=n(5),f=n(307),b=n(376),E=n(308),g=n(51),v=n(55),y=n(96),P=n(126),O=n(750),S=n(85),T=n(48),w=n(35),I=n(21),x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).buildSignedTransaction=function(){var e=r.props,t=e.network,n=e.inputs,a=e.outputs,o=e.signatureImporters;return Object(h.signedMultisigTransaction)(t,n,a,Object.values(o).map((function(e){return e.signature})))},r.handleBroadcast=Object(i.a)(o.a.mark((function e(){var t,n,a,i,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.client,a=t.network,i=t.setTxid,s=r.buildSignedTransaction(),c="",u="",r.setState({broadcasting:!0}),e.prev=5,e.next=8,Object(S.a)(s.toHex(),a,n);case 8:u=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0),c="There was an error broadcasting the transaction.: ".concat(e.t0);case 15:return e.prev=15,r.setState({txid:u,error:c,broadcasting:!1}),i(u),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,11,15,19]])}))),r.transactionURL=function(){var e=r.props.network,t=r.state.txid;return Object(h.blockExplorerTransactionURL)(t,e)},r.state={error:"",broadcasting:!1,txid:""},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.broadcasting,r=e.txid,a=this.buildSignedTransaction(),o=a.toHex();return p.a.createElement(f.a,null,p.a.createElement(b.a,{title:"Broadcast"}),p.a.createElement(E.a,null,p.a.createElement("form",null,a&&p.a.createElement(g.a,{mt:4},p.a.createElement(v.a,{variant:"h6"},"Signed Transaction"),p.a.createElement(T.a,{text:o,code:!0,showIcon:!0})),""===r?p.a.createElement(g.a,{mt:2},p.a.createElement(y.a,{variant:"contained",color:"primary",disabled:!a||n,onClick:this.handleBroadcast},"Broadcast Transaction"),p.a.createElement(P.a,{error:!0},t),p.a.createElement("small",null,p.a.createElement(P.a,null,"Warning: Broadcasting this transaction cannot be undone."))):p.a.createElement(g.a,{mt:2},p.a.createElement(v.a,{variant:"h5"},p.a.createElement(T.a,{text:r,code:!0,showIcon:!0}),"\xa0",Object(w.b)(this.transactionURL(),p.a.createElement(O.a,null))),p.a.createElement("p",null,"Transaction successfully broadcast.")))))}}]),n}(p.a.Component);var j={setTxid:I.V};t.a=Object(m.b)((function(e){return Object(r.a)(Object(r.a)({network:e.settings.network,client:e.client},e.client),{},{signatureImporters:e.spend.signatureImporters,inputs:e.spend.transaction.inputs,outputs:e.spend.transaction.outputs})}),j)(x)},575:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.verifyCode;return a.a.createElement("div",null,a.a.createElement("p",null,'Touch the button "Import Multisig Wallet" on Keystone\n                          Wallet.'),a.a.createElement("p",null,"Wallet Verification Code:"," ",a.a.createElement("span",{style:{color:"#77c0c3"}},t,".")),a.a.createElement("p",null,"When importing, please check whether the verification code is consistent, import after ensuring consistency."))}},579:function(e,t,n){"use strict";var r=n(2),a=n(11),o=n(18),i=n(14),s=n(13),c=n(0),u=n.n(c),l=n(20),d=n(5),p=n(7),m=n(370),h=n(731),f=n(738),b=n(1026),E=n(51),g=n(96),v=n(307),y=n(376),P=n(308),O=n(48),S=n(441),T=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.state,t=e.signatureJSON,n=e.error;return u.a.createElement(E.a,{mt:2},u.a.createElement(S.a,{fullWidth:!0,multiline:!0,variant:"outlined",name:"signature",label:"Signature",rows:5,value:t,onChange:r.handleChange,error:r.hasError(),helperText:n}),u.a.createElement(E.a,{mt:2},u.a.createElement(g.a,{variant:"contained",color:"primary",size:"large",onClick:r.finalize,disabled:""===t},"Add Signature")))},r.hasError=function(){return""!==r.state.error},r.setError=function(e){r.setState({error:e})},r.handleChange=function(e){var t=e.target.value,n="";try{JSON.parse(t)}catch(a){n="Invalid JSON."}r.setState({signatureJSON:t,error:n})},r.finalize=function(){var e=r.props.validateAndSetSignature,t=r.state.signatureJSON;try{e(JSON.parse(t),r.setError)}catch(n){r.setError(n.message)}},r.state={signatureJSON:"",error:""},r}return n}(u.a.Component),w=n(10),I=n.n(w),x=n(16),j=n(126),C=n(26),k=n(732),R=n(733),N=n(444),A=n(97),K=n(734),B=n(66),_=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.resetBIP32Path()},r.interaction=function(){var e=r.props,t=e.signatureImporter,n=e.network,a=e.inputs,o=e.outputs,i=t.method,s=a.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(p.SignMultisigTransaction)({network:n,keystore:i,inputs:a,outputs:o,bip32Paths:s})},r.render=function(){var e=r.props,t=e.signatureImporter,n=e.extendedPublicKeyImporter,a=e.isWallet,o=r.state.status,i=r.interaction();return o===p.UNSUPPORTED?u.a.createElement(j.a,{error:!0},i.messageTextFor({state:o})):u.a.createElement(E.a,{mt:2},(!a||null===n||"undefined"===typeof n||"text"===n.method)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(C.a,{container:!0},u.a.createElement(C.a,{item:!0,md:10},u.a.createElement(S.a,{fullWidth:!0,name:"bip32Path",label:"BIP32 Path",type:"text",value:t.bip32Path,onChange:r.handleBIP32PathChange,disabled:o!==p.PENDING,error:r.hasBIP32PathError(),helperText:r.bip32PathError()})),u.a.createElement(C.a,{item:!0,md:2},!r.bip32PathIsDefault()&&u.a.createElement(g.a,{type:"button",variant:"contained",size:"small",onClick:r.resetBIP32Path,disabled:o!==p.PENDING},"Default"))),u.a.createElement(j.a,null,"Use the default value if you don\u2019t understand BIP32 paths.")),u.a.createElement(E.a,{mt:2},r.renderAction()),r.renderDeviceConfirmInfo(),u.a.createElement(B.a,{messages:i.messagesFor({state:o}),excludeCodes:["bip32"]}))},r.renderDeviceConfirmInfo=function(){var e=r.props,t=e.fee,n=e.inputsTotalSats;return r.state.status===p.ACTIVE?u.a.createElement(E.a,null,u.a.createElement("p",null,"Your device will ask you to verify the following information:"),u.a.createElement(k.a,null,u.a.createElement(R.a,null,u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null),u.a.createElement(A.a,null,"Amount (BTC)"))),u.a.createElement(K.a,null,r.renderTargets(),u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null,"Fee"),u.a.createElement(A.a,null,t)),u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null,"Total"),u.a.createElement(A.a,null,Object(d.satoshisToBitcoins)(n).toString()))))):""},r.renderTargets=function(){return r.props.outputs.map((function(e){return u.a.createElement(N.a,{hover:!0,key:e.address},u.a.createElement(A.a,null,"Address ",u.a.createElement("code",null,e.address)),u.a.createElement(A.a,null,e.amount))}))},r.renderAction=function(){var e=r.state,t=e.signatureError,n=e.status;return u.a.createElement(C.a,{container:!0,alignItems:"center"},u.a.createElement(C.a,{item:!0,md:3},u.a.createElement(g.a,{variant:"contained",size:"large",color:"primary",onClick:r.sign,disabled:n!==p.PENDING},"Sign")),u.a.createElement(C.a,{item:!0,md:9},u.a.createElement(j.a,{error:!0},t)))},r.hasBIP32PathError=function(){var e=r.state,t=e.bip32PathError,n=e.status;return""!==t||r.interaction().hasMessagesFor({state:n,level:p.ERROR,code:"bip32"})},r.bip32PathError=function(){var e=r.state,t=e.bip32PathError,n=e.status;return""!==t?t:r.interaction().messageTextFor({state:n,level:p.ERROR,code:"bip32"})},r.setBIP32PathError=function(e){r.setState({bip32PathError:e})},r.handleBIP32PathChange=function(e){(0,r.props.validateAndSetBIP32Path)(e.target.value,(function(){}),r.setBIP32PathError)},r.bip32PathIsDefault=function(){var e=r.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},r.resetBIP32Path=function(){var e=r.props.resetBIP32Path;r.setBIP32PathError(""),e()},r.sign=Object(x.a)(I.a.mark((function e(){var t,n,a,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.disableChangeMethod,a=t.validateAndSetSignature,o=t.enableChangeMethod,n(),r.setState({signatureError:"",status:p.ACTIVE}),e.prev=3,e.next=6,r.interaction().run();case 6:i=e.sent,a(i,(function(e){var t={signatureError:e};""!==e&&(t.status=p.PENDING),r.setState(t)})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),r.setState({signatureError:e.t0.message,status:p.PENDING});case 14:o();case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),r.state={signatureError:"",bip32PathError:"",status:r.interaction().isSupported()?p.PENDING:p.UNSUPPORTED},r}return n}(u.a.Component),D=n(253),M=n(546),U=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).interaction=function(){var e=r.props,t=e.signatureImporter,n=e.network,a=e.inputs,o=e.outputs,i=a.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(p.SignMultisigTransaction)({keystore:p.HERMIT,network:n,inputs:a,outputs:o,bip32Paths:i})},r.render=function(){var e=r.props,t=e.signatureImporter,n=e.disableChangeMethod,a=e.resetBIP32Path,o=r.state,i=o.bip32PathError,s=o.signatureError,c=o.status,l=r.interaction();return c===p.UNSUPPORTED?u.a.createElement(B.a,{messages:l.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}):u.a.createElement(E.a,{mt:2},u.a.createElement(C.a,{container:!0},u.a.createElement(C.a,{item:!0,md:10},u.a.createElement(S.a,{name:"bip32Path",value:t.bip32Path,onChange:r.handleBIP32PathChange,disabled:c!==p.PENDING,error:r.hasBIP32PathError(),helperText:i})),u.a.createElement(C.a,{item:!0,md:2},!r.bip32PathIsDefault()&&u.a.createElement(g.a,{type:"button",variant:"contained",size:"small",onClick:a,disabled:c!==p.PENDING},"Default"))),u.a.createElement(j.a,null,"Use the default value if you don\u2019t understand BIP32 paths."),u.a.createElement(E.a,{mt:2},u.a.createElement(C.a,{container:!0,justify:"center"},u.a.createElement(C.a,{item:!0},u.a.createElement(M.a,{width:400,string:l.request()}))),u.a.createElement(D.a,{startText:"Scan Signature QR Code",interaction:l,onStart:n,onSuccess:r.import,onClear:r.clear}),u.a.createElement(B.a,{messages:l.messagesFor({state:c}),excludeCodes:["hermit.signature_request","hermit.command"]}),u.a.createElement(j.a,{error:!0},s)))},r.import=function(e){var t=r.props,n=t.validateAndSetSignature,a=t.enableChangeMethod;r.setState({signatureError:""}),a(),n(e,(function(e){r.setState({signatureError:e})}))},r.clear=function(){var e=r.props,t=e.resetBIP32Path,n=e.enableChangeMethod;t(),r.setState({signatureError:""}),n()},r.hasBIP32PathError=function(){return""!==r.state.bip32PathError},r.handleBIP32PathChange=function(e){(0,r.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){r.setState({bip32PathError:e})}))},r.bip32PathIsDefault=function(){var e=r.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},r.state={bip32PathError:"",signatureError:"",status:r.interaction(!0).isSupported()?p.PENDING:p.UNSUPPORTED},r}return n}(u.a.Component),F=n(47),L=n(1718),z=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).interaction=function(){var e=r.props,t=e.signatureImporter,n=e.network,a=e.inputs,o=e.outputs,i=t.method,s=a.map((function(e){return"undefined"===typeof e.bip32Path?t.bip32Path:"".concat(t.bip32Path).concat(e.bip32Path.slice(1))}));return Object(p.SignMultisigTransaction)({keystore:i,network:n,inputs:a,outputs:o,bip32Paths:s})},r.renderDeviceConfirmInfo=function(){var e=r.props,t=e.fee,n=e.inputsTotalSats;return u.a.createElement(E.a,null,u.a.createElement("p",null,"Your device will ask you to verify the following information:"),u.a.createElement(k.a,null,u.a.createElement(R.a,null,u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null),u.a.createElement(A.a,null,"Amount (BTC)"))),u.a.createElement(K.a,null,r.renderTargets(),u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null,"Fee"),u.a.createElement(A.a,null,t)),u.a.createElement(N.a,{hover:!0},u.a.createElement(A.a,null,"Total"),u.a.createElement(A.a,null,Object(d.satoshisToBitcoins)(n).toString())))))},r.renderTargets=function(){return r.props.outputs.map((function(e){return u.a.createElement(N.a,{hover:!0,key:e.address},u.a.createElement(A.a,null,"Address ",u.a.createElement("code",null,e.address)),u.a.createElement(A.a,null,e.amount))}))},r.render=function(){var e=r.props,t=e.disableChangeMethod,n=e.extendedPublicKeyImporter,a=e.Signer,o=r.state,i=o.signatureError,s=o.status,c=r.interaction();return s===p.UNSUPPORTED?u.a.createElement(B.a,{messages:c.messagesFor({state:s}),excludeCodes:["hermit.signature_request","hermit.command"]}):u.a.createElement(E.a,{mt:2},u.a.createElement(E.a,{mt:2},r.renderDeviceConfirmInfo(),u.a.createElement(L.a,null,u.a.createElement(a,{setError:r.setError,hasError:r.hasBIP32PathError(),onReceive:r.onReceive,onReceivePSBT:r.onReceivePSBT,interaction:r.interaction(),setActive:r.setActive,disableChangeMethod:t,extendedPublicKeyImporter:n}),u.a.createElement(j.a,{error:!0},i),u.a.createElement(B.a,{messages:c.messagesFor({state:s})}))))},r.setActive=function(){r.setState({status:p.ACTIVE})},r.onReceive=function(e){var t=r.props,n=t.validateAndSetSignature,a=t.enableChangeMethod;r.setState({signatureError:""}),a&&a(),n(e,(function(e){r.setState({signatureError:e})}))},r.onReceivePSBT=function(e){var t=r.props.validateAndSetSignature;try{var n=r.interaction().parse(e),a=Object.keys(n),o=[];a.forEach((function(e){o.push.apply(o,Object(F.a)(n[e]))})),r.setState({signatureError:""}),t(o,(function(e){r.setState({signatureError:e})}))}catch(i){i.errorType="Coldcard Signing Error",r.setState({signatureError:i.message})}},r.setError=function(e){r.setState({signatureError:e})},r.clear=function(){var e=r.props,t=e.resetBIP32Path,n=e.enableChangeMethod;t(),r.setState({signatureError:""}),n()},r.hasBIP32PathError=function(){return""!==r.state.bip32PathError},r.handleBIP32PathChange=function(e){(0,r.props.validateAndSetBIP32Path)(e.target.value,(function(){}),(function(e){r.setState({bip32PathError:e})}))},r.bip32PathIsDefault=function(){var e=r.props,t=e.signatureImporter,n=e.defaultBIP32Path;return t.bip32Path===n},r.state={bip32PathError:"",signatureError:"",status:r.interaction().isSupported()?p.PENDING:p.UNSUPPORTED},r}return n}(u.a.Component);z.defaultProps={resetBIP32Path:null,defaultBIP32Path:"",validateAndSetBIP32Path:null,enableChangeMethod:null,disableChangeMethod:null,extendedPublicKeyImporter:{},fee:"",inputsTotalSats:{}};var W=z,H=n(167),q=n.n(H),G=n(258),V=n(432),X=n(35),Y=n(71),J=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handlePSBTDownloadClick=function(){var t=e.props,n=t.walletName,r=t.interaction,a=t.setActive,o=r.request().toBase64(),i=q()().format("HHmm"),s="".concat(i,"-").concat(n,".psbt");Object(X.a)(o,s),a()},e.handleWalletConfigDownloadClick=function(){var t=e.props.walletDetailsText;e.reshapeConfig(t)},e.reshapeConfig=function(e){var t=JSON.parse(e),n=t.startingAddressIndex;t.name=0===n?t.name:"".concat(t.name,"_").concat(n.toString()),t.addressType=t.addressType.includes("-")?"P2WSH-P2SH":t.addressType;var r=Object(p.ConfigAdapter)({KEYSTORE:p.COLDCARD,jsonConfig:t}).adapt(),a="wc-".concat(t.name,".txt");Object(X.a)(r,a)},e.render=function(){var t=e.props,n=t.onReceivePSBT,r=t.setError;return u.a.createElement("div",null,u.a.createElement(G.c,{handlePSBTDownloadClick:e.handlePSBTDownloadClick,handleWalletConfigDownloadClick:e.handleWalletConfigDownloadClick}),u.a.createElement(V.b,{onReceivePSBT:n,setError:r}))},e}return n}(c.Component);var Z=Object(l.b)((function(e){return{walletName:e.wallet.common.walletName,walletDetailsText:Object(Y.getWalletDetailsText)(e)}}),{})(J),Q=function(e){var t=e.signatureImporter,n=e.extendedPublicKeyImporter,r=e.inputs,a=e.outputs,o=e.inputsTotalSats,i=e.fee,s=e.validateAndSetSignature,c=e.network;return u.a.createElement(W,{network:c,signatureImporter:t,inputs:r,outputs:a,inputsTotalSats:o,fee:i,extendedPublicKeyImporter:n,validateAndSetSignature:s,Signer:Z})},$=n(255),ee=n(87),te=(n(724),n(21)),ne=n(1077),re=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).titleRef=u.a.createRef(),r.componentDidMount=function(){r.resetBIP32Path(),r.scrollToTitle()},r.componentDidUpdate=function(){r.scrollToTitle()},r.title=function(){var e=r.props,t=e.number,n=e.signatureImporter,a=e.setName;return u.a.createElement($.a,{number:t,name:n.name,setName:a})},r.scrollToTitle=function(){r.props.number===r.getCurrent()&&r.titleRef.current.scrollIntoView({behavior:"smooth"})},r.renderImport=function(){var e=r.props,t=e.signatureImporter,n=e.number,a=e.isWallet,o=n>r.getCurrent(),i=r.state.disableChangeMethod,s="signature-".concat(n,"-importer-select-label");return o?u.a.createElement("p",null,"Once you have imported the signature above, you will be able to import another signature here."):u.a.createElement("form",null,u.a.createElement(m.a,{fullWidth:!0},u.a.createElement(h.a,{id:s},"Select Method"),u.a.createElement(f.a,{labelId:s,id:"signature-".concat(n,"-importer-select"),disabled:i,value:t.method,onChange:r.handleMethodChange},u.a.createElement(b.a,{value:"unknown"},"< Select method >"),u.a.createElement(b.a,{value:p.TREZOR},"Trezor"),u.a.createElement(b.a,{value:p.KEYSTONE},"Keystone"),u.a.createElement(b.a,{value:p.LEDGER},"Ledger"),u.a.createElement(b.a,{value:p.COLDCARD,disabled:!a},"Coldcard"),u.a.createElement(b.a,{value:p.HERMIT},"Hermit"),u.a.createElement(b.a,{value:"text"},"Enter as text"))),r.renderImportByMethod())},r.renderImportByMethod=function(){var e=r.props,t=e.network,n=e.signatureImporter,a=e.signatureImporters,o=e.inputs,i=e.inputsTotalSats,s=e.outputs,c=e.fee,l=e.isWallet,d=e.extendedPublicKeyImporter,m=n.method;return m===p.TREZOR||m===p.LEDGER?u.a.createElement(_,{network:t,signatureImporter:n,signatureImporters:a,inputs:o,outputs:s,inputsTotalSats:i,fee:c,isWallet:l,extendedPublicKeyImporter:d,validateAndSetBIP32Path:r.validateAndSetBIP32Path,resetBIP32Path:r.resetBIP32Path,defaultBIP32Path:r.defaultBIP32Path(),validateAndSetSignature:r.validateAndSetSignature,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod}):m===p.KEYSTONE?u.a.createElement(ne.a,{network:t,signatureImporter:n,inputs:o,outputs:s,validateAndSetBIP32Path:r.validateAndSetBIP32Path,resetBIP32Path:r.resetBIP32Path,defaultBIP32Path:r.defaultBIP32Path(),validateAndSetSignature:r.validateAndSetSignature,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod}):m===p.HERMIT?u.a.createElement(U,{network:t,signatureImporter:n,inputs:o,outputs:s,inputsTotalSats:i,fee:c,extendedPublicKeyImporter:d,validateAndSetBIP32Path:r.validateAndSetBIP32Path,resetBIP32Path:r.resetBIP32Path,defaultBIP32Path:r.defaultBIP32Path(),validateAndSetSignature:r.validateAndSetSignature,enableChangeMethod:r.enableChangeMethod,disableChangeMethod:r.disableChangeMethod}):m===p.COLDCARD?u.a.createElement(Q,{network:t,signatureImporter:n,inputs:o,outputs:s,inputsTotalSats:i,fee:c,extendedPublicKeyImporter:d,validateAndSetSignature:r.validateAndSetSignature}):"text"===m?u.a.createElement(T,{signatureImporter:n,validateAndSetSignature:r.validateAndSetSignature}):null},r.handleMethodChange=function(e){var t=r.props,n=t.number;(0,t.setMethod)(n,e.target.value),r.reset()},r.disableChangeMethod=function(){r.setState({disableChangeMethod:!0})},r.enableChangeMethod=function(){r.setState({disableChangeMethod:!1})},r.reset=function(){var e=r.props,t=e.number,n=e.setSignature,a=e.setPublicKeys,o=e.setFinalized;n(t,""),a(t,[]),o(t,!1)},r.defaultBIP32Path=function(){var e=r.props,t=e.addressType,n=e.network;return e.isWallet?Object(d.multisigBIP32Root)(t,n):Object(d.multisigBIP32Path)(t,n)},r.resetBIP32Path=function(){var e=r.props,t=e.number,n=e.setBIP32Path;if(e.isWallet){var a=r.props.extendedPublicKeyImporter;if(a&&"text"!==a.method)return}n(t,r.defaultBIP32Path())},r.validateAndSetBIP32Path=function(e,t,n,a){var o=r.props,i=o.number,s=o.setBIP32Path,c=Object(d.validateBIP32Path)(e,a);s(i,e),c?n(c):(n(""),t())},r.renderSignature=function(){var e=r.props,t=e.signatureImporter,n=e.txid,a=JSON.stringify(t.signature);return u.a.createElement("div",null,u.a.createElement("p",null,"The following signature was imported:"),u.a.createElement(E.a,null,u.a.createElement(O.a,{text:a,showIcon:!0,code:!0})),u.a.createElement(E.a,{mt:2},u.a.createElement(g.a,{variant:"contained",color:"secondary",disabled:""!==n,size:"small",onClick:r.reset},"Remove Signature")))},r.validateAndSetSignature=function(e,t){var n=r.props,a=n.number,o=n.inputs,i=n.signatureImporters,s=n.setComplete,c=n.network,u=n.outputs,l=n.setSigningKey;if(Array.isArray(e))if(e.length<o.length)t("Not enough signatures (must be at least one signature for each input).");else if(e.length%o.length===0){var p=e.length/o.length;if(p>Object.values(i).length)t("Too many signatures. Max one set of signatures per required signer.");else{var m=[];if(1===p){for(var h=Object.values(i).filter((function(e){return e.finalized})),f=0;f<e.length;f+=1){var b=f+1,E=e[f];if(""!==Object(d.validateHex)(E))return void t("Signature for input ".concat(b," is not valid hex."));var g=void 0;try{g=Object(d.validateMultisigSignature)(c,o,u,f,E)}catch(C){return void t("Signature for input ".concat(b," is invalid."))}if(!g)return void t("Signature for input ".concat(b," is invalid."));for(var v=0;v<h.length;v+=1){var y=h[v];if(y.signature[f]===E||y.publicKeys[f]===g)return void t("Signature for input ".concat(b," is a duplicate of a previously provided signature."))}m.push(g)}s(a,{signature:e,publicKeys:m,finalized:!0})}else for(var P=r.filterKnownSignatures(e),O=a;O<=Object.keys(i).length&&P.length>0;){l(O,O-1);for(var S=[],T=[],w=0;w<o.length;w+=1){for(var I=void 0,x=0;x<P.length;x+=1){var j=P[x];if(""!==Object(d.validateHex)(j))return void t("Signature for input at index ".concat(w," is not valid hex."));try{I=Object(d.validateMultisigSignature)(c,o,u,w,j)}catch(C){console.error(C)}if(I){T.push(I),S.push(j);break}}if(!I)return void t("No valid signature for input ".concat(w," found."))}if(T.length!==o.length||S.length!==o.length)return void t("There was an error in validating the transaction.");s(O,{signature:S,publicKeySet:T,finalized:!0}),P=r.filterKnownSignatures(e),O+=1}}}else t("Number of signatures must be a multiple of number of inputs.");else t("Signature is not an array of strings.")},r.filterKnownSignatures=function(e){for(var t=r.props,n=t.inputs,a=t.signatureImporters,o=Object.values(a).filter((function(e){return e.finalized})),i=[],s=0;s<n.length;s+=1)for(var c=0;c<o.length;c+=1){var u=o[c];i.push(u.signature[s])}return e.filter((function(e){return!i.includes(e)}))},r.state={disableChangeMethod:!1},r}return Object(o.a)(n,[{key:"getCurrent",value:function(){var e=this.props.signatureImporters;return Object.keys(e).reduce((function(t,n){return t+(e[n].finalized?1:0)}),1)}},{key:"render",value:function(){var e=this.props.signatureImporter;return u.a.createElement(v.a,null,u.a.createElement(y.a,{title:this.title(),ref:this.titleRef}),u.a.createElement(P.a,null,e.finalized?this.renderSignature():this.renderImport()))}}]),n}(u.a.Component);re.defaultProps={extendedPublicKeyImporter:{}};var ae={setName:ee.l,setMethod:ee.k,setBIP32Path:ee.h,setPublicKeys:ee.m,setSignature:ee.n,setFinalized:ee.j,setComplete:ee.i,setSigningKey:te.T};t.a=Object(l.b)((function(e,t){return Object(r.a)(Object(r.a)({},{signatureImporters:e.spend.signatureImporters,signatureImporter:e.spend.signatureImporters[t.number],fee:e.spend.transaction.fee,txid:e.spend.transaction.txid}),e.spend.transaction)}),ae)(re)},580:function(e,t,n){"use strict";var r=n(26),a=n(0),o=n.n(a),i=n(43),s=n(136),c=n(96),u=n(582),l=n(573),d=n.n(l),p=function(e){var t=e.progress;return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("p",null," ",t," "))},m=n(372),h=n.n(m),f=function(e){var t=e.handleError,n=e.handleSuccess,s=e.handleStop,l=e.interaction,m=e.close,f=Object(a.useState)(0),b=Object(i.a)(f,2),E=b[0],g=b[1];return o.a.createElement(u.a,{open:!0},o.a.createElement("div",{className:h.a.qrScannerContainer},o.a.createElement(r.a,{container:!0,direction:"column",alignItems:"center",justify:"center"},o.a.createElement(r.a,{item:!0},o.a.createElement(d.a,{delay:300,onError:t,onScan:function(e){if(e)try{var r=l.parse(e),a=r.success,o=r.result,i=r.progress;a?(m(),n(o)):g(i)}catch(s){m(),t(s)}},style:{width:400},facingMode:"user"}),o.a.createElement(p,{progress:E})),o.a.createElement(r.a,{item:!0},o.a.createElement(c.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){m(),s()}},"Cancel")))))},b=function(e){var t=e.startText,n=Object(s.a)(e,["startText"]),r=Object(a.useState)(!1),u=Object(i.a)(r,2),l=u[0],d=u[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{variant:"contained",color:"primary",component:"span",onClick:function(){return d(!0)}},t),l&&o.a.createElement(f,Object.assign({},n,{close:function(){return d(!1)}})))},E=n(1078),g=function(e){var t=e.shouldShowFileReader,n=e.fileType,a=e.fileStartText,i=e.qrStartText,s=e.interaction,c=e.handleError,u=e.handleSuccess,l=e.handleStop;return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,{item:!0},o.a.createElement(b,{startText:i,interaction:s,handleError:c,handleSuccess:u,handleStop:l})),t&&o.a.createElement(r.a,{item:!0},o.a.createElement(E.a,{startText:a,interaction:s,handleSuccess:u,handleError:c,fileType:n})))};g.defaultProps={shouldShowFileReader:!1,fileType:"json",fileStartText:"",qrStartText:"",handleError:function(){},handleStop:function(){},handleSuccess:function(){}};t.a=g},583:function(e,t,n){"use strict";var r=n(10),a=n.n(r),o=n(16),i=n(2),s=n(11),c=n(18),u=n(14),l=n(13),d=n(0),p=n.n(d),m=n(20),h=n(434),f=n(29),b=n.n(f),E=n(5),g=n(1040),v=n(126),y=n(51),P=n(26),O=n(55),S=n(96),T=n(441),w=n(443),I=n(168),x=n(1746),j=n(1083),C=n.n(j),k=n(21),R=n(85),N=n(86),A=n(1082),K=n.n(A),B=n(1099),_=n(1100),D=n(1759),M=n(138),U=n.n(M),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).displayBalanceAction=function(){var t=e.props,n=t.isWallet,r=t.finalizedOutputs,a=t.autoSpend;return n?!a&&!r&&e.hasBalanceError()&&e.isBalanceable():!r&&e.hasBalanceError()&&e.isBalanceable()},e.addChangeAddress=function(){var t=e.props,n=t.changeNode,r=t.number,a=t.setAddress,o=t.setChangeOutput;a(r,n.multisig.address),o(r)},e.renderChangeAdornment=function(){var t=e.props,n=t.changeNode,r=t.number,a=t.changeOutputIndex,o=t.address,i=t.isWallet,s=t.autoSpend;if(i&&s)return{};if(null!==n){var c,u=!1;if(0===a&&""===o)c="Set to wallet change address";else{if(r!==a)return{};c="Your change will go here.",u=!0}return{endAdornment:p.a.createElement(g.a,{position:"end"},p.a.createElement(w.a,{placement:"top",title:c},p.a.createElement("small",null,p.a.createElement(I.a,{onClick:e.addChangeAddress,disabled:u},p.a.createElement(K.a,null)))))}}return{}},e.handleAddressChange=function(t){var n=e.props,r=n.number;(0,n.setAddress)(r,t.target.value)},e.hasAddressError=function(){return""!==e.props.addressError},e.handleAmountChange=function(t){var n=e.props,r=n.number;(0,n.setAmount)(r,t.target.value)},e.hasAmountError=function(){return""!==e.props.amountError},e.isNotBalanceable=function(){var t=e.props,n=t.number,r=t.outputs,a=t.feeError,o=t.amountError,i=t.amount,s=t.inputsTotalSats;if(""!==a)return!0;for(var c=0;c<r.length;c+=1)if(c!==n-1&&(""!==r[c].amountError||""===r[c].amount))return!0;var u=e.autoBalancedAmount();return""!==Object(E.validateOutputAmount)(Object(E.bitcoinsToSatoshis)(u),s)||""===o&&u===new b.a(i)},e.isBalanceable=function(){return!e.isNotBalanceable()},e.hasBalanceError=function(){return""!==e.props.balanceError},e.autoBalancedAmount=function(){var t=e.props,n=t.number,r=t.fee,a=t.inputsTotalSats,o=t.outputs.filter((function(e,t){return t!==n-1})).map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new b.a(0)),i=Object(E.bitcoinsToSatoshis)(new b.a(r));return Object(E.satoshisToBitcoins)(a.minus(o.plus(i)))},e.balanceAction=function(){var t=e.props.balanceError;return!e.hasBalanceError()||e.isNotBalanceable()?null:t.split(" ")[0]},e.handleBalance=function(){var t=e.props,n=t.number;(0,t.setAmount)(n,e.autoBalancedAmount().toString())},e.hasError=function(){return e.hasAddressError()||e.hasAmountError()},e.handleDelete=function(){var t=e.props,n=t.number;(0,t.remove)(n)},e.handleMaxSpend=function(t){t.preventDefault();var n=e.props,r=n.number;(0,n.setMaxSpend)(r)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.outputs,n=e.finalizedOutputs,r=e.address,a=e.amount,o=e.addressError,i=e.amountError,s=e.changeOutputIndex,c=e.autoSpend,u=e.isWallet,l=e.number,d=u?10:1;return p.a.createElement(P.a,{container:!0,spacing:d},p.a.createElement(P.a,{item:!0,xs:7},p.a.createElement(T.a,{fullWidth:!0,placeholder:"Address",name:"destination",className:U.a.outputsFormInput,disabled:n,onChange:this.handleAddressChange,value:r,error:this.hasAddressError(),helperText:o,InputProps:this.renderChangeAdornment()})),p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(T.a,{fullWidth:!0,placeholder:"Amount",className:U.a.outputsFormInput,name:"amount",disabled:n,onChange:this.handleAmountChange,value:a,error:this.hasAmountError(),helperText:i,InputProps:{startAdornment:p.a.createElement(g.a,{position:"start"},u&&c&&l===t.length&&l!==s&&p.a.createElement(O.a,{onClick:this.handleMaxSpend,className:U.a.maxSpend,style:{fontSize:".7rem"}},"MAX")),endAdornment:p.a.createElement(g.a,{position:"end"},p.a.createElement(v.a,null,"BTC"))}})),this.displayBalanceAction()&&p.a.createElement(P.a,{item:!0,xs:1},p.a.createElement(w.a,{title:"".concat(this.balanceAction()," to ").concat(this.autoBalancedAmount().toString()),placement:"top"},p.a.createElement("small",null,p.a.createElement(I.a,{onClick:this.handleBalance},"Increase"===this.balanceAction()?p.a.createElement(B.a,null):p.a.createElement(_.a,null))))),!n&&t.length>(s>0&&c?2:1)&&p.a.createElement(P.a,{item:!0,xs:1},p.a.createElement(w.a,{title:"Remove Output",placement:"top"},p.a.createElement(I.a,{onClick:this.handleDelete},p.a.createElement(D.a,null)))))}}]),n}(p.a.Component);F.defaultProps={changeNode:{}};var L={setAddress:k.Q,setAmount:k.R,remove:k.C,setChangeOutput:k.J,setMaxSpend:k.P},z=Object(m.b)((function(e,t){return Object(i.a)(Object(i.a)(Object(i.a)({},e.spend.transaction),e.spend.transaction.outputs[t.number-1]),{},{changeNode:e.wallet.change.nextNode})}),L)(F),W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).titleRef=p.a.createRef(),r.outputsTotal=0,r.componentDidMount=function(){r.initialOutputState(),r.scrollToTitle()},r.scrollToTitle=function(){var e=r.props,t=e.signatureImporters,n=e.isWallet;0!==Object.keys(t).reduce((function(e,n){return e+t[n].finalized}),0)||n||r.titleRef.current.scrollIntoView({behavior:"smooth"})},r.renderOutputs=function(){var e=r.props,t=e.outputs,n=e.changeOutputIndex,a=e.autoSpend;return Object(h.map)(t).map((function(e,t){return p.a.createElement(y.a,{key:t,display:a&&n===t+1?"none":"block"},p.a.createElement(P.a,{container:!0},p.a.createElement(z,{number:t+1})))}))},r.inputsTotal=function(){var e=r.props.inputsTotalSats;return Object(E.satoshisToBitcoins)(e)},r.outputsAndFeeTotal=function(){var e=r.props,t=e.outputs,n=e.fee,a=e.updatesComplete,o=e.inputs,i=t.map((function(e){var t=e.amount;return t&&t.length&&!Number.isNaN(t)||(t=0),new b.a(t)})).reduce((function(e,t){return e.plus(t)}),new b.a(0));return n&&o.length&&(i=i.plus(n)),a?(r.outputsTotal=i,i.toFixed(8)):"0.00000000"},r.hasFeeRateFetchError=function(){return""!==r.state.feeRateFetchError},r.hasFeeRateError=function(){return""!==r.props.feeRateError},r.hasFeeError=function(){return""!==r.props.feeError},r.hasBalanceError=function(){return""!==r.props.balanceError},r.hasError=function(){return r.hasFeeRateFetchError()||r.hasFeeRateError()||r.hasFeeError()||r.hasBalanceError()},r.handleAddOutput=function(){(0,r.props.addOutput)()},r.handleFeeRateChange=function(e){var t=r.props.setFeeRate,n=e.target.value;(""===n||Number.isNaN(parseFloat(n,10))||parseFloat(n,10)<1)&&(n="0"),t(n)},r.handleFeeChange=function(e){(0,r.props.setFee)(e.target.value)},r.handleFinalize=function(){(0,r.props.finalizeOutputs)(!0)},r.handleReset=function(){var e=r.props,t=e.resetOutputs,n=e.isWallet;t(),n||setTimeout((function(){return r.initialOutputState()}),0)},r.getFeeEstimate=Object(o.a)(a.a.mark((function e(){var t,n,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.client,o=t.network,i=t.setFeeRate,c="",e.prev=2,e.next=5,Object(R.c)(o,n);case 5:s=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c="There was an error fetching the fee rate.";case 11:return e.prev=11,i(Number.isNaN(s)?N.d.toString():s.toString()),r.setState({feeRateFetchError:c}),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])}))),r.gatherSignaturesDisabled=function(){var e=r.props,t=e.finalizedOutputs,n=e.outputs;if(0===e.inputs.length)return!0;if(t||r.hasError())return!0;for(var a=0;a<n.length;a+=1){var o=n[a];if(""===o.address||""===o.amount||""!==o.addressError||""!==o.amountError)return!0}return!1},r.state={feeRateFetchError:""},r}return Object(c.a)(n,null,[{key:"unitLabel",value:function(e,t){var n={endAdornment:p.a.createElement(g.a,{position:"end"},p.a.createElement(v.a,null,e))};return t&&(n=Object(i.a)(Object(i.a)({},n),t)),n}}]),Object(c.a)(n,[{key:"initialOutputState",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o,i,s,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.inputs,r=t.outputs,e.next=3,this.getFeeEstimate();case 3:o=this.props,i=o.inputsTotalSats,s=o.fee,c=o.setOutputAmount,u=Object(E.bitcoinsToSatoshis)(new b.a(s)),l=Object(E.satoshisToBitcoins)(i.minus(u)),n.length&&""===r[0].amount&&c(1,l.toFixed(8));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.feeRate,r=e.fee,a=e.finalizedOutputs,o=e.feeRateError,i=e.feeError,s=e.balanceError,c=e.inputs,u=e.isWallet,l=e.autoSpend,d=this.state.feeRateFetchError,m=c&&c.length>0?r:"0.0000",h=u?10:1;return p.a.createElement(p.a.Fragment,null,p.a.createElement(y.a,{ref:this.titleRef},p.a.createElement(P.a,{container:!0,spacing:h},p.a.createElement(P.a,{item:!0,xs:4},p.a.createElement(O.a,{variant:"caption",className:U.a.outputsFormLabel},"To")),p.a.createElement(P.a,{item:!0,xs:3},"\xa0"),p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(O.a,{variant:"caption",className:U.a.outputsFormLabel},"Amount"))),p.a.createElement(P.a,null,this.renderOutputs()),p.a.createElement(P.a,{item:!0,container:!0,spacing:h},p.a.createElement(P.a,{item:!0,xs:12},p.a.createElement(S.a,{color:"primary",disabled:a,onClick:this.handleAddOutput},p.a.createElement(C.a,null)," Add output"))),p.a.createElement(P.a,{item:!0,container:!0,spacing:h},p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(y.a,{mt:3},p.a.createElement(O.a,{variant:"caption",className:U.a.outputsFormLabel},"Fee Rate"),p.a.createElement(T.a,{fullWidth:!0,value:t,type:"number",minimum:0,step:1,name:"fee_rate",disabled:a,onChange:this.handleFeeRateChange,error:this.hasFeeRateError(),helperText:d||o,InputProps:{endAdornment:p.a.createElement(g.a,{position:"end"},p.a.createElement(w.a,{placement:"top",title:"Estimate best rate"},p.a.createElement("small",null,p.a.createElement(I.a,{onClick:this.getFeeEstimate,disabled:a},p.a.createElement(x.a,null)))),p.a.createElement(v.a,null,"Sats/byte"))}}))),p.a.createElement(P.a,{item:!0,xs:4},p.a.createElement(y.a,{mt:3},"\xa0")),!u||u&&!l?p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(y.a,{mt:3},p.a.createElement(O.a,{variant:"caption",className:U.a.outputsFormLabel},"Estimated Fees"),p.a.createElement(T.a,{fullWidth:!0,name:"fee_total",disabled:a,value:m,onChange:this.handleFeeChange,error:this.hasFeeError(),helperText:i,InputProps:n.unitLabel("BTC",{readOnly:!0,disableUnderline:!0,style:{color:"gray"}})}))):"",p.a.createElement(P.a,{item:!0,xs:2})),p.a.createElement(P.a,{item:!0,container:!0,spacing:h},p.a.createElement(P.a,{item:!0,xs:4},p.a.createElement(y.a,{mt:7},p.a.createElement(O.a,{variant:"h6"},!u||u&&!l?"Totals":"Output Total"))),p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(y.a,{display:!u||u&&!l?"block":"none",mt:7},p.a.createElement(T.a,{fullWidth:!0,label:"Inputs Total",readOnly:!0,value:this.inputsTotal().toFixed(8),disabled:a,InputProps:n.unitLabel("BTC",{readOnly:!0})}))),p.a.createElement(P.a,{item:!0,xs:3},p.a.createElement(y.a,{mt:7},p.a.createElement(T.a,{fullWidth:!0,label:!u||u&&!l?"Outputs & Fee Total":"",value:this.outputsAndFeeTotal(),error:this.hasBalanceError(),disabled:a,helperText:s,InputProps:n.unitLabel("BTC",{readOnly:!0,disableUnderline:!0})}))),p.a.createElement(P.a,{item:!0,xs:2}))),!u&&p.a.createElement(y.a,{mt:7},p.a.createElement(P.a,{container:!0,spacing:3,justify:"center"},p.a.createElement(P.a,{item:!0},p.a.createElement(S.a,{variant:"contained",color:"primary",disabled:this.gatherSignaturesDisabled(),onClick:this.handleFinalize},"Gather Signatures")),p.a.createElement(P.a,{item:!0},p.a.createElement(S.a,{variant:"contained",color:"secondary",disabled:a,onClick:this.handleReset},"Reset Outputs")))))}}]),n}(p.a.Component);W.defaultProps={updatesComplete:!1};var H={addOutput:k.z,setOutputAmount:k.R,setFeeRate:k.M,setFee:k.L,finalizeOutputs:k.D,resetOutputs:k.E};t.a=Object(m.b)((function(e){return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},{network:e.settings.network,client:e.client}),e.spend.transaction),e.client),{},{signatureImporters:e.spend.signatureImporters,change:e.wallet.change})}),H)(W)},60:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"o",(function(){return m})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"k",(function(){return E})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return v})),n.d(t,"p",(function(){return y}));var r=n(135),a="SET_EXTENDED_PUBLIC_KEY_IMPORTER_NAME",o="RESET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",i="SET_EXTENDED_PUBLIC_KEY_IMPORTER_BIP32_PATH",s="SET_EXTENDED_PUBLIC_KEY_IMPORTER_METHOD",c="SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY",u="SET_EXTENDED_PUBLIC_KEY_IMPORTER_EXTENDED_PUBLIC_KEY_ROOT_FINGERPRINT",l="SET_EXTENDED_PUBLIC_KEY_IMPORTER_FINALIZED",d="SET_EXTENDED_PUBLIC_KEY_IMPORTER_VISIBLE",p=Object(r.b)({setExtendedPublicKeyImporterName:a,resetExtendedPublicKeyImporterBIP32Path:o,setExtendedPublicKeyImporterBIP32Path:i,setExtendedPublicKeyImporterMethod:s,setExtendedPublicKeyImporterExtendedPublicKey:c,setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint:u,setExtendedPublicKeyImporterFinalized:l}),m=p.setExtendedPublicKeyImporterName,h=p.setExtendedPublicKeyImporterBIP32Path,f=p.resetExtendedPublicKeyImporterBIP32Path,b=p.setExtendedPublicKeyImporterMethod,E=p.setExtendedPublicKeyImporterExtendedPublicKey,g=p.setExtendedPublicKeyImporterExtendedPublicKeyRootFingerprint,v=p.setExtendedPublicKeyImporterFinalized;function y(e){return{type:d,value:e}}},66:function(e,t,n){"use strict";var r=n(11),a=n(14),o=n(13),i=n(0),s=n.n(i),c=n(7),u=n(589),l=n(749),d=n(1097),p=n(554),m=n(51),h=n(55),f=n(259),b=n(1731),E=n(1722),g=n(1725),v=n(1102),y=n(1726),P=(n(1693),function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).render=function(){var t=e.props.messages;return s.a.createElement(u.a,{style:{maxHeight:"400px",overflow:"auto"},dense:!0},t.map(e.renderMessage))},e.renderMessage=function(t,n){return s.a.createElement(l.a,{key:n},t.level&&s.a.createElement(d.a,null,e.messageIcon(t)),s.a.createElement(p.a,null,e.renderMessageBodyAndSubmessages(t)))},e.renderMessageBodyAndSubmessages=function(t){return s.a.createElement(m.a,null,e.renderMessageBody(t),t.messages&&s.a.createElement(u.a,{dense:!0},t.messages.map(e.renderMessage)))},e.renderMessageBody=function(e){return s.a.createElement(m.a,null,e.image&&s.a.createElement(m.a,{align:"center"},s.a.createElement("img",{className:"InteractionMessages-image",src:"data:".concat(e.image.mimeType,";base64, ").concat(e.image.data),alt:e.image.label})),s.a.createElement("p",null,e.text))},e.messageIcon=function(e){switch(e.level){case c.INFO:return s.a.createElement(g.a,null);case c.WARNING:return s.a.createElement(v.a,null);case c.ERROR:return s.a.createElement(y.a,null);default:return null}},e}return n}(s.a.Component)),O=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).render=function(){var t=e.props,n=t.version,r=t.currentVersion;return s.a.createElement(m.a,{role:"tabpanel",hidden:n!==r,id:"interactionMessages-tabpanel-".concat(n),"aria-labelledby":"interactionMessages-tab-".concat(n)},n===r&&s.a.createElement(P,{messages:e.filteredMessages()}))},e.filteredMessages=function(){var t=e.props,n=t.messages,r=t.version;return n.filter((function(e){return!e.version||e.version===r}))},e}return n}(s.a.Component),S=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.filteredMessages(),t=e.messages,n=e.versions,r=a.currentVersion(n);return n.length<2?s.a.createElement(P,{messages:t}):s.a.createElement(m.a,null,s.a.createElement(h.a,{variant:"h6"},"Model"),s.a.createElement(f.a,{square:!0},s.a.createElement(b.a,{value:r,onChange:a.handleChange,"aria-label":"interactionMessages-version"},n.map((function(e){return s.a.createElement(E.a,{key:e,value:e,label:e,id:"interactionMessages-tab-".concat(e),"aria-controls":"interactionMessages-tabpanel-".concat(e)})})))),n.map((function(e){return s.a.createElement(O,{key:e,version:e,currentVersion:r,messages:t})})))},a.currentVersion=function(e){var t=a.state.currentVersion;return t||e[e.length-1]},a.handleChange=function(e,t){a.setState({currentVersion:t})},a.filteredMessages=function(){var e=a.props,t=e.messages,n=e.excludeCodes,r=[],o=[];return t.forEach((function(e){for(var t=0;t<n.length;t+=1){var a=n[t];if((e.code||"").includes(a))return}r.push(e),e.version&&!o.includes(e.version)&&o.push(e.version)})),{versions:o,messages:r}},a.state={currentVersion:""},a}return n}(s.a.Component);S.defaultProps={messages:[],excludeCodes:[]},t.a=S},67:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return u}));var r="SET_CLIENT_TYPE",a="SET_CLIENT_URL",o="SET_CLIENT_USERNAME",i="SET_CLIENT_PASSWORD",s="SET_CLIENT_URL_ERROR",c="SET_CLIENT_USERNAME_ERROR",u="SET_CLIENT_PASSWORD_ERROR"},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={VERSION:!0,MULTISIG_ROOT:!0,DIRECT_KEYSTORES:!0,INDIRECT_KEYSTORES:!0,KEYSTORES:!0,GetMetadata:!0,ExportPublicKey:!0,ExportExtendedPublicKey:!0,SignMultisigTransaction:!0,ConfirmMultisigAddress:!0,ConfigAdapter:!0};t.GetMetadata=function(e){switch(e.keystore){case u.LEDGER:return new u.LedgerGetMetadata;case l.TREZOR:return new l.TrezorGetMetadata;default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore does not return a version."})}},t.ExportPublicKey=function(e){var t=e.keystore,n=e.network,r=e.bip32Path,a=e.includeXFP;switch(t){case i.COLDCARD:return new i.ColdcardExportPublicKey({network:n,bip32Path:r,includeXFP:a});case c.HERMIT:return new c.HermitExportPublicKey({bip32Path:r});case u.LEDGER:return new u.LedgerExportPublicKey({bip32Path:r,includeXFP:a});case l.TREZOR:return new l.TrezorExportPublicKey({network:n,bip32Path:r,includeXFP:a});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when exporting public keys."})}},t.ExportExtendedPublicKey=function(e){var t=e.keystore,n=e.network,r=e.bip32Path,a=e.includeXFP;switch(t){case i.COLDCARD:return new i.ColdcardExportExtendedPublicKey({bip32Path:r,network:n,includeXFP:a});case s.CUSTOM:return new s.CustomExportExtendedPublicKey({bip32Path:r,network:n,includeXFP:a});case c.HERMIT:return new c.HermitExportExtendedPublicKey({bip32Path:r});case u.LEDGER:return new u.LedgerExportExtendedPublicKey({bip32Path:r,network:n,includeXFP:a});case l.TREZOR:return new l.TrezorExportExtendedPublicKey({bip32Path:r,network:n,includeXFP:a});case d.KEYSTONE:return new d.KeystoneExportExtendedPublicKey;default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when exporting extended public keys."})}},t.SignMultisigTransaction=function(e){var t=e.keystore,n=e.network,r=e.inputs,a=e.outputs,p=e.bip32Paths,m=e.psbt;switch(t){case i.COLDCARD:return new i.ColdcardSignMultisigTransaction({network:n,inputs:r,outputs:a,bip32Paths:p,psbt:m});case s.CUSTOM:return new s.CustomSignMultisigTransaction({network:n,inputs:r,outputs:a,bip32Paths:p,psbt:m});case c.HERMIT:return new c.HermitSignTransaction({inputs:r,outputs:a,bip32Paths:p});case u.LEDGER:return new u.LedgerSignMultisigTransaction({network:n,inputs:r,outputs:a,bip32Paths:p});case l.TREZOR:return new l.TrezorSignMultisigTransaction({network:n,inputs:r,outputs:a,bip32Paths:p});case d.KEYSTONE:return new d.KeystoneSignMultisigTransaction({network:n,inputs:r,outputs:a,bip32Paths:p,psbt:m});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when signing multisig transactions."})}},t.ConfirmMultisigAddress=function(e){var t=e.keystore,n=e.network,r=e.bip32Path,a=e.multisig,i=e.publicKey;switch(t){case l.TREZOR:return new l.TrezorConfirmMultisigAddress({network:n,bip32Path:r,multisig:a,publicKey:i});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when confirming multisig addresses."})}},t.ConfigAdapter=function(e){var t=e.KEYSTORE,n=e.jsonConfig;switch(t){case i.COLDCARD:return new i.ColdcardMultisigWalletConfig({jsonConfig:n});default:return new o.UnsupportedInteraction({code:"unsupported",text:"This keystore is not supported when translating external spend configuration files."})}},t.KEYSTORES=t.INDIRECT_KEYSTORES=t.DIRECT_KEYSTORES=t.MULTISIG_ROOT=t.VERSION=void 0,n(484),n(282),n(399),n(400),n(139),n(152),n(140),n(103),n(171),n(246);var a=n(1282),o=n(283);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=n(1290);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=n(1388);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var c=n(1389);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=n(1401);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=n(1458);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=n(1520);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=a.version;t.VERSION=h;t.MULTISIG_ROOT="m/45'";var f={TREZOR:l.TREZOR,LEDGER:u.LEDGER};t.DIRECT_KEYSTORES=f;var b={HERMIT:c.HERMIT,COLDCARD:i.COLDCARD,CUSTOM:s.CUSTOM,KEYSTONE:d.KEYSTONE};t.INDIRECT_KEYSTORES=b;var E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{},b);t.KEYSTORES=E},71:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getTotalBalance",(function(){return h})),n.d(t,"getPendingBalance",(function(){return f})),n.d(t,"getConfirmedBalance",(function(){return b})),n.d(t,"getSlicesWithLastUsed",(function(){return E})),n.d(t,"getSpendableSlices",(function(){return g})),n.d(t,"getSpentSlices",(function(){return v})),n.d(t,"getSlicesWithBalance",(function(){return y})),n.d(t,"getZeroBalanceSlices",(function(){return P})),n.d(t,"getUnknownAddressSlices",(function(){return O})),n.d(t,"getUnknownAddresses",(function(){return S})),n.d(t,"getDepositableSlices",(function(){return T})),n.d(t,"getWalletDetailsText",(function(){return w})),n.d(t,"getKeystoneWalletVerifyCode",(function(){return I})),n.d(t,"getKeystoneExistence",(function(){return x}));var r=n(2),a=n(47),o=n(125),i=n(5),s=n(1064),c=function(e){return Object.values(e.wallet.deposits.nodes)},u=function(e){return[].concat(Object(a.a)(Object.values(e.wallet.deposits.nodes)),Object(a.a)(Object.values(e.wallet.change.nodes)))},l=function(e){return e.settings.addressType},d=function(e){return e.settings.totalSigners},p=function(e){return e.settings.requiredSigners},m=function(e,t){var n=e.quorum.extendedPublicKeyImporters[t],r="text"===n.method?"Unknown (make sure you have written this down previously!)":n.bip32Path,a="Unknown"===n.rootXfp?"00000000":n.rootXfp;return"unknown"===n.method?'    {\n        "name": "'.concat(n.name,'",\n        "bip32Path": "').concat(r,'",\n        "xpub": "').concat(n.extendedPublicKey,'",\n        "xfp" : "').concat(a,'"\n        }'):'    {\n        "name": "'.concat(n.name,'",\n        "bip32Path": "').concat(r,'",\n        "xpub": "').concat(n.extendedPublicKey,'",\n        "xfp" : "').concat(a,'",\n        "method": "').concat(n.method,'"\n      }')},h=Object(o.a)(u,(function(e){return e.reduce((function(e,t){return e+t.utxos.reduce((function(e,t){return e+parseInt(t.amountSats,10)}),0)}),0)})),f=Object(o.a)(c,(function(e){return e.reduce((function(e,t){return t.utxos.length?t.utxos.reduce((function(e,t){return t.confirmed?e:e+parseInt(t.amountSats,10)}),0)+e:e}),0)})),b=Object(o.a)([h,f],(function(e,t){return e-t})),E=Object(o.a)(u,(function(e){return e.map((function(e){if(!e.utxos.length&&e.addressUsed)return Object(r.a)(Object(r.a)({},e),{},{lastUsed:"Spent"});if(!e.utxos.length&&e.balanceSats.isEqualTo(0))return e;var t=Math.max.apply(Math,Object(a.a)(e.utxos.map((function(e){return e.time}))));return Number.isNaN(t)||e.balanceSats.isGreaterThan(0)&&!e.utxos.length?Object(r.a)(Object(r.a)({},e),{},{lastUsed:"Pending"}):Object(r.a)(Object(r.a)({},e),{},{lastUsed:new Date(1e3*t).toLocaleDateString(),lastUsedTime:t})}))})),g=Object(o.a)(E,(function(e){return e.filter((function(e){return("Pending"!==e.lastUsed||e.change)&&"Spent"!==e.lastUsed&&e.utxos.length}))})),v=Object(o.a)(E,(function(e){return e.filter((function(e){return e.addressUsed&&e.balanceSats.isEqualTo(0)}))})),y=Object(o.a)(E,(function(e){return e.filter((function(e){return e.balanceSats.isGreaterThan(0)}))})),P=Object(o.a)(E,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),O=Object(o.a)(u,(function(e){return e.filter((function(e){return!e.addressKnown}))})),S=Object(o.a)([u,O],(function(e){return e.map((function(e){return e.multisig.address}))})),T=Object(o.a)(c,(function(e){return e.filter((function(e){return e.balanceSats.isEqualTo(0)&&!e.addressUsed}))})),w=Object(o.a)([function(e){return e.wallet.common.walletName},l,function(e){return e.settings.network},function(e){return"private"===e.client.type?'{\n    "type": "private",\n    "url": "'.concat(e.client.url,'",\n    "username": "').concat(e.client.username,'"\n  }'):'{\n    "type": "public"\n  }'},p,d,function(e){for(var t=d(e),n=[],r=1;r<=t;r+=1)n.push("".concat(m(e,r)).concat(r<t?",":""));return n.join("\n")},function(e){return e.settings.startingAddressIndex}],(function(e,t,n,r,a,o,i,s){return'{\n  "name": "'.concat(e,'",\n  "addressType": "').concat(t,'",\n  "network": "').concat(n,'",\n  "client":  ').concat(r,',\n  "quorum": {\n    "requiredSigners": ').concat(a,',\n    "totalSigners": ').concat(o,'\n  },\n  "extendedPublicKeys": [\n    ').concat(i,'\n  ],\n  "startingAddressIndex": ').concat(s,"\n}")})),I=Object(o.a)([function(e){var t=e.quorum.extendedPublicKeyImporters;return Object.values(t).map((function(e){return e.extendedPublicKey}))},function(e){return e.quorum.defaultBIP32Path},p,l],(function(t,n,r,a){var o=n;"P2SH"===a&&(o="m/45'");try{var c=t.length,u="".concat(t.map((function(e){return Object(i.convertExtendedPublicKey)(e,"xpub")})).sort().reduce((function(e,t){return"".concat(e," ").concat(t)}),"")+r,"of").concat(c).concat(o).slice(1);return s.crypto.sha256(e.from(u,"utf-8")).toString("hex").toUpperCase().substring(0,8)}catch(l){return""}})),x=Object(o.a)([function(e){var t=e.quorum.extendedPublicKeyImporters;return Object.values(t).map((function(e){return e.method}))}],(function(e){return e.reduce((function(e,t){return e||"keystone"===t||"text"===t}),!1)}))}.call(this,n(8).Buffer)},716:function(e,t,n){},744:function(e,t,n){"use strict";var r=n(71);n.d(t,"a",(function(){return r}))},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return O}));var r=n(10),a=n.n(r),o=n(16),i=n(2),s=n(5),c=n(29),u=n.n(c),l=n(261),d=n.n(l);function p(){return(p=Object(o.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get(Object(s.blockExplorerAPIURL)("/address/".concat(t,"/utxo"),n));case 3:return r=e.sent,i=r.data,e.next=7,Promise.all(i.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(Object(s.blockExplorerAPIURL)("/tx/".concat(t.txid,"/hex"),n));case 2:return r=e.sent,o=r.data,i=new u.a(t.value),e.abrupt("return",{confirmed:t.status.confirmed,txid:t.txid,index:t.vout,amount:Object(s.satoshisToBitcoins)(i).toFixed(8),amountSats:i,transactionHex:o,time:t.status.block_time});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function m(){return(m=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get(Object(s.blockExplorerAPIURL)("/address/".concat(t),n));case 3:return r=e.sent,o=r.data,e.abrupt("return",{used:o.chain_stats.funded_txo_count>0||o.mempool_stats.funded_txo_count>0});case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get(Object(s.blockExplorerAPIURL)("/fee-estimates",t));case 3:return n=e.sent,r=n.data,e.abrupt("return",Math.ceil(r[2]));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function f(){return(f=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post(Object(s.blockExplorerAPIURL)("/tx",n),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data||e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var b=n(124);function E(e,t,n){return"public"===n.type?function(e,t){return p.apply(this,arguments)}(e,t):Object(b.d)(Object(i.a)(Object(i.a)({},Object(b.e)(n)),{address:e}))}function g(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark((function e(t,n,r){var o,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={utxos:[],balanceSats:u()(0),fetchedUTXOs:!1,fetchUTXOsError:""},e.prev=1,e.next=4,E(t,n,r);case 4:o=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c="private"===r.type&&Object(b.g)(e.t0)?{utxos:[],balanceSats:u()(0),addressKnown:!1,fetchedUTXOs:!0,fetchUTXOsError:""}:{fetchUTXOsError:e.t0.toString()};case 10:if(o){e.next=12;break}return e.abrupt("return",c);case 12:return l=Object(s.sortInputs)(o),d=l.map((function(e){return e.amountSats})).reduce((function(e,t){return e.plus(t)}),new u.a(0)),e.abrupt("return",Object(i.a)(Object(i.a)({},c),{},{balanceSats:d,utxos:l,fetchedUTXOs:!0,fetchUTXOsError:""}));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function y(e,t,n){return"public"===n.type?function(e,t){return m.apply(this,arguments)}(e,t):Object(b.b)(Object(i.a)(Object(i.a)({},Object(b.e)(n)),{address:e}))}function P(e,t){return"public"===t.type?function(e){return h.apply(this,arguments)}(e):Object(b.a)(Object(i.a)(Object(i.a)({},Object(b.e)(t)),{numBlocks:1}))}function O(e,t,n){return"public"===n.type?function(e,t){return f.apply(this,arguments)}(e,t):Object(b.f)(Object(i.a)(Object(i.a)({},Object(b.e)(n)),{hex:e}))}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i}));var r="caravan_config",a=20,o=5,i=1},87:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"h",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"j",(function(){return E})),n.d(t,"i",(function(){return g}));var r=n(135),a="SET_SIGNATURE_IMPORTER_NAME",o="SET_SIGNATURE_IMPORTER_METHOD",i="SET_SIGNATURE_IMPORTER_BIP32_PATH",s="SET_SIGNATURE_IMPORTER_PUBLIC_KEYS",c="SET_SIGNATURE_IMPORTER_SIGNATURE",u="SET_SIGNATURE_IMPORTER_FINALIZED",l="SET_SIGNATURE_IMPORTER_COMPLETE",d=Object(r.b)({setSignatureImporterName:a,setSignatureImporterMethod:o,setSignatureImporterBIP32Path:i,setSignatureImporterPublicKeys:s,setSignatureImporterSignature:c,setSignatureImporterFinalized:u,setSignatureImporterComplete:l}),p=d.setSignatureImporterName,m=d.setSignatureImporterMethod,h=d.setSignatureImporterBIP32Path,f=d.setSignatureImporterPublicKeys,b=d.setSignatureImporterSignature,E=d.setSignatureImporterFinalized,g=d.setSignatureImporterComplete}},[[1106,1,2]]]);
//# sourceMappingURL=main.5ab796ef.chunk.js.map